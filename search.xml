<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CSS居中的几种写法</title>
    <url>/2023/05/07/CSS%E5%B1%85%E4%B8%AD%E7%9A%84%E5%87%A0%E7%A7%8D%E5%86%99%E6%B3%95/</url>
    <content><![CDATA[<h1 id="一、行内元素的垂直水平居中方法"><a href="#一、行内元素的垂直水平居中方法" class="headerlink" title="一、行内元素的垂直水平居中方法"></a>一、行内元素的垂直水平居中方法</h1><h2 id="1-一行的垂直水平居中"><a href="#1-一行的垂直水平居中" class="headerlink" title="1.一行的垂直水平居中"></a>1.一行的垂直水平居中</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;out&quot;&gt;</span><br><span class="line">    &lt;span class=&quot;in&quot;&gt;要居中的行内元素span&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .out&#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    height: 300px;</span><br><span class="line">    background-color: grey;</span><br><span class="line">    line-height: 300px;</span><br><span class="line">    text-align: center;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  .in&#123;</span><br><span class="line">    background-color: blue;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>​        其实设置了 <code>line-height</code> 就可以让文本垂直居中，并不需要同时设置 <code>height</code>，这里也是一直存在的一个误区。</p>
<p>​        这种方式实现垂直居中运用的是 CSS 中“行距的上下等分机制”</p>
<p>​        这种方式实现的垂直居中是“近似”的，并不是完美的垂直居中，因为文字字形的垂直中线位置普遍要比真正的“行框盒子”的垂直中线位置低，而由于我们平时使用的 font-size 比较小，使得这点偏差不容易察觉出来，那么感官上也就看成是垂直居中了。</p>
<h2 id="2-多行或者图片等替换元素的垂直居中"><a href="#2-多行或者图片等替换元素的垂直居中" class="headerlink" title="2.多行或者图片等替换元素的垂直居中"></a>2.多行或者图片等替换元素的垂直居中</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;out&quot;&gt;</span><br><span class="line">    &lt;span class=&quot;in&quot;&gt;</span><br><span class="line">      要居中的行内元素span&lt;br&gt;</span><br><span class="line">      要居中的行内元素span</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.out&#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  height: 300px;</span><br><span class="line">  background-color: grey;</span><br><span class="line">  line-height: 300px;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">.in&#123;</span><br><span class="line">  background-color: blue;</span><br><span class="line"></span><br><span class="line">  display: inline-block;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>​        设置 <code>.in</code> 元素的 <code>display</code> 为 <code>inline-block</code>。作用在于既能重置外部的 <code>line-height</code> 为正常大小，又能保持行内元素特性，从而可以设置 <code>vertical-align</code> 属性，以及产生一个非常关键的“行框盒子”。我们需要的其实并不是这个“行框盒子”，而是每个“行框盒子”都会附带的一个产物 —— “幽灵空白节点”，即一个宽度为 0，表现如同普通字符的看不见的“节点”。有了这个“幽灵空白节点”，我们的 <code>line-height: 300px;</code> 就有了作用的对象，从而相当于在 <code>.in</code> 元素前面撑起了一个高度为 300px 的宽度为 0 的行内元素。</p>
<p>​        因为行内元素默认都是基线对齐的，所以我们通过对 <code>.in</code> 元素设置 vertical-align: middle; 来调整多行文本的垂直位置，从而实现我们想要的“垂直居中”效果。这种方式也适用于 <code>图片等替换元素</code> 的垂直居中效果。当然这里的“垂直居中”也是近似的，这是由于 <code>vertical-align</code> 导致的，具体为什么可以深入了解 <code>vertical-align: middle;</code>。</p>
<h1 id="二、块元素的垂直水平居中方法"><a href="#二、块元素的垂直水平居中方法" class="headerlink" title="二、块元素的垂直水平居中方法"></a>二、块元素的垂直水平居中方法</h1><h2 id="1-position-margin-auto"><a href="#1-position-margin-auto" class="headerlink" title="1.position + margin: auto"></a>1.position + margin: auto</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;out&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;in&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.out&#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  height: 300px;</span><br><span class="line">  background-color: grey;</span><br><span class="line"></span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.in&#123;</span><br><span class="line">  background-color: blue;</span><br><span class="line">  width: 50px;</span><br><span class="line">  height: 50px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  margin: auto;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>​        设置 <code>.out</code> 元素为相对定位 <code>position: relative;</code>，这样其子元素设置绝对定位时就相对它了。</p>
<p>​        然后设置 <code>.in</code> 元素为绝对定位 <code>position: absolute;</code> 并设置它的 <code>top</code>、<code>left</code>、<code>bottom</code>、<code>right</code> 都为0，这样该元素的元素的尺寸表现为“格式化宽度和格式化高度”，和 <code>&lt;div&gt;</code> 的“正常流宽度”一样，同属于外部尺寸，也就是尺寸自动填充父级元素的可用尺寸，但由于此时我们设置了 .content 元素的宽高，就限制了元素自动填充，这样就多出来50px的空间了。</p>
<p>​        最后我们设置 <code>.in</code> 元素为 <code>margin: auto;</code> ，此时根据 auto 的计算规则，将上下左右剩余空间全部等分了，自然就居中了。</p>
<h2 id="2-position-translate"><a href="#2-position-translate" class="headerlink" title="2.position + translate"></a>2.position + translate</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;out&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;in&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.out&#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  height: 300px;</span><br><span class="line">  background-color: grey;</span><br><span class="line"></span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.in&#123;</span><br><span class="line">  width: 50px;</span><br><span class="line">  height: 50px;</span><br><span class="line">  background-color: blue;</span><br><span class="line">  </span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 50%;</span><br><span class="line">  left: 50%;</span><br><span class="line">  transform: translate(-50%,50%);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>​        设置 .out 元素为相对定位 position: relative;，这样其子元素设置绝对定位时就相对它了。</p>
<p>​        然后设置 <code>.in</code> 元素为绝对定位 <code>position: absolute;</code> 并设置 <code>top: 50%;</code>、<code>left: 50%;</code>，这样 <code>.in</code> 元素的左上角就位于 <code>.out</code> 元素的中心了。</p>
<p>​        最后设置 <code>.in</code> 元素 <code>transform: translate(-50%, -50%);</code> 将自身左移及上移宽高的一半，这样 <code>.in</code> 元素的中心处于 <code>.out</code> 元素的中心处，自然就实现了居中效果。</p>
<h2 id="3-flex布局"><a href="#3-flex布局" class="headerlink" title="3.flex布局"></a>3.flex布局</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;out&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;in&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.out&#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  height: 300px;</span><br><span class="line">  background-color: grey;</span><br><span class="line"></span><br><span class="line">  display: flex;</span><br><span class="line">&#125;</span><br><span class="line">.in&#123;</span><br><span class="line">  background-color: blue;</span><br><span class="line">  width: 50px;</span><br><span class="line">  height: 50px;</span><br><span class="line">  </span><br><span class="line">  margin: auto;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>​        设置 <code>.out</code> 元素 <code>display:flax;</code></p>
<p>​        然后设置 <code>.in</code> 元素为 <code>margin:auto;</code> 即可实现居中</p>
<p>​        这是毋庸置疑的最佳解决方案，我们不需要设置 <code>.in</code> 元素为绝对定位，<code>margin: auto</code> 自然就可以作用于宽高，而且我们也不需要设置 <code>.in</code> 元素的宽高， 因为Flexbox(伸缩盒)是专门针对这类需求所设计的。</p>
<p>​        Flexbox 的另一个好处在于，它还可以将匿名容器(即没有被标签包裹的文本节点)垂直居中。比如我们不设置 <code>.out</code> 元素为 <code>display: flex;</code>，而是设置 .in 元素为 <code>display: flex;</code>，并借助 Flexbox 规范所引入的 <code>align-items</code> 和 <code>justify-content</code> 属性，我们可以让它内部的文本也实现居中（我们可以对.out 元素使用相同的属性来使 <code>.content</code> 元素元素居中，但比 <code>margin: auto</code> 方法要更加优雅一些，并且同时起到了回退的作用）。</p>
<blockquote>
<p> 引用：</p>
<p><a href="https://article.itxueyuan.com/L4wG3">https://article.itxueyuan.com/L4wG3</a></p>
</blockquote>
]]></content>
      <categories>
        <category>前端</category>
        <category>Css</category>
      </categories>
      <tags>
        <tag>Css</tag>
      </tags>
  </entry>
  <entry>
    <title>Cookie、localStorage、sessionStorage</title>
    <url>/2020/04/11/Cookie%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/</url>
    <content><![CDATA[<h2 id="一、他们之间的区别"><a href="#一、他们之间的区别" class="headerlink" title="一、他们之间的区别"></a>一、他们之间的区别</h2><table>
<thead>
<tr>
<th></th>
<th>cookie</th>
<th>localStorage</th>
<th>sessionStorage</th>
</tr>
</thead>
<tbody><tr>
<td>大小</td>
<td>4kb</td>
<td>10Mb</td>
<td>5Mb</td>
</tr>
<tr>
<td>兼容</td>
<td>H4&#x2F;H5</td>
<td>H5</td>
<td>H5</td>
</tr>
<tr>
<td>访问</td>
<td>任何窗口</td>
<td>任何窗口</td>
<td>同一窗口</td>
</tr>
<tr>
<td>有效期</td>
<td>手动设置</td>
<td>无</td>
<td>到窗口关闭</td>
</tr>
<tr>
<td>存储位置</td>
<td>浏览器和服务器</td>
<td>浏览器</td>
<td>浏览器</td>
</tr>
<tr>
<td>与请求一起发送</td>
<td>是</td>
<td>否</td>
<td>否</td>
</tr>
<tr>
<td>语法难易度</td>
<td>复杂</td>
<td>简易</td>
<td>简易</td>
</tr>
<tr>
<td>安全性</td>
<td>不安全</td>
<td>不安全</td>
<td>不安全</td>
</tr>
</tbody></table>
<h2 id="二、应用场景"><a href="#二、应用场景" class="headerlink" title="二、应用场景"></a>二、应用场景</h2><p>Cookie：</p>
<ul>
<li>会话管理：登陆、游戏得分或者服务器应该记住的其他内容</li>
<li>个性化：用户偏好、主题或者其他设置</li>
<li>追踪：记录和分析用户行为</li>
<li>特点：服务器和浏览器存储</li>
</ul>
<p>localStorage：</p>
<ul>
<li>购物车等、长期本地存储</li>
</ul>
<p>sessionStorage：</p>
<ul>
<li>表单：表单拆分成多个子页面，按步骤引导填写</li>
<li>临时本地存储</li>
</ul>
<h2 id="三、cookie的使用"><a href="#三、cookie的使用" class="headerlink" title="三、cookie的使用"></a>三、cookie的使用</h2><h3 id="1-cookie基本语法格式"><a href="#1-cookie基本语法格式" class="headerlink" title="1.cookie基本语法格式"></a>1.cookie基本语法格式</h3><p>格式：name&#x3D;value;[expires&#x3D;date];[path&#x3D;path];[domain&#x3D;somewhere.com];[secure]</p>
<p><strong>设置cookie</strong>：document.cookie&#x3D;’username&#x3D;xxx’;</p>
<p><strong>获取cookie</strong>：alert(document.cookie);</p>
<h3 id="2-cookie有一个中文编码问题"><a href="#2-cookie有一个中文编码问题" class="headerlink" title="2.cookie有一个中文编码问题"></a>2.cookie有一个中文编码问题</h3><p>解决存储中文时的乱码问题：编码存储、解码读取</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">document.cookie=&#x27;user=&#x27;+encodeURIComponent(&#x27;钢铁侠&#x27;); //编码写入</span><br><span class="line"></span><br><span class="line">alert(decodeURIComponent(document.cookie)); //解码读取</span><br></pre></td></tr></table></figure>

<h3 id="3-expires参数"><a href="#3-expires参数" class="headerlink" title="3. expires参数"></a>3. expires参数</h3><p>expires：过期时间</p>
<ul>
<li><p>必须填写日期对象</p>
</li>
<li><p>系统自动清除过期cookie</p>
</li>
<li><p>默认值为会话，整个浏览器关闭为会话结束</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function afterOfDate(n)&#123;</span><br><span class="line">    var d=new Date();</span><br><span class="line">    var day=d.getDate();</span><br><span class="line">    d.setDate(n+day);</span><br><span class="line">    return d</span><br><span class="line">&#125;</span><br><span class="line">//设置一条7天后过期的cookie</span><br><span class="line">document.cookie=&quot;username=xxx;expires=&quot;+afterOfDate(7);</span><br></pre></td></tr></table></figure>

<h3 id="4-添加cookie"><a href="#4-添加cookie" class="headerlink" title="4.添加cookie"></a>4.添加cookie</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Cookie c = new Cookie(&quot;username&quot;,encodeURIComponent(&#x27;钢铁侠&#x27;));// 新建一个Cookie对象</span><br><span class="line">c.setMaxAge(24*60*60);                    // 设置过期时间1天，以秒为单位</span><br><span class="line">response.addCookie(c);                    // 保存cookie到客户端</span><br></pre></td></tr></table></figure>

<h3 id="5-删除cookie"><a href="#5-删除cookie" class="headerlink" title="5. 删除cookie"></a>5. 删除cookie</h3><ol>
<li>cookie同名添加覆盖上一条记录</li>
<li>浏览器自动删除过期的cookie</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">document.cookie=&quot;username=;expires=&quot;+afterOfDate(-1);</span><br><span class="line">//将时间设置为过去的天数cookie就被浏览器删掉了</span><br><span class="line"></span><br><span class="line">//快速获取过去时间 1970年</span><br><span class="line">new Date(0);</span><br><span class="line"></span><br><span class="line">document.cookie=&quot;username=;expires=&quot;+new Date(0);</span><br></pre></td></tr></table></figure>

<h3 id="6-其他参数"><a href="#6-其他参数" class="headerlink" title="6.其他参数"></a>6.其他参数</h3><p>格式：name&#x3D;value;[expires&#x3D;date];[path&#x3D;path];[domain&#x3D;somewhere.com];[secure]</p>
<ul>
<li><p>path 限制访问路径</p>
</li>
<li><ul>
<li>如果不去设置，默认是加载当前html文件的路径</li>
<li>设置的cookie路径和当前加载文件的路径必须一致，不一致访问失败</li>
</ul>
</li>
<li><p>domain 限制访问域名</p>
</li>
<li><ul>
<li>如果不去设置，默认是加载当前.html文件的服务器域名&#x2F;ip</li>
<li>设置cookie域名和加载当前文件的域名不一致，设置cookie失败</li>
</ul>
</li>
<li><p>secure 安全</p>
</li>
<li><ul>
<li>如果不设置，设置cookie，可以通过http或者https协议加载文件设置</li>
<li>设置了，只能通过https协议加载cookie</li>
</ul>
</li>
<li><p>HttpOnly 安全</p>
</li>
<li><ul>
<li>JavaScript <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie">Document.cookie</a> API 无法访问带有 HttpOnly 属性的 cookie，此预防措施有助于缓解<a href="https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks">跨站点脚本（XSS）(en-US)</a>攻击。</li>
<li>并不是说使用了就绝对安全，不要把敏感重要信息存储到cookie这是很危险的。</li>
</ul>
</li>
</ul>
<h3 id="7-简单的封装"><a href="#7-简单的封装" class="headerlink" title="7.简单的封装"></a>7.简单的封装</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//添加cookie</span><br><span class="line">function setCookie(name,value,time)&#123; </span><br><span class="line">    var date= new Date(); </span><br><span class="line">    date.setDate(date.getDate()+time); </span><br><span class="line">    document.cookie = name+&quot;=&quot;+value+&quot;;expires=&quot;+date; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">//获得cookie</span><br><span class="line">function getCookie(name)&#123; </span><br><span class="line">    var arr = document.cookie.split(&quot;;&quot;); </span><br><span class="line">    for(var i=0; i&lt;arr.length; i++)&#123; </span><br><span class="line">    var arr2 = arr[i].split(&quot;=&quot;); </span><br><span class="line">        if(arr2[0] == name)&#123; </span><br><span class="line">            return arr2[1]; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    return null; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">//删除cookie</span><br><span class="line">function removeCookie(name)&#123; </span><br><span class="line">    setCookie(name,&quot;&quot;,0) </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h2 id="四、localStorage的使用"><a href="#四、localStorage的使用" class="headerlink" title="四、localStorage的使用"></a>四、localStorage的使用</h2><p>这个比cookie简单的多</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;localStorage</span><br><span class="line">  特点：浏览器关闭还存在</span><br><span class="line">&lt;/h2&gt;</span><br><span class="line">&lt;button onclick=&quot;saveDate()&quot;&gt;点我保存一个数据&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;getdate()&quot;&gt;点我读取一个数据&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;delDate()&quot;&gt;点我删除一个数据&lt;/button&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let p = &#123;name:&#x27;张三&#x27;,age:18&#125;</span><br><span class="line">  function saveDate()&#123;</span><br><span class="line"></span><br><span class="line">    localStorage.setItem(&#x27;msg&#x27;,&#x27;hello!&#x27;)</span><br><span class="line">    localStorage.setItem(&#x27;person&#x27;,JSON.stringify(p))</span><br><span class="line">  &#125;</span><br><span class="line">  function getdate()&#123;</span><br><span class="line">    console.log(localStorage.getItem(&#x27;person&#x27;));</span><br><span class="line">  &#125;</span><br><span class="line">  function delDate()&#123;</span><br><span class="line">    localStorage.removeItem(&#x27;person&#x27;)</span><br><span class="line">    localStorage.clear()</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="五、sessionStorage的使用"><a href="#五、sessionStorage的使用" class="headerlink" title="五、sessionStorage的使用"></a>五、sessionStorage的使用</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;h2&gt;</span><br><span class="line">  特点：浏览器关闭就没了</span><br><span class="line">&lt;/h2&gt;</span><br><span class="line">&lt;button onclick=&quot;saveDate()&quot;&gt;点我保存一个数据&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;getdate()&quot;&gt;点我读取一个数据&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;delDate()&quot;&gt;点我删除一个数据&lt;/button&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let p = &#123;name:&#x27;张三&#x27;,age:18&#125;</span><br><span class="line">  function saveDate()&#123;</span><br><span class="line"></span><br><span class="line">    sessionStorage.setItem(&#x27;msg&#x27;,&#x27;hello!&#x27;)</span><br><span class="line">    sessionStorage.setItem(&#x27;person&#x27;,JSON.stringify(p))</span><br><span class="line">  &#125;</span><br><span class="line">  function getdate()&#123;</span><br><span class="line">    console.log(sessionStorage.getItem(&#x27;person&#x27;));</span><br><span class="line">  &#125;</span><br><span class="line">  function delDate()&#123;</span><br><span class="line">    sessionStorage.removeItem(&#x27;person&#x27;)</span><br><span class="line">    sessionStorage.clear()</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>Js</category>
      </categories>
      <tags>
        <tag>Html</tag>
        <tag>Js</tag>
      </tags>
  </entry>
  <entry>
    <title>MongoDB常用命令</title>
    <url>/2023/04/04/MongoDB%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h3 id="一-数据库相关"><a href="#一-数据库相关" class="headerlink" title="一. 数据库相关"></a>一. 数据库相关</h3><ol>
<li><h5 id="查询数据库列表"><a href="#查询数据库列表" class="headerlink" title="查询数据库列表"></a>查询数据库列表</h5><p><code>show dbs </code></p>
</li>
<li><h5 id="创建或切换数据库"><a href="#创建或切换数据库" class="headerlink" title="创建或切换数据库"></a>创建或切换数据库</h5><p><code>use database_name </code></p>
</li>
<li><h5 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h5><p><code>db.dropDatabase() </code></p>
</li>
</ol>
<h3 id="二-集合相关"><a href="#二-集合相关" class="headerlink" title="二. 集合相关"></a>二. 集合相关</h3><ol>
<li><h5 id="创建集合"><a href="#创建集合" class="headerlink" title="创建集合"></a>创建集合</h5><p><code>db.createCollection(name, options) </code></p>
<p>options:</p>
<ul>
<li><strong>capped</strong>如果为true则创建固定集合（有着固定大小的集合） </li>
<li><strong>size</strong>为固定集合指定一个最大值，如果capped为true需要指定该字段 </li>
<li><strong>max</strong> 指定固定集合中包含文档的最大数量</li>
</ul>
<p>举例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">db.createCollection(&quot;t_article&quot;, &#123;</span><br><span class="line">    capped: <span class="literal">false</span>,</span><br><span class="line">    size: <span class="number">5242880</span>, <span class="operator">/</span><span class="operator">/</span>Specify a maximum size <span class="keyword">in</span> bytes <span class="keyword">for</span> a capped collection. </span><br><span class="line">    max:<span class="number">5000</span>, <span class="operator">/</span><span class="operator">/</span>The maximum number <span class="keyword">of</span> documents allowed <span class="keyword">in</span> the capped collection.</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="查看集合列表"><a href="#查看集合列表" class="headerlink" title="查看集合列表"></a>查看集合列表</h5><p><code>show collections</code></p>
</li>
<li><h5 id="删除集合"><a href="#删除集合" class="headerlink" title="删除集合"></a>删除集合</h5><p><code>db.&lt;集合名&gt;.drop() </code></p>
</li>
</ol>
<h3 id="三-文档相关"><a href="#三-文档相关" class="headerlink" title="三. 文档相关"></a>三. 文档相关</h3><ol>
<li><h5 id="插入文档"><a href="#插入文档" class="headerlink" title="插入文档"></a>插入文档</h5><p><code>insert()</code> 或者 <code>insertMany()</code></p>
<p>举例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">db.t_article.insertMany([</span><br><span class="line">    &#123;</span><br><span class="line">        id: <span class="number">1</span>,</span><br><span class="line">        title: &quot;2018新版java学习路线&quot;,</span><br><span class="line">        content: &quot;java学习路线&quot;,</span><br><span class="line">        created: <span class="keyword">new</span> <span class="type">Date</span>(&quot;2018-10-10&quot;),</span><br><span class="line">        modified: <span class="keyword">null</span>,</span><br><span class="line">        categories: &quot;默认分类&quot;,</span><br><span class="line">        tags: [&quot;2018&quot;,&quot;Java&quot;,<span class="string">&#x27;学习路线&#x27;</span>],</span><br><span class="line">        allow_comment: <span class="number">1</span>,</span><br><span class="line">        thumbnail: <span class="keyword">null</span>,</span><br><span class="line">        hits: <span class="number">92</span>,</span><br><span class="line">        comments_num: <span class="number">2</span>,</span><br><span class="line">        t_comment:[</span><br><span class="line">            &#123;</span><br><span class="line">                created:<span class="keyword">new</span> <span class="type">Date</span>(&quot;2018-12-13&quot;),</span><br><span class="line">                ip:&quot;0:0:0:0:0:0:0:1&quot;,</span><br><span class="line">                content:&quot;很不错&quot;,</span><br><span class="line">                status:&quot;approved&quot;,</span><br><span class="line">                author:&quot;李四&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                created:<span class="keyword">new</span> <span class="type">Date</span>(&quot;2018-12-14&quot;),</span><br><span class="line">                ip:&quot;0:0:0:0:0:0:0:1&quot;,</span><br><span class="line">                content:&quot;很不错d&quot;,</span><br><span class="line">                status:&quot;approved&quot;,</span><br><span class="line">                author:&quot;张三&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        id: <span class="number">2</span>,</span><br><span class="line">        title: &quot;2018新版python学习路线&quot;,</span><br><span class="line">        content: &quot;python学习路线&quot;,</span><br><span class="line">        created: <span class="keyword">new</span> <span class="type">Date</span>(&quot;2018-10-10&quot;),</span><br><span class="line">        modified: <span class="keyword">null</span>,</span><br><span class="line">        categories: &quot;默认分类&quot;,</span><br><span class="line">        tags: [&quot;2018&quot;,&quot;python&quot;,<span class="string">&#x27;学习路线&#x27;</span>],</span><br><span class="line">        allow_comment: <span class="number">1</span>,</span><br><span class="line">        thumbnail: <span class="keyword">null</span>,</span><br><span class="line">        hits: <span class="number">18</span>,</span><br><span class="line">        comments_num: <span class="number">1</span>,</span><br><span class="line">        t_comment:[</span><br><span class="line">            &#123;</span><br><span class="line">                created:<span class="keyword">new</span> <span class="type">Date</span>(&quot;2018-12-13&quot;),</span><br><span class="line">                ip:&quot;0:0:0:0:0:0:0:1&quot;,</span><br><span class="line">                content:&quot;很不错&quot;,</span><br><span class="line">                status:&quot;approved&quot;,</span><br><span class="line">                author:&quot;王五&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="查询文档"><a href="#查询文档" class="headerlink" title="查询文档"></a>查询文档</h5><p><code>db.&lt;集合名&gt;.find(&lt;query&gt;,&lt;projection&gt;)</code></p>
<p>options:</p>
<ul>
<li>query: 可选，使用查询操作符指定查询条件 </li>
<li>projection: 可选，使用投影操作符指定返回的键。查询时返回文档中所有键值， 只需省略该参数即可（默认省略）。</li>
</ul>
<p>举例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> <span class="number">1</span> 查询：名字是tom 只显示username字段和email字段</span><br><span class="line">db.t_user.find(&#123;username:&quot;tom&quot;&#125;,&#123;username: <span class="number">1</span>,email: <span class="number">1</span>&#125;)</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> 返回</span><br><span class="line">&#123;</span><br><span class="line">	&quot;_id&quot; : ObjectId(&quot;642c1d48316b1ef08b947f36&quot;),</span><br><span class="line">	&quot;username&quot; : &quot;tom&quot;,</span><br><span class="line">	&quot;email&quot; : &quot;2127269781@qq.com&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="number">2</span> 查询点击量和评论数都大于等于<span class="number">1</span>的文章，查询结果只显示文章标题和tags</span><br><span class="line">db.t_article.find(</span><br><span class="line">    &#123;</span><br><span class="line">        hits: &#123;$gt:<span class="number">1</span>&#125;,			<span class="operator">/</span><span class="operator">/</span> $gt大于 $lt小于 $gte大于等于 $lte小于等于</span><br><span class="line">        comments_num: &#123;$gt:<span class="number">1</span>&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        title: <span class="number">1</span>,</span><br><span class="line">        tags: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> <span class="number">3</span> 查询文章标题以：<span class="number">2018</span>开头的文章，查询结果除了文章内容不显示，其他都显示。</span><br><span class="line">db.t_article.find(</span><br><span class="line">    &#123;</span><br><span class="line">        title: &#123;$regex:<span class="string">&#x27;^2018.*&#x27;</span>&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        content: <span class="number">0</span>,</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="更新文档"><a href="#更新文档" class="headerlink" title="更新文档"></a>更新文档</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">db.collection.update(</span><br><span class="line">   <span class="operator">&lt;</span>query<span class="operator">&gt;</span>,</span><br><span class="line">   <span class="operator">&lt;</span><span class="keyword">update</span><span class="operator">&gt;</span>,</span><br><span class="line">   &#123;</span><br><span class="line">     upsert: <span class="operator">&lt;</span><span class="type">boolean</span><span class="operator">&gt;</span>,</span><br><span class="line">     multi: <span class="operator">&lt;</span><span class="type">boolean</span><span class="operator">&gt;</span>,</span><br><span class="line">     writeConcern: <span class="operator">&lt;</span>document<span class="operator">&gt;</span></span><br><span class="line">   &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>options</p>
<ul>
<li>query : update的查询条件，类似sql update查询内where后面的。</li>
<li>update : update的对象和一些更新的操作符（如$,$inc…）等，也可以理解为sql update查询内set后面的</li>
<li>upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。</li>
<li>multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。</li>
<li>writeConcern :可选，抛出异常的级别。</li>
</ul>
<p>举例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> 将用户 tom 的权限更新为ROLE_admin</span><br><span class="line">db.t_user.update(</span><br><span class="line">    &#123;username: &quot;tom&quot;&#125;,</span><br><span class="line">    &#123;$<span class="keyword">set</span>:&#123;&quot;authority&quot;:&quot;ROLE_admin&quot;&#125;&#125;, </span><br><span class="line">    &#123; multi: <span class="literal">false</span>, upsert: <span class="literal">true</span>&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>


</li>
<li><h5 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h5><p><code>db.colection.remove(&lt;query&gt;,&lt;justOne&gt;)</code></p>
<p>options:</p>
<ul>
<li>query: (可选) 删除条件</li>
<li>justOne: (可选) 默认false 全删，可以设为true或1，只删除一个</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>MongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title>Promise</title>
    <url>/2023/04/05/Promise,async,await/</url>
    <content><![CDATA[<h3 id="1-基本功能"><a href="#1-基本功能" class="headerlink" title="1. 基本功能"></a>1. 基本功能</h3><p>​	在处理一些需要花费比较长时间的任务时，使用Promise就可以进行异步的处理，防止阻塞。实现把异步当同步写。</p>
<h3 id="2-解决问题"><a href="#2-解决问题" class="headerlink" title="2. 解决问题"></a>2. 解决问题</h3><p>​	解决回调地狱问题，而且因为有了resolve和reject可以进行异步处理并且得知任务进度</p>
<h3 id="3-异步任务"><a href="#3-异步任务" class="headerlink" title="3. 异步任务"></a>3. 异步任务</h3><p>​	异步任务不进入主线程，而是进入异步队列，前一个任务是否执行完毕不影响下一个任务的执行。 </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我在上面&#x27;</span>)</span><br><span class="line">&#125;,<span class="number">1000</span>&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我在下面&#x27;</span>)</span><br><span class="line"></span><br><span class="line">执行结果：</span><br><span class="line">    我在下面</span><br><span class="line">    我在上面</span><br><span class="line">  &gt;</span><br></pre></td></tr></table></figure>

<p>​	这种不阻塞后面任务执行的任务就叫异步任务</p>
<h3 id="4-回调地狱"><a href="#4-回调地狱" class="headerlink" title="4. 回调地狱"></a>4. 回调地狱</h3><p>​	上面说到，异步任务不能保证按照顺序执行，但实际上我们是有这样的需求的。在没有promise的时候我们这样子实现。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;获取id&quot;</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;获取用户名&quot;</span>);</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;获取email&quot;</span>);</span><br><span class="line">        &#125;,<span class="number">2000</span>)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;,<span class="number">3000</span>)</span><br></pre></td></tr></table></figure>

<p>​	可以看到，代码中的回调函数套回调函数，居然套了3层，这种回调函数中嵌套回调函数的情况就叫做回调地狱。</p>
<p>​	总结一下，回调地狱就是为是实现代码顺序执行而出现的一种操作，它会造成我们的代码可读性非常差，后期不好维护。</p>
<h3 id="5-Promise基本使用"><a href="#5-Promise基本使用" class="headerlink" title="5. Promise基本使用"></a>5. Promise基本使用</h3><p>new Promise((resolve,reject)&#x3D;&gt;{})</p>
<ul>
<li><p>Promise接受一个函数作为参数</p>
</li>
<li><p>函数参数中接受俩个形参参数</p>
</li>
<li><ul>
<li>resolve</li>
<li>reject</li>
</ul>
</li>
</ul>
<p>控制台打印Promise实例，他有两个属性</p>
<ul>
<li>state: 状态</li>
<li>result: 结果</li>
</ul>
<h3 id="6-Promise的状态"><a href="#6-Promise的状态" class="headerlink" title="6. Promise的状态"></a>6. Promise的状态</h3><p>第一种状态：pending (准备，待解决，进行中)</p>
<p>第二种状态：fulfilled (已完成，成功)</p>
<p>第三种状态：rejected (已拒绝，失败)</p>
<h3 id="7-Promise状态的改变"><a href="#7-Promise状态的改变" class="headerlink" title="7. Promise状态的改变"></a>7. Promise状态的改变</h3><p>通过调用resolve()和reject()改变当前promise对象的状态</p>
<p>示例</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p)<span class="comment">// [[PromiseState]]: &quot;fulfilled&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">reject</span>()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p)<span class="comment">// [[PromiseState]]: &quot;rejected&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>promise状态的改变是一次性的。</strong> 改状态只能改一次，不是fulfilled就是rejected</p>
<h3 id="8-Promise的结果属性"><a href="#8-Promise的结果属性" class="headerlink" title="8. Promise的结果属性"></a>8. Promise的结果属性</h3><p>​	通过调用resolve()或reject()传递参数，改变当前promise对象的结果</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&#x27;resolve的参数&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p)<span class="comment">// [[PromiseResult]]: &quot;resolve的参数&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-Promise的方法"><a href="#9-Promise的方法" class="headerlink" title="9. Promise的方法"></a>9. Promise的方法</h3><h4 id="1-then方法"><a href="#1-then方法" class="headerlink" title="1) then方法"></a>1) then方法</h4><p>参数是两个回调函数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">p.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//promise的状态是fulfilled时，执行  </span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;成功时调用&#x27;</span>,value);<span class="comment">//value是resolve传入的参数</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//promise的状态是reject时，执行</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;失败时调用&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>then方法返回值是一个新的Promise实例，状态是pending</p>
<p>promise的状态不改变，不会执行then里的方法</p>
<p>这意味着我们可以进行链式编码</p>
<p>new Promise((resolve,reject)&#x3D;&gt;{}).then().then().then()</p>
<p>如何修改上一个then返回的promise的状态</p>
<p>使用return 可以将返回的promise的状态修改成fulfilled</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">&#125;) <span class="comment">//第一个promise</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> t = p.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123; <span class="comment">//返回的t是第二个promise</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;成功&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span>        <span class="comment">//调用return 修改t promise的状态</span></span><br><span class="line">&#125;,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;失败&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">t.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123; <span class="comment">//怎么修改t的状态 好让第三个then输出成功2执行↑</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;成功2&#x27;</span>,value);</span><br><span class="line">&#125;,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;失败&quot;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>什么情况会修改promise为reject呢</p>
<p>如果then方法中，出现代码错误，会将返回的promise实例的状态改为fulfilled</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">&#125;) <span class="comment">//第一个promise</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> t = p.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123; <span class="comment">//返回的t是第二个promise</span></span><br><span class="line">    <span class="comment">//如果这里代码出错，会将t实例的状态改成rejected</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">&#125;,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;失败&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">t.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123; <span class="comment">//怎么修改t的状态 好让第三个then输出成功2执行↑</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;成功2&#x27;</span>,value);</span><br><span class="line">&#125;,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;失败&quot;</span>); <span class="comment">//上面出错会执行这一步</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="2-catch方法"><a href="#2-catch方法" class="headerlink" title="2) catch方法"></a>2) catch方法</h4><p>当promise状态为rejected或promise执行体中出现代码出错时，将执行catch方法，参数是错误信息</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//thorw new Error(&#x27;error&#x27;)</span></span><br><span class="line">    <span class="comment">// console.log(a);</span></span><br><span class="line">    <span class="title function_">reject</span>();</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;失败&#x27;</span>,e);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-Promise-all"><a href="#3-Promise-all" class="headerlink" title="3) Promise.all"></a>3) Promise.all</h4><p>将多个Promise实例包装成一个新的Promise实例的方法，Promise.all的入参不一定非要是数组，只要是具有Iterator结构的数据集合都行。</p>
<p>Promise.all 等待所有成功返回成功（有一个失败，则进入失败方法）。</p>
<p>应用场景:</p>
<ul>
<li>一个页面，有多个请求，我们需求所有的请求都返回数据后再一起处理渲染 </li>
<li>我们需求单独处理一个请求的数据渲染和错误处理逻辑，有多个请求，我们就需要在多个地方写 </li>
<li>验证多个请求结果是否都是满足条件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="number">1337</span>;</span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(resolve, <span class="number">100</span>, <span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([p1, p2, p3]).<span class="title function_">then</span>(<span class="function"><span class="params">values</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(values); <span class="comment">// [3, 1337, &quot;foo&quot;]</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="手写实现Promise-all"><a href="#手写实现Promise-all" class="headerlink" title="手写实现Promise.all"></a>手写实现Promise.all</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">实现思路：</span></span><br><span class="line"><span class="comment">1.遍历数组</span></span><br><span class="line"><span class="comment">2.判断是否是promise对象</span></span><br><span class="line"><span class="comment">  - 是就执行.then</span></span><br><span class="line"><span class="comment">    - 成功就将值添加到返回值数组</span></span><br><span class="line"><span class="comment">    - 失败就调用 当前promise的reject()</span></span><br><span class="line"><span class="comment">  - 不是 就直接把值添加到返回值数组</span></span><br><span class="line"><span class="comment">3.因为有异步任务 每次添加值都记录一遍index++ 与 数组值相等说明任务</span></span><br><span class="line"><span class="comment">    都执行完了 可以执行resolve(结果)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">myall</span> = <span class="keyword">function</span> (<span class="params">array</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">addData</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">      result[key] = value</span><br><span class="line">      index++</span><br><span class="line">      <span class="comment">//3. 任务都执行完毕 resolve(result)</span></span><br><span class="line">      <span class="keyword">if</span> (index === array.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(result)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//1.遍历数组</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> current = array[i];</span><br><span class="line">      <span class="comment">//2.判断是不是Promise</span></span><br><span class="line">      <span class="keyword">if</span> (current <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">        <span class="comment">//promise对象 执行then</span></span><br><span class="line">        current.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> <span class="title function_">addData</span>(i, value), <span class="function"><span class="params">reason</span> =&gt;</span> <span class="title function_">reject</span>(reason))</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//普通值 添加到返回值数组</span></span><br><span class="line">        <span class="title function_">addData</span>(i, array[i])</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4）Promise存在的问****题</strong></p>
<ul>
<li>promise一旦执行，无法中途取消</li>
<li>promise的错误无法在外部被捕捉到，只能在内部进行预判处理</li>
<li>promise的内如何执行，监测起来很难</li>
</ul>
<h3 id="10-promise实践"><a href="#10-promise实践" class="headerlink" title="10. promise实践"></a>10. promise实践</h3><h3 id="常见写法"><a href="#常见写法" class="headerlink" title="常见写法"></a>常见写法</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;成功&quot;</span>,value);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">reason</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="解决回调地狱"><a href="#解决回调地狱" class="headerlink" title="解决回调地狱"></a>解决回调地狱</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&quot;第一次请求数据&quot;</span>)</span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&quot;第二次请求数据&quot;</span>)</span><br><span class="line">        &#125;,<span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&quot;第三次请求数据&quot;</span>)</span><br><span class="line">        &#125;,<span class="number">2000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="11-async-await"><a href="#11-async-await" class="headerlink" title="11. async,await"></a>11. async,await</h3><p>​	使用async,await语法糖可以让异步代码看起来像同步代码，提高代码可阅读性。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//原来Promise的写法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&quot;https://jsonplaceholder.typicode.com/posts/1&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res.<span class="title function_">json</span>()</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    &#125;).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// 清理工作</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用async语法糖</span></span><br><span class="line"><span class="comment">//async将函数标记为异步函数</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// 请求不需要then处理,而是用await</span></span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://jsonplaceholder.typicode.com/posts/1&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> json = <span class="keyword">await</span> response.<span class="title function_">json</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(json);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getData</span>()</span><br></pre></td></tr></table></figure>

<p>使用async,await应该避免的坑：</p>
<h4 id="一、使用async和await会打破并行"><a href="#一、使用async和await会打破并行" class="headerlink" title="一、使用async和await会打破并行"></a>一、使用async和await会打破并行</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> a = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://...&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> b = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​	这里的两个fetch并不是并行操作，而是a先获取到，再执行b的请求。更高效的做法是将所有Promise用Promise.all组合起来，然后再去await。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> promiseA = <span class="title function_">fetch</span>(<span class="string">&quot;https://...&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> promiseB = <span class="title function_">fetch</span>(<span class="string">&quot;https://...&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span>[a,b] = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([promiseA,promiseB])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="二、在循环中执行异步操作，不能直接调用forEach或map这一类方法的"><a href="#二、在循环中执行异步操作，不能直接调用forEach或map这一类方法的" class="headerlink" title="二、在循环中执行异步操作，不能直接调用forEach或map这一类方法的"></a>二、在循环中执行异步操作，不能直接调用forEach或map这一类方法的</h4><p>​	如果我们希望等待循环中的异步操作都一一完成之后才继续执行，我们应该使用for循环</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])&#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">someAsyncOperation</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;done&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f</span>()</span><br></pre></td></tr></table></figure>

<p>​	更进一步，如果我们需要所有请求<strong>并发</strong>执行，我们可以使用for await</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 并发</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> promises = [</span><br><span class="line">        <span class="title function_">someAsyncOperation</span>(),</span><br><span class="line">        <span class="title function_">someAsyncOperation</span>(),</span><br><span class="line">        <span class="title function_">someAsyncOperation</span>(),</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">for</span> <span class="title function_">await</span> (<span class="keyword">let</span> result <span class="keyword">of</span> promises)&#123;</span><br><span class="line">        <span class="comment">//..</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;done&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f</span>()</span><br></pre></td></tr></table></figure>

<h4 id="三、更简洁的写法"><a href="#三、更简洁的写法" class="headerlink" title="三、更简洁的写法"></a>三、更简洁的写法</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//async function f()&#123;</span></span><br><span class="line"><span class="comment">//    await someAsyncOperation()</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//f()</span></span><br><span class="line"></span><br><span class="line">(<span class="title function_">async</span>()=&gt;&#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">someAsyncOperation</span>()</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Js</category>
      </categories>
      <tags>
        <tag>Js</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>php入门笔记</title>
    <url>/2020/06/05/php%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="服务器认识"><a href="#服务器认识" class="headerlink" title="服务器认识"></a>服务器认识</h2><p>软件架构</p>
<ul>
<li>C&#x2F;S (客户端-&gt;服务端)</li>
<li>B&#x2F;S (浏览器-&gt;服务端)<ul>
<li>客户端：资源受益方</li>
<li>服务端：资源提供方</li>
</ul>
</li>
</ul>
<p>开发网站的技术：php、jsp、asp、ruby、python、nodejs、c&#x2F;c++等</p>
<p>集成开发环境:</p>
<ul>
<li>WAMP架构：windows+apache+mysql+php</li>
<li>LAMP架构：Linux+apache+mysql+php</li>
<li>LNMP架构：Linux+nginx+mysql+php<ul>
<li>apache：对外开放你的某一个磁盘</li>
</ul>
</li>
</ul>
<p>PHPnow：apache+mysql+php</p>
<h2 id="PHP简介"><a href="#PHP简介" class="headerlink" title="PHP简介"></a>PHP简介</h2><ul>
<li>特点：<ol>
<li>PHP（Hypertext Preprocessor）超文本预处理器：是一种通用开源脚本语言</li>
<li>PHP脚本在服务器上运行，文件后缀名为.php</li>
<li>PHP可以在不同平台上运行（windows、Linux、Unix、Mac等）</li>
<li>PHP与目前几乎所有的正在被使用的服务器兼容(Apache、IIS等)</li>
<li>PHP提供了广泛的数据库支持</li>
<li>PHP免费，官网（<a href="http://www.php.net)/">www.php.net）</a></li>
<li>PHP易于学习且运行高效</li>
<li>严格语法</li>
</ol>
</li>
</ul>
<h2 id="一些PHP的简单的语法"><a href="#一些PHP的简单的语法" class="headerlink" title="一些PHP的简单的语法"></a>一些PHP的简单的语法</h2><h3 id="1-php输出"><a href="#1-php输出" class="headerlink" title="1.php输出"></a>1.php输出</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;content-type:text/html;charset=&quot;utf-8&#x27;</span>);<span class="comment">//头文件声明编码格式</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        php输出函数</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//往页面写入内容 标签会被解析 不会覆盖之前的内容</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;h1&gt;hello world&lt;/h1&gt;&quot;</span>;</span><br><span class="line">    <span class="title function_ invoke__">print_r</span>(<span class="string">&quot;&lt;h1&gt;hello world&lt;/h1&gt;&quot;</span>);</span><br><span class="line">	<span class="keyword">print</span> <span class="string">&quot;数字是：<span class="subst">$x</span>&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//类似于console.log() 一般用于测试程序</span></span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="number">100</span>);<span class="comment">// int(100) </span></span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="string">&quot;hello&quot;</span>);<span class="comment">// string(5) &quot;hello&quot;</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-变量和数据类型"><a href="#2-变量和数据类型" class="headerlink" title="2.变量和数据类型"></a>2.变量和数据类型</h3><ul>
<li><p>变量定义规则</p>
<ul>
<li>变量以$符开始，后面跟变量名称</li>
<li>变量名必须以字母或学习开始</li>
<li>变量名只能包含字母数字下划线</li>
<li>变量名不能有空格</li>
<li>变量名区分大小写</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;content-type:text/html;charset=&quot;utf-8&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        声明变量</span></span><br><span class="line"><span class="comment">         - 弱引用 赋值什么类型就是什么类型数据</span></span><br><span class="line"><span class="comment">        数据类型：</span></span><br><span class="line"><span class="comment">         字符串String 整形Integer 浮点型Float 布尔Boolean</span></span><br><span class="line"><span class="comment">         数组Array 对象Object 空的NULL</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="variable">$username</span>=<span class="string">&quot;钢铁侠&quot;</span>;</span><br><span class="line">    <span class="variable">$age</span>=<span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        字符串拼接用 .</span></span><br><span class="line"><span class="comment">        或者用占位符 &#123;变量/表达式&#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;我是&quot;</span>.<span class="variable">$username</span>.<span class="string">&quot;今年&quot;</span>.<span class="variable">$age</span>.<span class="string">&quot;岁&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;我是<span class="subst">&#123;$username&#125;</span>今年<span class="subst">&#123;$age&#125;</span>岁&quot;</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-条件语句"><a href="#3-条件语句" class="headerlink" title="3.条件语句"></a>3.条件语句</h3><h4 id="3-1-分支语句"><a href="#3-1-分支语句" class="headerlink" title="3.1.分支语句"></a>3.1.分支语句</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;content-type:text/html;charset=&quot;utf-8&#x27;</span>);   </span><br><span class="line">    <span class="variable">$isYes</span>=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$isYes</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;是&quot;</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;否&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-switch语句"><a href="#3-2-switch语句" class="headerlink" title="3.2.switch语句"></a>3.2.switch语句</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$num</span> =<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">switch</span>(<span class="variable">$num</span>)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;数字1&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;数字2&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;输入错误&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-3-循环"><a href="#3-3-循环" class="headerlink" title="3.3.循环"></a>3.3.循环</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="variable">$x</span>=<span class="number">0</span>;<span class="variable">$x</span>&lt;=<span class="number">10</span>;<span class="variable">$x</span>++)&#123;</span><br><span class="line">        <span class="keyword">print</span> <span class="string">&quot;数字是：<span class="subst">$x</span>&lt;br&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-函数"><a href="#4-函数" class="headerlink" title="4.函数"></a>4.函数</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">printHello</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">print</span> <span class="string">&quot;hello world&lt;br/&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_ invoke__">printHello</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-数组"><a href="#5-数组" class="headerlink" title="5.数组"></a>5.数组</h3><ul>
<li><p>PHP有三种类型的数组</p>
<ul>
<li><p>数值&#x2F;索引数组：下标是数字</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;content-type:text/html;charset=&quot;utf-8&#x27;</span>);   </span><br><span class="line">    <span class="variable">$cars</span>=<span class="keyword">array</span>(<span class="string">&quot;大众&quot;</span>,<span class="string">&quot;别克&quot;</span>,<span class="string">&quot;奔驰&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="variable">$cars</span>);</span><br><span class="line">    <span class="comment">//array(3) &#123; [0]=&gt; string(6) &quot;大众&quot; [1]=&gt; string(6) &quot;别克&quot; [2]=&gt; string(6) &quot;奔驰&quot; &#125; 别克</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$cars</span>[<span class="number">1</span>];<span class="comment">//别克</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="title function_ invoke__">count</span>(<span class="variable">$cars</span>);<span class="variable">$i</span>++)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;下标：<span class="subst">&#123;$i&#125;</span>,数据：<span class="subst">&#123;$cars[$i]&#125;</span>&lt;br/&gt;&quot;</span>;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        下标：0,数据：大众</span></span><br><span class="line"><span class="comment">        下标：1,数据：别克</span></span><br><span class="line"><span class="comment">        下标：2,数据：奔驰</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>关联数组：带指定键的数组，每个键关联一个值（类似map）</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;content-type:text/html;charset=&quot;utf-8&#x27;</span>);   </span><br><span class="line">    <span class="variable">$arr</span>=<span class="keyword">array</span>(<span class="string">&quot;王五&quot;</span>=&gt;<span class="string">&quot;打渔&quot;</span>,<span class="string">&quot;张三&quot;</span>=&gt;<span class="string">&quot;种地&quot;</span>,<span class="string">&quot;李四&quot;</span>=&gt;<span class="string">&quot;打猎&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="variable">$arr</span>);</span><br><span class="line">    <span class="comment">//array(2) &#123; [&quot;王五&quot;]=&gt; string(6) &quot;打渔&quot; [&quot;李四&quot;]=&gt; string(6) &quot;打猎&quot; &#125;</span></span><br><span class="line">    <span class="keyword">foreach</span>(<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;下标：<span class="subst">&#123;$key&#125;</span>,数据：<span class="subst">&#123;$value&#125;</span>&lt;br/&gt;&quot;</span>;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        下标：王五,数据：打渔</span></span><br><span class="line"><span class="comment">        下标：张三,数据：种地</span></span><br><span class="line"><span class="comment">        下标：李四,数据：打猎</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>多维数组：索引数组和关联数组结合</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;content-type:text/html;charset=&quot;utf-8&#x27;</span>);   </span><br><span class="line">    <span class="variable">$arr</span> = <span class="keyword">array</span>(</span><br><span class="line">        <span class="keyword">array</span>(<span class="string">&quot;name&quot;</span>=&gt;<span class="string">&quot;小白&quot;</span>,<span class="string">&quot;英语&quot;</span>=&gt;<span class="number">100</span>,<span class="string">&quot;数学&quot;</span>=&gt;<span class="number">50</span>),</span><br><span class="line">        <span class="keyword">array</span>(<span class="string">&quot;name&quot;</span>=&gt;<span class="string">&quot;小花&quot;</span>,<span class="string">&quot;英语&quot;</span>=&gt;<span class="number">60</span>,<span class="string">&quot;数学&quot;</span>=&gt;<span class="number">100</span>),</span><br><span class="line">        <span class="keyword">array</span>(<span class="string">&quot;name&quot;</span>=&gt;<span class="string">&quot;小红&quot;</span>,<span class="string">&quot;英语&quot;</span>=&gt;<span class="number">100</span>,<span class="string">&quot;数学&quot;</span>=&gt;<span class="number">100</span>)</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="title function_ invoke__">count</span>(<span class="variable">$arr</span>);<span class="variable">$i</span>++)&#123;</span><br><span class="line">        <span class="title function_ invoke__">var_dump</span>(<span class="variable">$arr</span>[<span class="variable">$i</span>].<span class="string">&quot;&lt;br/&gt;&quot;</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">             string(10) &quot;Array</span></span><br><span class="line"><span class="comment">             &quot; string(10) &quot;Array</span></span><br><span class="line"><span class="comment">             &quot; string(10) &quot;Array</span></span><br><span class="line"><span class="comment">             &quot;</span></span><br><span class="line"><span class="comment">        */</span> </span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$arr</span>[<span class="number">2</span>][<span class="string">&quot;数学&quot;</span>];<span class="comment">//100</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>全局数组  </p>
<ul>
<li>$_GET：接收通过get提交过来的所有数据</li>
<li>$_POST：接收通过post提交过来的所有数据</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="6-数组函数"><a href="#6-数组函数" class="headerlink" title="6.数组函数"></a>6.数组函数</h3><ul>
<li>array_keys()：返回数组中所有键名</li>
<li>array_pop()：删除数组中最后一个元素（出栈）</li>
<li>array_push()：将一个或多个元素插入数组的末尾（入栈）</li>
<li>array_rand()：从数组中随机选出一个或多个元素，返回键名</li>
<li>array_shift()：删除数组中第一个元素并返回删除元素的值</li>
<li>count()：返回数组中元素的数目</li>
<li>in_array()：检查数组中是否存在指定的值</li>
</ul>
<h3 id="7-字符串函数"><a href="#7-字符串函数" class="headerlink" title="7.字符串函数"></a>7.字符串函数</h3><ul>
<li>explode()：字符串打散为数组</li>
<li>implode()：返回一个由数组元素组合成的字符串</li>
<li>join() implode()：合并成数组</li>
<li>trim()：去掉字符串两边的字符</li>
<li>md5()：计算字符串的MD5散列</li>
<li>str_replace()：替换字符串中的一些字符(大小写敏感)</li>
</ul>
<h3 id="8-事件函数"><a href="#8-事件函数" class="headerlink" title="8.事件函数"></a>8.事件函数</h3><ul>
<li>date()：获取当前的日期</li>
<li>dote(‘Y-m-d H:i:s’)：获取当前日期，格式化</li>
<li>time()：获取时间戳</li>
<li>strtotime(‘2017-01-01 0:0:0’)：字符串转换成时间戳</li>
<li>getdate()：返回某个时间戳或者当前本地的日期&#x2F;时间的日期&#x2F;时间信息</li>
</ul>
]]></content>
      <categories>
        <category>后端</category>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>git常用命令</title>
    <url>/2020/06/25/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>1、cd 路径 进入当前目录</p>
<p>2、git init 本地进行初始化（建立暂存区）</p>
<ul>
<li>.git 文件存储当前项目所有版本信息</li>
</ul>
<p>3、工作区&#x3D;&gt;暂存区</p>
<ul>
<li>git add 文件名</li>
<li>git  add * 提交所有文件</li>
<li>git commit -m “这一次提交的描述”</li>
</ul>
<p>4、git status 查看当前工作区状态</p>
<p>5、从暂存区恢复文件到工作区</p>
<ul>
<li>git checkout 文件名</li>
</ul>
<p>6、查看工作区和暂存区版本的区别</p>
<ul>
<li>git diff</li>
</ul>
<p>7、clear 命令窗口清屏</p>
<p>8、git log 查看已经提交到暂存区的历史版本</p>
<p>9、恢复文件到指定版本</p>
<ul>
<li>git reset –hard 版本号</li>
</ul>
<p>10、生成ssh密匙</p>
<ul>
<li>ssh-keygen -t rsa -C “你的github邮箱”</li>
</ul>
<p>11、暂存区&#x3D;&gt;远程仓库</p>
<ul>
<li>git remote add origin 仓库链接</li>
<li>git push -u origin master</li>
</ul>
<p>14、git clone 从远程仓库克隆项目到本地</p>
<p>15、git pull 从远程仓库同步本地代码</p>
<ol start="16">
<li>修改远程仓库地址: <code>git remote set-url origin &lt;remote-url&gt; </code></li>
<li>添加远程仓库地址: <code>git remote add origin &lt;你的项目地址&gt; </code></li>
</ol>
<h3 id="设置账户名和密码"><a href="#设置账户名和密码" class="headerlink" title="设置账户名和密码"></a>设置账户名和密码</h3><ol>
<li>添加账户名和密码：<ul>
<li><code>git config --global user.email [email]   //邮箱</code></li>
<li><code>git config --global user.name [username] //密码</code></li>
</ul>
</li>
<li>查看配置信息是否添加成功：<code>git config --list </code>  输入<code>:q</code>退出</li>
</ol>
<p>​    我尝试上面的方法过后发现不行，但可以使用下面的命令，效果类似于记住密码，输入一次后续上传就不需要再输入了：</p>
<p><code>git config --global credential.helper store </code></p>
<h3 id="强行推送至远程仓库"><a href="#强行推送至远程仓库" class="headerlink" title="强行推送至远程仓库"></a>强行推送至远程仓库</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">//<span class="number">1</span>. 初始化 </span><br><span class="line">git init</span><br><span class="line">//<span class="number">2</span>. 添加仓库</span><br><span class="line">git remote add origin &lt;你的项目地址&gt; </span><br><span class="line">//<span class="number">3</span>. 添加所有更改</span><br><span class="line">git add .</span><br><span class="line">//<span class="number">4</span>. 提交所有更爱</span><br><span class="line">git commit <span class="literal">-m</span> <span class="string">&quot;备注&quot;</span></span><br><span class="line">//<span class="number">5</span>. 查看仓库名字</span><br><span class="line">git remote</span><br><span class="line">//<span class="number">6</span>. 强制推送</span><br><span class="line">git push <span class="literal">--force</span> &lt;仓库名字&gt; master </span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>前端工具</category>
        <category>Git</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>前端工具</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3+vite实现主题换肤/黑暗模式</title>
    <url>/2023/04/19/vue_vite%E4%B8%BB%E9%A2%98%E6%8D%A2%E8%82%A4/</url>
    <content><![CDATA[<p>​	利用less和css变量实现动态修改Css变量</p>
<p>vue3包版本：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">├── @vitejs/plugin<span class="literal">-vue</span>@<span class="number">4.1</span>.<span class="number">0</span></span><br><span class="line">├── less<span class="literal">-loader</span>@<span class="number">7.3</span>.<span class="number">0</span></span><br><span class="line">├── less@<span class="number">4.1</span>.<span class="number">3</span></span><br><span class="line">├── style<span class="literal">-resources-loader</span>@<span class="number">1.5</span>.<span class="number">0</span></span><br><span class="line">├── vite@<span class="number">4.2</span>.<span class="number">1</span></span><br><span class="line">├── vue<span class="literal">-cli-plugin-style-resources-loader</span>@<span class="number">0.1</span>.<span class="number">5</span> </span><br><span class="line">└── vue@<span class="number">3.2</span>.<span class="number">47</span></span><br></pre></td></tr></table></figure>

<p>vue2包版本：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">├── @babel/core@<span class="number">7.21</span>.<span class="number">8</span></span><br><span class="line">├── @babel/eslint<span class="literal">-parser</span>@<span class="number">7.21</span>.<span class="number">8</span></span><br><span class="line">├── @vue/<span class="built_in">cli</span><span class="literal">-plugin-babel</span>@<span class="number">5.0</span>.<span class="number">8</span></span><br><span class="line">├── @vue/<span class="built_in">cli</span><span class="literal">-plugin-eslint</span>@<span class="number">5.0</span>.<span class="number">8</span></span><br><span class="line">├── @vue/<span class="built_in">cli</span><span class="literal">-plugin-router</span>@<span class="number">5.0</span>.<span class="number">8</span></span><br><span class="line">├── @vue/<span class="built_in">cli</span><span class="literal">-service</span>@<span class="number">5.0</span>.<span class="number">8</span></span><br><span class="line">├── core<span class="literal">-js</span>@<span class="number">3.30</span>.<span class="number">2</span></span><br><span class="line">├── eslint<span class="literal">-config-prettier</span>@<span class="number">8.8</span>.<span class="number">0</span></span><br><span class="line">├── eslint<span class="literal">-plugin-prettier</span>@<span class="number">4.2</span>.<span class="number">1</span></span><br><span class="line">├── eslint<span class="literal">-plugin-vue</span>@<span class="number">8.7</span>.<span class="number">1</span></span><br><span class="line">├── eslint@<span class="number">7.32</span>.<span class="number">0</span></span><br><span class="line">├── less<span class="literal">-loader</span>@<span class="number">11.1</span>.<span class="number">0</span></span><br><span class="line">├── less@<span class="number">4.1</span>.<span class="number">3</span></span><br><span class="line">├── prettier@<span class="number">2.8</span>.<span class="number">8</span></span><br><span class="line">├── style<span class="literal">-resources-loader</span>@<span class="number">1.5</span>.<span class="number">0</span></span><br><span class="line">├── vue<span class="literal">-cli-plugin-style-resources-loader</span>@<span class="number">0.1</span>.<span class="number">5</span></span><br><span class="line">├── vue<span class="literal">-router</span>@<span class="number">3.6</span>.<span class="number">5</span></span><br><span class="line">├── vue<span class="literal">-template-compiler</span>@<span class="number">2.7</span>.<span class="number">14</span></span><br><span class="line">└── vue@<span class="number">2.7</span>.<span class="number">14</span></span><br></pre></td></tr></table></figure>

<p>vue3配置<strong>vite.config.js：</strong> </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; resolve &#125; <span class="keyword">from</span> <span class="string">&quot;path&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">      <span class="attr">less</span>: &#123;</span><br><span class="line">        <span class="attr">modifyVars</span>: &#123;</span><br><span class="line">          <span class="attr">hack</span>: <span class="string">`true; @import (reference) &quot;<span class="subst">$&#123;resolve(<span class="string">&#x27;src/theme/style.less&#x27;</span>)&#125;</span>&quot;;`</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">javascriptEnabled</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>vue2配置<strong>vue.config.js</strong> </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">lintOnSave</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">pluginOptions</span>: &#123;</span><br><span class="line">    <span class="string">&quot;style-resources-loader&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">preProcessor</span>: <span class="string">&quot;less&quot;</span>,</span><br><span class="line">      <span class="attr">patterns</span>: [</span><br><span class="line">        <span class="comment">// 这个是加上自己的路径,不能使用(如下:alias)中配置的别名路径</span></span><br><span class="line">        path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;./src/theme/style.less&quot;</span>),</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>&#x2F;src&#x2F;theme&#x2F;style.less</strong> </p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 默认的主题颜色</span></span><br><span class="line"><span class="variable">@primaryColor:</span> <span class="built_in">var</span>(--primaryColor, <span class="number">#000</span>);</span><br><span class="line"><span class="variable">@primaryTextColor:</span> <span class="built_in">var</span>(--primaryTextColor, green);</span><br><span class="line"><span class="comment">// 导出变量</span></span><br><span class="line">:<span class="selector-tag">export</span> &#123;</span><br><span class="line">  name: &quot;less&quot;;</span><br><span class="line">  primaryColor: @primaryColor;</span><br><span class="line">  primaryTextColor: @primaryTextColor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>&#x2F;src&#x2F;theme&#x2F;model.js</strong> </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> themes = &#123;</span><br><span class="line">  <span class="attr">default</span>: &#123;</span><br><span class="line">    <span class="attr">primaryColor</span>: <span class="string">`<span class="subst">$&#123;<span class="number">74</span>&#125;</span>, <span class="subst">$&#123;<span class="number">144</span>&#125;</span>,<span class="subst">$&#123;<span class="number">226</span>&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">primaryTextColor</span>: <span class="string">`<span class="subst">$&#123;<span class="number">74</span>&#125;</span>, <span class="subst">$&#123;<span class="number">144</span>&#125;</span>,<span class="subst">$&#123;<span class="number">226</span>&#125;</span>`</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">dark</span>: &#123;</span><br><span class="line">    <span class="attr">primaryColor</span>: <span class="string">`<span class="subst">$&#123;<span class="number">0</span>&#125;</span>,<span class="subst">$&#123;<span class="number">0</span>&#125;</span>,<span class="subst">$&#123;<span class="number">0</span>&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">primaryTextColor</span>: <span class="string">`<span class="subst">$&#123;<span class="number">0</span>&#125;</span>,<span class="subst">$&#123;<span class="number">0</span>&#125;</span>,<span class="subst">$&#123;<span class="number">0</span>&#125;</span>`</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>&#x2F;src&#x2F;theme&#x2F;theme.js</strong> </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; themes &#125; <span class="keyword">from</span> <span class="string">&quot;./model&quot;</span>;</span><br><span class="line"><span class="comment">// 修改页面中的样式变量值</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">changeStyle</span> = (<span class="params">obj</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="variable language_">document</span></span><br><span class="line">      .<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;body&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">      .<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">`--<span class="subst">$&#123;key&#125;</span>`</span>, obj[key]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 改变主题的方法</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">setTheme</span> = (<span class="params">themeName</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;theme&quot;</span>, themeName); <span class="comment">// 保存主题到本地，下次进入使用该主题</span></span><br><span class="line">  <span class="keyword">const</span> themeConfig = themes[themeName];</span><br><span class="line">  <span class="comment">// 如果有主题名称，那么则采用我们定义的主题</span></span><br><span class="line">  <span class="keyword">if</span> (themeConfig) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;primaryColor&quot;</span>, themeConfig.<span class="property">primaryColor</span>); <span class="comment">// 保存主题色到本地</span></span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;primaryTextColor&quot;</span>, themeConfig.<span class="property">primaryTextColor</span>); <span class="comment">// 保存文字颜色到本地</span></span><br><span class="line">    <span class="title function_">changeStyle</span>(themeConfig); <span class="comment">// 改变样式</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> themeConfig = &#123;</span><br><span class="line">      <span class="attr">primaryColor</span>: <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;primaryColor&quot;</span>),</span><br><span class="line">      <span class="attr">primaryTextColor</span>: <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;primaryTextColor&quot;</span>),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">changeStyle</span>(themeConfig);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>组件中css使用：</strong> </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background</span>: <span class="built_in">rgba</span>(@primaryColor, <span class="number">1</span>);</span><br><span class="line"><span class="attribute">color</span>: @primaryTextColor;	</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>JS切换主题：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; setTheme &#125; <span class="keyword">from</span> <span class="string">&quot;../theme/theme&quot;</span>;</span><br><span class="line"><span class="comment">//调用切换方法</span></span><br><span class="line"><span class="title function_">setTheme</span>(<span class="string">&quot;default&quot;</span>);</span><br><span class="line"><span class="comment">// 更改为自定义主题</span></span><br><span class="line"><span class="title function_">custom</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> newColor = &#123;</span><br><span class="line">        <span class="attr">r</span>: <span class="number">12</span>,</span><br><span class="line">        <span class="attr">g</span>: <span class="number">33</span>,</span><br><span class="line">        <span class="attr">b</span>: <span class="number">234</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> newPrimaryColor = <span class="string">`<span class="subst">$&#123;newColor.r&#125;</span>,<span class="subst">$&#123;newColor.g&#125;</span>,<span class="subst">$&#123;newColor.b&#125;</span>`</span>;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;primaryColor&quot;</span>, newPrimaryColor); <span class="comment">// 将新的主题色存入本地</span></span><br><span class="line">    <span class="title function_">setTheme</span>();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<blockquote>
<p>参考:</p>
<p> <a href="https://zhuanlan.zhihu.com/p/440387917">https://zhuanlan.zhihu.com/p/440387917</a> </p>
<p><a href="https://blog.csdn.net/LiuJia20010827/article/details/127235713">https://blog.csdn.net/LiuJia20010827/article/details/127235713</a> </p>
<p><a href="https://blog.csdn.net/V_AYA_V/article/details/117783527">https://blog.csdn.net/V_AYA_V/article/details/117783527</a> </p>
</blockquote>
]]></content>
      <categories>
        <category>前端</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>vite</tag>
        <tag>less</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript入门</title>
    <url>/2020/05/07/JavaScript%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="一-JavaScript简介"><a href="#一-JavaScript简介" class="headerlink" title="一.JavaScript简介"></a>一.JavaScript简介</h1><h3 id="1-1-什么是JavaScript"><a href="#1-1-什么是JavaScript" class="headerlink" title="1.1. 什么是JavaScript"></a>1.1. 什么是JavaScript</h3><ul>
<li>官方概念：跨平台的脚本语言<ul>
<li>平台：运行环境，这里一般指操作系统</li>
<li>跨平台：在各种操作系统下，都可以运行</li>
</ul>
</li>
</ul>
<h3 id="1-2-什么是脚本语言"><a href="#1-2-什么是脚本语言" class="headerlink" title="1.2. 什么是脚本语言"></a>1.2. 什么是脚本语言</h3><ul>
<li>特点：不能独立运行，依赖于网页</li>
</ul>
<h3 id="2-1-JS的发展历史"><a href="#2-1-JS的发展历史" class="headerlink" title="2.1. JS的发展历史"></a>2.1. JS的发展历史</h3><p>​    1995年，NetScape公司，布兰登艾奇发明了一种运行在浏览器网页里的脚本语言Livescript。</p>
<p>通过本地而不是服务器进行验证，为了快速的验证表单信息，这在当时来说是一个前所未有的壮举。</p>
<h3 id="2-2-浏览器大战"><a href="#2-2-浏览器大战" class="headerlink" title="2.2 浏览器大战"></a>2.2 浏览器大战</h3><p>​    LiveScript打开了浏览器市场，各大互联网巨头，都嗅到了蛋糕的味道，都想着分一杯羹，首当其中就是微软IE浏览器。</p>
<p>​    IE当年为了跟NetScape争夺市场份额。不甘落后很快退出适用于IE浏览器的JScript脚本语言。</p>
<p>​    由于缺乏统一标准，各个浏览器厂商发明的脚本语言，在用法和规范上不一致，成为了网页开发人员的噩梦。</p>
<p>​    1997年，ECMA（欧洲计算机制造商协会）成立了TC39委员会，委员会的成员基本都来自各大浏览器厂商。</p>
<p>​    这里面最重要的成员，就是当时如日中天的SUN公司，大家坐下来讨论之后，经过了大概1个月的世界，就快速制定出了浏览器脚本语言第一个全球标准。官方名称为ECMA Script编号ECMA-262。</p>
<p>​    由于总所周知的原因，大家没有忍住，蹭了一把JAVA热度，最终将其命名为JavaScript</p>
<p>​	至此，JavaScript诞生</p>
<p>​	如果非要说Java和Javascript有什么关系的话，就是Javascript在语法及很多API设计，内存结构设计上，直接借鉴和抄袭了Java</p>
<p>​	从这件事情可以看出，Java能这么经久不衰，是因为它非常优秀的设计（Java世界第一~~~</p>
<h2 id="二-JavaScript-基础内容"><a href="#二-JavaScript-基础内容" class="headerlink" title="二.JavaScript-基础内容"></a>二.JavaScript-基础内容</h2><h3 id="1-编辑工具和运行环境"><a href="#1-编辑工具和运行环境" class="headerlink" title="1. 编辑工具和运行环境"></a>1. 编辑工具和运行环境</h3><ul>
<li>VSCode</li>
<li>IE&#x2F;firefox(火狐)&#x2F;chrome(谷歌)&#x2F;edge</li>
</ul>
<h3 id="2-JavaScript组成"><a href="#2-JavaScript组成" class="headerlink" title="2. JavaScript组成"></a>2. JavaScript组成</h3><ol>
<li>ECMAScript<ul>
<li>版本：1,2,3,4,5,5.1,6</li>
</ul>
</li>
<li>DOM<ul>
<li>文档对象模型（Document Object Model）</li>
</ul>
</li>
<li>BOM<ul>
<li>浏览器对象模型（Browser Object Model）</li>
</ul>
</li>
</ol>
<h3 id="3-script标签"><a href="#3-script标签" class="headerlink" title="3. script标签"></a>3. script标签</h3><ul>
<li>所有js代码在script标签中编写</li>
<li>属性<ul>
<li>type&#x3D;’text&#x2F;javascript’ 声明标签内容文本格式（可省略</li>
<li>src&#x3D;’demo.js’ 引入外部js文件（处于引入文件功能时，Script标签内的代码将不执行）</li>
</ul>
</li>
<li>注意：<ul>
<li>可以有多个script标签，多个script标签自上而下顺序执行</li>
</ul>
</li>
</ul>
<h3 id="3-1-script标签属性"><a href="#3-1-script标签属性" class="headerlink" title="3.1 script标签属性"></a>3.1 script标签属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://www.w3school.com.cn/html5/att_script_async.asp">async</a></td>
<td>async</td>
<td>规定异步执行脚本（仅适用于外部脚本）。</td>
</tr>
<tr>
<td><a href="https://www.w3school.com.cn/html5/att_script_defer.asp">defer</a></td>
<td>defer</td>
<td>规定当页面已完成解析后，执行脚本（仅适用于外部脚本）。</td>
</tr>
<tr>
<td><a href="https://www.w3school.com.cn/html5/att_script_type.asp">type</a></td>
<td><em>MIME_type</em></td>
<td>规定脚本的 MIME 类型。</td>
</tr>
<tr>
<td><a href="https://www.w3school.com.cn/html5/att_script_charset.asp">charset</a></td>
<td><em>character_set</em></td>
<td>规定在脚本中使用的字符编码（仅适用于外部脚本）。</td>
</tr>
<tr>
<td><a href="https://www.w3school.com.cn/html5/att_script_src.asp">src</a></td>
<td><em>URL</em></td>
<td>规定外部脚本的 URL。</td>
</tr>
</tbody></table>
<h3 id="4-向页面输出内容"><a href="#4-向页面输出内容" class="headerlink" title="4. 向页面输出内容"></a>4. 向页面输出内容</h3><ol>
<li>document.write(‘内容’);	向body中添加文本</li>
<li>alert(‘内容’);    弹出提示框</li>
<li>console.log(‘内容’)    向控制台输出</li>
</ol>
<h3 id="5-JavaScript-常量和变量"><a href="#5-JavaScript-常量和变量" class="headerlink" title="5. JavaScript-常量和变量"></a>5. JavaScript-常量和变量</h3><h4 id="5-1-常量：值不可以改变的叫做常量"><a href="#5-1-常量：值不可以改变的叫做常量" class="headerlink" title="5.1. 常量：值不可以改变的叫做常量"></a>5.1. 常量：值不可以改变的叫做常量</h4><ul>
<li>数据类型：<ul>
<li>基本数据类型：<ul>
<li>数字<ul>
<li>类型：number</li>
<li>例子：100 -20 3.14</li>
</ul>
</li>
<li>布尔值<ul>
<li>类型：boolean</li>
<li>例子：true false</li>
</ul>
</li>
<li>字符串：<ul>
<li>类型：所有带单引号或双引号的</li>
<li>例子：’hello’ “hello” ‘100’ “3.14”</li>
</ul>
</li>
</ul>
</li>
<li>特殊数据类型<ul>
<li>null 空</li>
<li>undefined 未定义</li>
<li>NaN（not a number 值不是数字）</li>
</ul>
</li>
<li>复合&#x2F;引用数据类型<ul>
<li>数组</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="5-2-变量：值可以被修改的叫做变量"><a href="#5-2-变量：值可以被修改的叫做变量" class="headerlink" title="5.2. 变量：值可以被修改的叫做变量"></a>5.2. 变量：值可以被修改的叫做变量</h4><ol>
<li>声明变量（必须声明以后才能使用）<ul>
<li>关键字（系统征用的有特殊功能的单词叫关键字）：var 声明变量。</li>
</ul>
</li>
<li>初始化：声明变量时，直接给这个变量赋值叫做初始化。</li>
<li>如果我们声明变量时，没有值赋给这个变量，默认值为undefined。</li>
</ol>
<p>注意：为了提高整个程序运行的效率，我们可以将声明变量时，没有值赋值给这个变量的时候，默认值设成null，提高程序运行效率</p>
<h3 id="6-变量命名-和-弱引用"><a href="#6-变量命名-和-弱引用" class="headerlink" title="6. 变量命名 和 弱引用"></a>6. 变量命名 和 弱引用</h3><h4 id="6-1-变量命名"><a href="#6-1-变量命名" class="headerlink" title="6.1. 变量命名"></a>6.1. 变量命名</h4><ul>
<li>标识符：所有用户自定义的名字叫做标识符。<ul>
<li>变量名也是标识符。</li>
</ul>
</li>
<li>硬命名规则：<ol>
<li>只能由数字、字母、下划线和美元符号($)组成</li>
<li>不能以数字开头</li>
<li>不能为保留字和关键字</li>
<li>大小写敏感</li>
</ol>
</li>
<li>软命名规则：<ol>
<li>见名思意（使用英文全称）</li>
<li>单词个数超过2个<ul>
<li>驼峰式命名：className</li>
<li>下划线命名：class_name</li>
</ul>
</li>
</ol>
</li>
</ul>
<h4 id="6-2-变量弱引用"><a href="#6-2-变量弱引用" class="headerlink" title="6.2. 变量弱引用"></a>6.2. 变量弱引用</h4><ul>
<li>在JS中变量为弱引用类型：赋值成什么数据类型就是什么类型</li>
<li>注意：不建议改变当前变量的数据类型，容易引起歧义</li>
<li>typeof关键字：<ul>
<li>格式： typeof 常量&#x2F;变量</li>
<li>功能：输出当前常量或变量的数据类型。</li>
</ul>
</li>
</ul>
<h3 id="7-运算符"><a href="#7-运算符" class="headerlink" title="7. 运算符"></a>7. 运算符</h3><ol>
<li>算术运算<ul>
<li><code>+ - * / %(取余)</code></li>
</ul>
</li>
<li>关系运算符<ul>
<li><code>&gt; &lt; &gt;= &lt;= == != === !==</code></li>
</ul>
</li>
<li>逻辑运算符<ul>
<li><code>&amp;&amp; || !</code></li>
</ul>
</li>
<li>一元运算符<ul>
<li><code>++ --</code></li>
</ul>
</li>
<li>赋值运算符<ul>
<li>基本赋值运算符 &#x3D;</li>
<li>复合赋值运算符 +&#x3D; -&#x3D; &#x2F;&#x3D; …</li>
</ul>
</li>
</ol>
<h4 id="7-1-关系运算符"><a href="#7-1-关系运算符" class="headerlink" title="7.1. 关系运算符"></a>7.1. 关系运算符</h4><ol>
<li>两个单个字符比较：直接比较ASCII值。</li>
<li>两个多个字符比较：逐位比较ASCII值，一旦得出大于或小于的结果停止后面的比较得出结果。</li>
<li>其中一个是数值：另一个转换为数值，再进行比较。</li>
<li>其中一个是NaN：&#x3D;&#x3D;返回false，！&#x3D;返回true；并且NaN和自身不等。</li>
<li>&#x3D;&#x3D;&#x3D;恒等，相比&#x3D;&#x3D;数据类型也加入判断条件</li>
</ol>
<p>特殊值：</p>
<table>
<thead>
<tr>
<th>关系式</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td>null&#x3D;&#x3D;undefined</td>
<td>true</td>
</tr>
<tr>
<td>‘NaN’&#x3D;&#x3D;NaN</td>
<td>false</td>
</tr>
<tr>
<td>5&#x3D;&#x3D;NaN</td>
<td>false</td>
</tr>
<tr>
<td>NaN&#x3D;&#x3D;NaN</td>
<td>false</td>
</tr>
<tr>
<td>false&#x3D;&#x3D;0</td>
<td>true</td>
</tr>
<tr>
<td>true&#x3D;&#x3D;1</td>
<td>true</td>
</tr>
<tr>
<td>true&#x3D;&#x3D;2</td>
<td>false</td>
</tr>
<tr>
<td>undefined&#x3D;&#x3D;0</td>
<td>false</td>
</tr>
<tr>
<td>null&#x3D;&#x3D;0</td>
<td>false</td>
</tr>
<tr>
<td>‘100’&#x3D;&#x3D;100</td>
<td>true</td>
</tr>
<tr>
<td>‘100’&#x3D;&#x3D;&#x3D;100</td>
<td>false</td>
</tr>
</tbody></table>
<h4 id="7-2-逻辑运算符"><a href="#7-2-逻辑运算符" class="headerlink" title="7.2. 逻辑运算符"></a>7.2. 逻辑运算符</h4><p>与运算短路操作：当表达式1为false的时候，表达式2就不执行，直接得出结果为false。</p>
<p>或运算短路操作：</p>
<h4 id="7-3-自动数据类型转换"><a href="#7-3-自动数据类型转换" class="headerlink" title="7.3. 自动数据类型转换"></a>7.3. 自动数据类型转换</h4><ul>
<li>不同数据类型之间无法进行计算，将数据转成同一数据类型，再进行计算。</li>
<li>任何类型的数据和字符串类型的数据相加时，其他数据类型会自动转换为字符串类型。此时相加表示“<strong>拼接</strong>“的意思<ul>
<li>如果字符串是一个纯数字字符组成的字符串，转成对应的数字</li>
<li>如果字符串中含有除数字以外的字符，转成NaN，NaN和任何数据运算结果都为NaN。</li>
<li>除字符串以外的数据，在进行运算时，先转成数字，再进行运算。<ul>
<li>true→1 ， false→0 ， null→0 ， <strong>undefined→NaN</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="7-4-强制数据类型转换："><a href="#7-4-强制数据类型转换：" class="headerlink" title="7.4. 强制数据类型转换："></a>7.4. 强制数据类型转换：</h4><ul>
<li><p>Boolean() 其他数据类型强制转成布尔值</p>
<ul>
<li>数字：非0即真</li>
<li>字符串：非空即真</li>
</ul>
</li>
<li><p>Number() 其他数据类型转数字</p>
<ul>
<li>只有纯数字字符字符串转成数字，其他为NaN</li>
</ul>
</li>
<li><p>parseInt()取整</p>
<ul>
<li><p>1.取整</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;25a&quot;</span>)<span class="comment">//25</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;2a5a&quot;</span>)<span class="comment">//2</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;a25a&quot;</span>)<span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;3.14)//3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>2.将别的进制转成十进制 必须传入字符串</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str1=<span class="string">&quot;110100&quot;</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="built_in">parseInt</span>(str1,<span class="number">2</span>))<span class="comment">//52</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>parseFloat() 取浮点数</p>
<ul>
<li><p>举例</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">parseFloat</span>(<span class="string">&quot;3.14b&quot;</span>)<span class="comment">//3.14</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">&quot;3.1b4b&quot;</span>)<span class="comment">//3.1</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">&quot;a3.1b4b&quot;</span>)<span class="comment">//NaN</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="8-流程语句练习-输出当前年的第多少天"><a href="#8-流程语句练习-输出当前年的第多少天" class="headerlink" title="8. 流程语句练习,输出当前年的第多少天"></a>8. 流程语句练习,输出当前年的第多少天</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> year = <span class="number">2000</span>;</span><br><span class="line"><span class="keyword">var</span> month = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> date = <span class="number">15</span>;</span><br><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">switch</span>(month)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">        sum += <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">        sum += <span class="number">31</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">        sum += <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">        sum += <span class="number">31</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">        sum += <span class="number">31</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">        sum += <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">        sum += <span class="number">31</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        sum += <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        sum += <span class="number">31</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        sum += <span class="number">28</span>;</span><br><span class="line">        <span class="keyword">if</span>(uear % <span class="number">4</span>==<span class="number">0</span> &amp;&amp; year %<span class="number">100</span> !=<span class="number">0</span> ||year % <span class="number">400</span>==<span class="number">0</span>)&#123;</span><br><span class="line">            sum += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        sum += <span class="number">31</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        sum += date;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;error&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;这是第&quot;</span>+sum+<span class="string">&quot;天&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> week = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(sum/<span class="number">7</span>);</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;这是第&quot;</span>+week+<span class="string">&quot;周&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="三-JavaScript-函数"><a href="#三-JavaScript-函数" class="headerlink" title="三. JavaScript-函数"></a>三. JavaScript-函数</h2><h4 id="1-函数的概念及作用"><a href="#1-函数的概念及作用" class="headerlink" title="1. 函数的概念及作用"></a>1. 函数的概念及作用</h4><ul>
<li>概念：函数就是把完成特定功能的一段代码<strong>抽象出来</strong>，使之成为程序中的一个<strong>独立实体</strong>，起个名字（<strong>函数名</strong>）。可以在同一个程序或其他程序中多次重复使用（<strong>通过函数名调用</strong>）。</li>
<li>作用：<ul>
<li>使程序变得简短而清晰</li>
<li>有利于程序维护</li>
<li>可以提高程序开发效率</li>
<li>提高了代码重用性（复用性）</li>
</ul>
</li>
</ul>
<h4 id="2-函数的声明与调用"><a href="#2-函数的声明与调用" class="headerlink" title="2. 函数的声明与调用"></a>2. 函数的声明与调用</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//无参无返回值</span></span><br><span class="line"><span class="keyword">function</span> 函数名()&#123;</span><br><span class="line">    函数体;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line">函数名();</span><br><span class="line"></span><br><span class="line"><span class="comment">//有参无返回值</span></span><br><span class="line"><span class="keyword">function</span> 函数名(形参<span class="number">1</span>,形参<span class="number">2.</span>..)&#123;</span><br><span class="line">	函数体;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line">函数名(实参<span class="number">1</span>,实参<span class="number">2.</span>..)</span><br><span class="line"></span><br><span class="line"><span class="comment">//有参数有返回值</span></span><br><span class="line"><span class="keyword">function</span> 函数名(形参<span class="number">1</span>，形参<span class="number">2.</span>..)&#123;</span><br><span class="line">	函数体;</span><br><span class="line">    <span class="keyword">return</span> 表达式;</span><br><span class="line">    <span class="comment">//函数调用的结果为表达式的值</span></span><br><span class="line">    <span class="comment">//函数遇到return会中止</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：见名思意，函数名必须体现其功能。</p>
<h4 id="3-封装函数"><a href="#3-封装函数" class="headerlink" title="3. 封装函数"></a>3. 封装函数</h4><ol>
<li>分析不确定值</li>
<li>将不确定值声明为形参</li>
<li>函数名与形参名都要见名思意</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//编写一个函数 计算两数加减乘除 使用传参</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">operation</span>(<span class="params">num1,operator,num2</span>)&#123;</span><br><span class="line">    <span class="keyword">switch</span>(operator)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> num1 + num2;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> num1 - num2;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> num1 * num2;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> num1 / num2;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输入n为偶数 1/2+1/4+...+1/n,奇数，1/1+1/3+...+1/n</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(n % <span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">2</span> ; i &lt;= n; i += <span class="number">2</span>)&#123;</span><br><span class="line">            res += <span class="number">1</span>/i;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>;i &lt;= n; i += <span class="number">2</span>)&#123;</span><br><span class="line">            res += <span class="number">1</span>/i;    </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-arguments"><a href="#4-arguments" class="headerlink" title="4. arguments"></a>4. arguments</h4><ul>
<li>每一个函数内都有一个系统内置的arguments</li>
<li>作用：存储实际传入的参数</li>
<li>属性：<ul>
<li>arguments.length 输出当前存储参数个数</li>
<li>arguments[下标] 访问其中的数据</li>
</ul>
</li>
<li>注意：由于违反了见名思意原则，尽量使用形参，除非特殊情况。</li>
</ul>
<h4 id="5-函数作用域"><a href="#5-函数作用域" class="headerlink" title="5. 函数作用域"></a>5. 函数作用域</h4><p>任何程序在执行的时候都要占用内存空间。函数调用的时候也要占用内存空间。</p>
<p>垃圾回收机制：调用函数时，系统会分配对应的空间给这个函数使用（空间大小一般情况由这个函数里声明的变量和形参决定）。当函数使用完毕之后，这个内存空间要释放，还给系统。</p>
<p>注意：在函数内部声明的变量和形参是属于当前函数的内存空间里的。</p>
<p>内存管理机制：在函数中声明的变量和形参，会随着函数的调用被创建，随着函数的调用结束而被销毁。在函数中声明的变量和形参，有效范围是当前函数（当前函数的大括号），这个范围被称为局部作用域。</p>
<p>就近原则：离哪个作用域近，就使用哪个作用域内的同名变量。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//举例</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>,b=<span class="number">20</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params">a</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">100</span>;</span><br><span class="line">    a += <span class="number">5</span>;</span><br><span class="line">    <span class="title function_">alert</span>(a + <span class="string">&quot;,&quot;</span> + b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">show</span>(a);<span class="comment">//15,100</span></span><br><span class="line"><span class="title function_">alert</span>(a + <span class="string">&quot;,&quot;</span>+ b)<span class="comment">//10,20</span></span><br></pre></td></tr></table></figure>



<h4 id="6-递归函数"><a href="#6-递归函数" class="headerlink" title="6. 递归函数"></a>6. 递归函数</h4><p>满足以下三个特点就是递归：</p>
<ol>
<li>函数自己调用自己</li>
<li>一般情况下有参数</li>
<li>一般情况下有return</li>
</ol>
<p>作用：递归可以解决循环能做的所有事情，有一些循环不容易解决的事情，递归也能轻松解决。</p>
<p>递归编写方法：</p>
<ol>
<li>首先找临界值，即无需计算，获得的值。</li>
<li>找这一次和上一次的关系。</li>
<li>假设当前函数已经可以试用，调用自身计算上一次</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//计算1~n的和</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i&lt;=n; i++)&#123;</span><br><span class="line">		res += i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">alert</span>(<span class="title function_">sun</span>(<span class="number">100</span>));<span class="comment">//5050</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//递归写法</span></span><br><span class="line"><span class="comment">//sum(100)=sum(99)+100;</span></span><br><span class="line"><span class="comment">//sum(n)=sun(n-1)+n</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum2</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">sum</span>(n-<span class="number">1</span>)+n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(<span class="title function_">sum</span>(<span class="number">100</span>));<span class="comment">//5050</span></span><br></pre></td></tr></table></figure>

<p>注意：一般公司明文禁止使用递归。（一旦出现故障瞬间开出一堆内存空间）</p>
<h4 id="6-1-递归练习"><a href="#6-1-递归练习" class="headerlink" title="6.1. 递归练习"></a>6.1. 递归练习</h4><p><strong>练习1：</strong></p>
<p>斐波那契数列，兔子繁衍问题，设有一对新生兔子，从第四个月开始他们每个月月初都生一对兔子，新生的兔子从第四个月月初开始又每个月生一对兔子，按此规律，并假定兔子没有死亡，n(n&lt;&#x3D;20)个月月末共有多少对兔子?</p>
<table>
<thead>
<tr>
<th></th>
<th align="center">一月兔</th>
<th align="center">二月兔</th>
<th align="center">三月兔</th>
<th align="center">四月兔</th>
<th align="center">总数</th>
</tr>
</thead>
<tbody><tr>
<td>一月</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr>
<td>二月</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr>
<td>三月</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr>
<td>四月</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">2</td>
</tr>
<tr>
<td>五月</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">3</td>
</tr>
<tr>
<td>六月</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">4</td>
</tr>
<tr>
<td>七月</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">6</td>
</tr>
<tr>
<td>八月</td>
<td align="center">3</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">9</td>
</tr>
<tr>
<td>九月</td>
<td align="center">4</td>
<td align="center">3</td>
<td align="center">2</td>
<td align="center">4</td>
<td align="center">13</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. 首先找临界值，即无需计算，获得的值。</span></span><br><span class="line"><span class="comment">//2. 找这一次和上一次的关系。</span></span><br><span class="line"><span class="comment">//3. 假设当前函数已经可以试用，调用自身计算上一次</span></span><br><span class="line"><span class="comment">//rabbit(4) = rabbit(3) + rabbit(1);</span></span><br><span class="line"><span class="comment">//rabbit(n) = rabbit(n-1)  + rabbit(n - 3)</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">rabbit</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;<span class="number">4</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">rabbit</span>(n-<span class="number">1</span>)  + <span class="title function_">rabbit</span>(n - <span class="number">3</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习2：</strong></p>
<p>有一堆桃子不知数目，猴子第一天吃掉一半，觉得不过瘾，又多吃了一只，第二天照此办法，吃掉剩下桃子的一半另加一只，天天如此，到第num(num&lt;&#x3D;10)天早上，猴子发现只剩一只桃子了，问这堆桃子原来有多少只？（思路：n为还剩n天吃完的桃子数）</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">peach</span>(<span class="number">10</span>)/<span class="number">2</span> - <span class="number">1</span> = <span class="title function_">peach</span>(<span class="number">9</span>);</span><br><span class="line"><span class="title function_">peach</span>(<span class="number">10</span>) = (<span class="title function_">peach</span>(<span class="number">9</span>) + <span class="number">1</span>) * <span class="number">2</span>;</span><br><span class="line"><span class="title function_">peach</span>(n) = (<span class="title function_">peach</span>(n-<span class="number">1</span>) + <span class="number">1</span>) * <span class="number">2</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">peach</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>(<span class="title function_">peach</span>(n-<span class="number">1</span>) + <span class="number">1</span>) * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习3：</strong></p>
<p>输入一个n，打印n个hello world的运行结果，</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//print(n) =print(n - 1) + 一次输出</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">print</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;hello world&lt;br/&gt;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">print</span>(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="四-JavaScript-数组"><a href="#四-JavaScript-数组" class="headerlink" title="四. JavaScript-数组"></a>四. JavaScript-数组</h2><h3 id="1-认识数组"><a href="#1-认识数组" class="headerlink" title="1.认识数组"></a>1.认识数组</h3><h4 id="1-1-为什么要使用数组"><a href="#1-1-为什么要使用数组" class="headerlink" title="1.1. 为什么要使用数组"></a>1.1. 为什么要使用数组</h4><p>​	当我们需要表示一组数据，或者叫做一次性定义很多相似的数字或变量时，就需要使用数组，如：表示一个班级学生的成绩，一年十二个月的销售数据等等</p>
<h4 id="1-2-数组的概念"><a href="#1-2-数组的概念" class="headerlink" title="1.2. 数组的概念"></a>1.2. 数组的概念</h4><ul>
<li>概念：数组的字面意思就是一组数据，一组（一般情况下相同类型）的数据（不一定都是数字，可以是任意数据类型）。<strong>数组是一种数据类型。</strong></li>
<li>数组的作用：使用单独的变量名来存储一系列的值</li>
</ul>
<h3 id="2-声明数组"><a href="#2-声明数组" class="headerlink" title="2.声明数组"></a>2.声明数组</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.通过new创建数组</span></span><br><span class="line"><span class="comment">//		参数：传入任意的数据，存储到数组中</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">100</span>,<span class="literal">true</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.省略new运算符创建数组</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="title class_">Array</span>(<span class="number">100</span>,<span class="literal">true</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.数组常量进行赋值。(JS一般使用中括号[])</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">100</span>,<span class="literal">true</span>,<span class="string">&quot;hello&quot;</span>];</span><br></pre></td></tr></table></figure>

<p>注意：使用1、2方法时，传入参数只有一个，并且为数字的时候，直接声明这么长的一个数组（数字为数组的长度）。</p>
<h3 id="3-数组属性"><a href="#3-数组属性" class="headerlink" title="3.数组属性"></a>3.数组属性</h3><ul>
<li>数组.length 返回值为数组元素的个数（数组长度）。<ul>
<li>元素：数组存储的每一个数据，叫做数组的元素</li>
</ul>
</li>
<li>访问数组的元素：<ul>
<li>数组[下标]; 下标从0开始</li>
</ul>
</li>
</ul>
<h3 id="4-数组遍历"><a href="#4-数组遍历" class="headerlink" title="4.数组遍历"></a>4.数组遍历</h3><h4 id="4-1-随机数"><a href="#4-1-随机数" class="headerlink" title="4.1. 随机数"></a>4.1. 随机数</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Math</span>.<span class="title function_">random</span>() <span class="comment">//随机生成[0,1)中的数</span></span><br><span class="line"><span class="title function_">paerseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">10</span>) <span class="comment">//随机生成0~9的整数</span></span><br></pre></td></tr></table></figure>

<h4 id="4-2-循环赋值"><a href="#4-2-循环赋值" class="headerlink" title="4.2. 循环赋值"></a>4.2. 循环赋值</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//给数组每个元素赋值随机数</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++)&#123;</span><br><span class="line">    arr[i] = <span class="title function_">paerseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-3-快速遍历-快速枚举"><a href="#4-3-快速遍历-快速枚举" class="headerlink" title="4.3. 快速遍历&#x2F;快速枚举"></a>4.3. 快速遍历&#x2F;快速枚举</h4><p>差别：不用判断数组长度，运行过程中数组长度改变会出错（一般不写奇奇怪怪的代码不会发生错误）。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"><span class="comment">//页面上分别将每一个数输出</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> arr)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(arr[i]+<span class="string">&quot;&lt;br/&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-数组方法"><a href="#5-数组方法" class="headerlink" title="5.数组方法"></a>5.数组方法</h3><h4 id="5-1-栈结构"><a href="#5-1-栈结构" class="headerlink" title="5.1. 栈结构"></a>5.1. 栈结构</h4><ul>
<li>栈：木盆<ul>
<li>放的时候最先放的放最底下，拿的时候拿最后放下去的。</li>
<li>特点：先进的后出</li>
</ul>
</li>
<li>数组的两个方法形成栈结构：<ul>
<li>push 方法<ul>
<li>格式：数组.push(参数1,参数2…)；</li>
<li>功能：给数组的末尾添加元素。</li>
<li>返回值：添加完元素后数组的长度</li>
</ul>
</li>
<li>pop 方法<ul>
<li>格式：数组.pop();</li>
<li>参数：没有参数</li>
<li>返回值：取下的元素</li>
<li>功能：从数组末尾取下一个元素</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="5-1-队列结构"><a href="#5-1-队列结构" class="headerlink" title="5.1. 队列结构"></a>5.1. 队列结构</h4><ul>
<li>结构：从末尾进，从头部出。</li>
<li>特点：先进的先出</li>
<li>shift() 方法<ul>
<li>格式：数组.shift();</li>
<li>参数：没有参数</li>
<li>功能：从数组的头部取下一个元素</li>
<li>返回值：取下的元素</li>
</ul>
</li>
<li>unshift() 方法<ul>
<li>格式：数组.unshift(参数1,参数2…)</li>
<li>功能：从数组的头部插入元素</li>
<li>返回值：插完元素以后数组的长度</li>
</ul>
</li>
</ul>
<h4 id="5-2-concat-方法"><a href="#5-2-concat-方法" class="headerlink" title="5.2. concat()方法"></a>5.2. concat()方法</h4><ol>
<li>拷贝原数组，生成新数组。</li>
<li>合并数组<ul>
<li>格式：数组.concat(数组,数据,…)</li>
<li>返回值：合并成的新数组。</li>
<li>注意：就算传入是数组，数组中元素中的元素要单独拆出来再进行合并。</li>
</ul>
</li>
</ol>
<h4 id="5-2-slice-方法"><a href="#5-2-slice-方法" class="headerlink" title="5.2. slice()方法"></a>5.2. slice()方法</h4><ul>
<li>格式：数组.slice(start,end);   [start,end)</li>
<li>功能：可以基于当前数组获取指定区域元素[start,end)，提取出元素生成新数组。</li>
<li>返回值：生成的新数组，原数组不会发生任何的改变。</li>
</ul>
<h4 id="5-3-splice-方法"><a href="#5-3-splice-方法" class="headerlink" title="5.3. splice()方法"></a>5.3. splice()方法</h4><ul>
<li><p>格式：数组.splice(start,length,数据1,数据2…)</p>
<ul>
<li>参数：<ul>
<li>start 开始截取的位置</li>
<li>length 截取元素的长度</li>
<li>第三个参数开始：在start位置插入的元素</li>
</ul>
</li>
<li>返回值：截取下来的元素组成的数组</li>
</ul>
</li>
<li><p>增加</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">var</span> res = arr.<span class="title function_">splice</span>(<span class="number">2</span>,<span class="number">0</span>,<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;world&quot;</span>);</span><br><span class="line"><span class="title function_">alert</span>(arr);<span class="comment">//10,20,hello,world,30,40,50</span></span><br><span class="line"><span class="title function_">alert</span>(res);<span class="comment">//空数组</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>删除</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">var</span> res = arr.<span class="title function_">splice</span>(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="title function_">alert</span>(arr);<span class="comment">//10,40,50</span></span><br><span class="line"><span class="title function_">alert</span>(res);<span class="comment">//20,30</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改(先删后增)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="title function_">alert</span>(arr);<span class="comment">//10,20,hello,40,50</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="5-4-join-方法"><a href="#5-4-join-方法" class="headerlink" title="5.4. join()方法"></a>5.4. join()方法</h4><ul>
<li>格式：数组.join(字符串)</li>
<li>功能：将数组中的元素，用传入的拼接符，拼接成一个字符串。</li>
<li>返回值：拼接好的字符串</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>];</span><br><span class="line"><span class="keyword">var</span> str = arr.<span class="title function_">join</span>(<span class="string">&quot;==&quot;</span>);</span><br><span class="line"><span class="title function_">alert</span>(str);<span class="number">10</span>==<span class="number">20</span>==<span class="number">30</span></span><br><span class="line"><span class="title function_">alert</span>(arr);<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span></span><br></pre></td></tr></table></figure>

<h4 id="5-5-resver-方法"><a href="#5-5-resver-方法" class="headerlink" title="5.5. resver()方法"></a>5.5. resver()方法</h4><ul>
<li>功能：逆序</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="literal">true</span>,<span class="string">&quot;hello&quot;</span>,<span class="number">100</span>];</span><br><span class="line">arr.<span class="title function_">reverse</span>();</span><br><span class="line"><span class="title function_">alert</span>(arr);<span class="comment">//100,hello,true</span></span><br></pre></td></tr></table></figure>

<h4 id="5-6-sort-方法"><a href="#5-6-sort-方法" class="headerlink" title="5.6. sort()方法"></a>5.6. sort()方法</h4><ul>
<li><p>格式：数组.sort()	默认从小到大排序，按字符串排序</p>
</li>
<li><p>参数：一个函数，代表要怎么进行排序（固定用法）</p>
</li>
<li><p>按数值排序方法</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="number">1</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">25</span>,<span class="number">5</span>];</span><br><span class="line"><span class="comment">//从小到大</span></span><br><span class="line">arr.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">value1,value2</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> value1 - value2;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//从大到小</span></span><br><span class="line">arr.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">value1,value2</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> value2 - value1;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="5-7-数组求平均数"><a href="#5-7-数组求平均数" class="headerlink" title="5.7. 数组求平均数"></a>5.7. 数组求平均数</h4><p>​	定义一个含有38个整型元素的数组，按顺序分别赋予从2开始的偶数；然后按顺序每五个数求出一个平均值，放在另一个数组中并输出。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=<span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">30</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i++)&#123;</span><br><span class="line">    arr[i]=i*i+<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> avgArr=[];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">var</span> newArr.<span class="title function_">splice</span>(<span class="number">0</span>,<span class="number">5</span>);<span class="comment">//splice对原数组进行修改</span></span><br><span class="line">    <span class="comment">//var newArr = arr.slice(i*5,(i+1)*5);也行</span></span><br><span class="line">    <span class="keyword">var</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;newArr.<span class="property">length</span>;j++)&#123;</span><br><span class="line">        sum+=newArr[j];</span><br><span class="line">    &#125;</span><br><span class="line">    avgArr.<span class="title function_">push</span>(sum/<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">alert</span>(avgArr);</span><br></pre></td></tr></table></figure>

<h3 id="6-引用数据类型"><a href="#6-引用数据类型" class="headerlink" title="6. 引用数据类型"></a>6. 引用数据类型</h3><ul>
<li>运行程序：<ul>
<li>1、准备运行程序要用的空间(一旦分配好，内存大小没办法进行改变)</li>
<li>2、开始运行程序</li>
</ul>
</li>
<li>数组的变量存储的是数组的地址值。</li>
<li>concat()方法：拷贝原数组生成一个新数组</li>
</ul>
<h3 id="7-声明提升和省略var"><a href="#7-声明提升和省略var" class="headerlink" title="7. 声明提升和省略var"></a>7. 声明提升和省略var</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//声明提升</span></span><br><span class="line"><span class="title function_">alert</span>(num);</span><br><span class="line"><span class="keyword">var</span> num=<span class="number">10</span>;</span><br><span class="line"><span class="title function_">alert</span>(num);</span><br><span class="line"><span class="comment">//undefined 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">内存分配，一次分配</span></span><br><span class="line"><span class="comment">预编译：所有代码运行之前，计算机将代码从头到尾看一遍。</span></span><br><span class="line"><span class="comment">	将这个程序需要运行的空间一次性分配好。</span></span><br><span class="line"><span class="comment">	var num=10在第二行 声明var num在所有程序之前</span></span><br><span class="line"><span class="comment">	相当于:*/</span></span><br><span class="line">	<span class="keyword">var</span> num;</span><br><span class="line">	<span class="title function_">alert</span>(num);</span><br><span class="line">	num=<span class="number">10</span>;</span><br><span class="line">	<span class="title function_">alert</span>(num);</span><br><span class="line"><span class="comment">//函数也会声明提升,预编译时会将函数提到代码最前面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//总结：在当前作用域，声明变量和函数，会直接提升在整个代码的最前面运行</span></span><br></pre></td></tr></table></figure>

<ul>
<li>省略var声明变量<ul>
<li>变量会被强制声明成全局变量</li>
</ul>
</li>
</ul>
<h3 id="8-二维数组"><a href="#8-二维数组" class="headerlink" title="8. 二维数组"></a>8. 二维数组</h3><ul>
<li>来源：数组中每一个元素，元素可以是任意数据类型，元素可以是数组，数组存数组是存的数组地址</li>
<li>二维数组：人为起的</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">通过循环按顺序为一个5x5的二维数组a赋1到25的自然数，然后输出该数组的左下半三角</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> arr = &#123;</span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],</span><br><span class="line">    [<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>],</span><br><span class="line">    [<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>],</span><br><span class="line">    [<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>],</span><br><span class="line">    [<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>,<span class="number">24</span>,<span class="number">25</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//打印靠左三角形图案</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;=i;j++)&#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;o&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;&lt;br/&gt;&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//结合一下</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;=i;j++)&#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">write</span>(arr[i][j]+<span class="string">&quot; &quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;&lt;br/&gt;&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-冒泡和选择排序"><a href="#9-冒泡和选择排序" class="headerlink" title="9. 冒泡和选择排序"></a>9. 冒泡和选择排序</h3><p>冒泡排序：</p>
<ul>
<li>规则：前后两个数两两进行比较，如果符合交换条件就换位</li>
<li>规律：冒泡排序每过一轮排序，都可以找出一个较大的数，放在正确的位置</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="number">9</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>-<span class="number">1</span>;i++)&#123;</span><br><span class="line">	<span class="comment">//每一轮比较的次数</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;arr.<span class="property">length</span>-(i+<span class="number">1</span>);j++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(arr[j]&gt;arr[j+<span class="number">1</span>])&#123;</span><br><span class="line">			<span class="comment">//交换位置</span></span><br><span class="line">			<span class="keyword">var</span> tmp = arr[j];</span><br><span class="line">            arr[j]=arr[j+<span class="number">1</span>];</span><br><span class="line">            arr[j+<span class="number">1</span>]=tmp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>选择排序（打擂台）：</p>
<ul>
<li>规则：选出一个位置，这个位置上的数，和后面所有的数进行比较，如果比较出大小就交换位置。</li>
<li>规律：每一轮都能选出一个最小的数，放在正确位置</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="number">9</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>-<span class="number">1</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j=i+<span class="number">1</span>;j&lt;arr.<span class="property">length</span>;j++)&#123;</span><br><span class="line">    	<span class="keyword">if</span>(arr[i]&gt;arr[j])&#123;</span><br><span class="line">            <span class="keyword">var</span> tmp=arr[i];</span><br><span class="line">            arr[i]=arr[j];</span><br><span class="line">            arr[j]=tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-数组练习"><a href="#10-数组练习" class="headerlink" title="10.数组练习"></a>10.数组练习</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//随机给出一个五位以内的数，然后输出该数共有多少位，每位分别是什么</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">count0fNum</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> arr=[];</span><br><span class="line">    <span class="keyword">while</span>(num)&#123;</span><br><span class="line">        arr.<span class="title function_">unshift</span>(num % <span class="number">10</span>);</span><br><span class="line">        num = <span class="built_in">parseInt</span>(num/<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;一共是：&quot;</span>+arr.<span class="property">length</span>+<span class="string">&quot;位，每一位分别是&quot;</span>+arr)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//编写函数has(arr,60)判断数组中是否存在60这个元素，返回布尔类型</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">has</span>(<span class="params">arr,item</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i]===item)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">生成13位条形码</span></span><br><span class="line"><span class="comment">	Ean-13码规则：第十三位数字是前十二位数字经过计算得到的校验码。</span></span><br><span class="line"><span class="comment">	例如：690123456789</span></span><br><span class="line"><span class="comment">	第十三位计算其验证码的过程为：</span></span><br><span class="line"><span class="comment">	@前十二位的奇数位和6+0+2+4+6+8=26</span></span><br><span class="line"><span class="comment">	@前十二位的偶数位和9+1+3+5+7+9=34</span></span><br><span class="line"><span class="comment">	@将奇数和与偶数和的三倍相加26+34*3=128</span></span><br><span class="line"><span class="comment">	@取结果的个位数：128的个位数为8</span></span><br><span class="line"><span class="comment">	@用10减去这个个位数10-8=2</span></span><br><span class="line"><span class="comment">	所以校验码为2（如果结果个位数为0，校验码为0）</span></span><br><span class="line"><span class="comment">	例如：输入692223361219输出6922233612192</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">functino <span class="title function_">ean13</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    <span class="comment">//1、将其中每一位数取下来</span></span><br><span class="line">    <span class="keyword">var</span> arr=[];</span><br><span class="line">    <span class="keyword">while</span>(num)&#123;</span><br><span class="line">        arr.<span class="title function_">unshift</span>(num%<span class="number">10</span>);</span><br><span class="line">        <span class="built_in">parseInt</span>(num/<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> odd=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> even=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//奇数</span></span><br><span class="line">            odd += arr[i];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//偶数</span></span><br><span class="line">            even += arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> sum=(odd+even*<span class="number">3</span>)%<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">if</span>(sum)&#123;</span><br><span class="line">        sum=<span class="number">10</span>-sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//生成第13位数</span></span><br><span class="line">    arr.<span class="title function_">push</span>(sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Number</span>(arr.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="五-JavaScript-ECMA5"><a href="#五-JavaScript-ECMA5" class="headerlink" title="五. JavaScript-ECMA5"></a>五. JavaScript-ECMA5</h2><h3 id="1-ECMA5严格模式"><a href="#1-ECMA5严格模式" class="headerlink" title="1.ECMA5严格模式"></a>1.ECMA5严格模式</h3><ul>
<li><p>简介：除正常运行模式，ECMAscript 5 添加了第二种运行模式：“严格模式”(strict mode)。顾名思义，这种模式使得Javascript在更严格的条件下运行。</p>
</li>
<li><p>目的：</p>
<ol>
<li>消除Javascript语法的一些不合理、不严谨之处，减少一些怪异行为。</li>
<li>消除代码运行的一些不安全之处，保证代码运行安全。</li>
<li>提高编译器效率，增加运行速度。</li>
<li>为未来新版本的Javascript做好铺垫。</li>
</ol>
</li>
<li><p>格式：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">严格模式：写在哪个作用内下，就在哪个作用域内生效。</span></span><br><span class="line"><span class="comment">&quot;use strict&quot;;</span></span><br><span class="line"><span class="comment">注：尽量注意不要把严格模式写在全局。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="1-1-严格模式的行为变更"><a href="#1-1-严格模式的行为变更" class="headerlink" title="1.1.严格模式的行为变更"></a>1.1.严格模式的行为变更</h4><ol>
<li><p>全局变量声明时，必须加var</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	<span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">	a=<span class="number">10</span>;<span class="comment">//报错，因为a没有被var声明</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>this无法指向全局对象。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>)&#123;</span><br><span class="line">    	<span class="variable language_">this</span>.<span class="property">b</span>=<span class="number">10</span>;<span class="comment">//报错，因为this是undefined </span></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="title function_">a</span>()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数内重名属性</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">b,b,c</span>)&#123;</span><br><span class="line">        <span class="comment">//语法错误：上下文中不允许重复的参数名称</span></span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>arguments对象不允许被动态改变 ：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params">num1,num2</span>)&#123;</span><br><span class="line">    <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">    num1=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="title function_">alert</span>(num1+<span class="string">&quot;,&quot;</span>+num2);<span class="comment">//hello,20</span></span><br><span class="line"> 	<span class="title function_">alert</span>(<span class="variable language_">arguments</span>[<span class="number">0</span>]+<span class="string">&quot;,&quot;</span>+<span class="variable language_">arguments</span>[<span class="number">1</span>])<span class="comment">//10,20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">show</span>(<span class="number">10</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>新增保留字：implements,interface,let,package,private,protected,public,static,yield。</p>
<p>注：保留字不能声明为变量名</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">package</span>(<span class="params">protected</span>)&#123;<span class="comment">//语法错误</span></span><br><span class="line">        <span class="keyword">var</span> implements;<span class="comment">//语法错误</span></span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2-ECMA5新增数组方法"><a href="#2-ECMA5新增数组方法" class="headerlink" title="2.ECMA5新增数组方法"></a>2.ECMA5新增数组方法</h3><h4 id="1-indexOf-方法"><a href="#1-indexOf-方法" class="headerlink" title="1. indexOf()方法"></a>1. indexOf()方法</h4><ul>
<li><p>格式:数组.index(item,start)</p>
</li>
<li><p>参数：</p>
<ul>
<li>item：任意数据</li>
<li>start：下标 可以不传入，默认为0</li>
</ul>
</li>
<li><p>功能：在数组中查找第一次出现item元素的下标，从start开始查找</p>
</li>
<li><p>返回值：</p>
<ul>
<li>-1 没有查找到</li>
<li>大于等于0</li>
</ul>
</li>
<li><p>举例：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">var</span> index = arr.<span class="title function_">indexOf</span>(<span class="number">20</span>,<span class="number">2</span>);</span><br><span class="line"><span class="title function_">alert</span>(index);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-forEach-循环"><a href="#2-forEach-循环" class="headerlink" title="2.forEach()循环"></a>2.forEach()循环</h4><ul>
<li>数组遍历方法：<ul>
<li>for循环</li>
<li>for…in</li>
<li>forEach(ECMA5新增)</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item,index,arr</span>)&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    	item当前遍历到的元素</span></span><br><span class="line"><span class="comment">    	index当前遍历到元素的下标</span></span><br><span class="line"><span class="comment">    	arr数组本身</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>彩蛋：forEach出来的时候被抵制了一段时间，理由是forEach 屏蔽了初学者对于循环的理解。</li>
</ul>
<h4 id="3-map-方法"><a href="#3-map-方法" class="headerlink" title="3.map()方法"></a>3.map()方法</h4><ul>
<li>映射：根据固定的运算公式把原来的数经过公式算出结果放在对应下标里</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">var</span> newArr=arr.<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">item,index,arr</span>)&#123;</span><br><span class="line">    <span class="comment">//遍历要做的事情</span></span><br><span class="line">    <span class="keyword">return</span> item*<span class="number">1.3</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="title function_">alert</span>(newArr)<span class="comment">//;12,26,39,52,65</span></span><br><span class="line"><span class="title function_">alert</span>(arr);<span class="comment">//10,20,30,40,50</span></span><br></pre></td></tr></table></figure>

<h4 id="4-filter-过滤"><a href="#4-filter-过滤" class="headerlink" title="4.filter()过滤"></a>4.filter()过滤</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="keyword">var</span> newArr=arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">item,index,arr</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> item&gt;<span class="number">2</span>;<span class="comment">//找出所有大于2的元素</span></span><br><span class="line">&#125;);<span class="comment">//结果：[5,3,4,5]，不改变原数组新生成数组</span></span><br></pre></td></tr></table></figure>

<h4 id="5-some-方法"><a href="#5-some-方法" class="headerlink" title="5.some()方法"></a>5.some()方法</h4><ul>
<li>功能：在数组中查找是否有符合条件的元素，有返回true，没有返回false。</li>
<li>短路操作：只要找到符合条件的元素，后面的循环就停止了。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">var</span> newArr=arr.<span class="title function_">some</span>(<span class="keyword">function</span>(<span class="params">item,index,arr</span>)&#123;</span><br><span class="line">    <span class="comment">//遍历要做的事情</span></span><br><span class="line">    <span class="keyword">return</span> item&gt;<span class="number">20</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="6-every-方法"><a href="#6-every-方法" class="headerlink" title="6.every()方法"></a>6.every()方法</h4><ul>
<li>功能：在数组中查找是否每一个元素都符合条件，有返回true，没有返回false。</li>
<li>短路操作：只要找到不符合条件的元素，后面循环停止。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">var</span> newArr=arr.<span class="title function_">every</span>(<span class="keyword">function</span>(<span class="params">item,index,arr</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> item&gt;<span class="number">20</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="7-reduce-归并"><a href="#7-reduce-归并" class="headerlink" title="7.reduce()归并"></a>7.reduce()归并</h4><ul>
<li>归并：先把前两个数并一块，然后再并第二个第三个</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">var</span> newArr=arr.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">prev,next,index,arr</span>)&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    prev 第一次 下标为0的元素</span></span><br><span class="line"><span class="comment">    	 第二次开始 上一次遍历return的值</span></span><br><span class="line"><span class="comment">    	 </span></span><br><span class="line"><span class="comment">    next 从下标1开始，当前遍历到的元素</span></span><br><span class="line"><span class="comment">    arr数组本身</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="title function_">alert</span>(prev+<span class="string">&quot;,&quot;</span>+next);</span><br><span class="line">    <span class="keyword">return</span> prev + next;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="title function_">alert</span>(newArr)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">10,20</span></span><br><span class="line"><span class="comment">30,30</span></span><br><span class="line"><span class="comment">60,40</span></span><br><span class="line"><span class="comment">100,50</span></span><br><span class="line"><span class="comment">150</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="六-JavaScript-字符串"><a href="#六-JavaScript-字符串" class="headerlink" title="六. JavaScript-字符串"></a>六. JavaScript-字符串</h2><h3 id="1-字符串的基本概念"><a href="#1-字符串的基本概念" class="headerlink" title="1.字符串的基本概念"></a>1.字符串的基本概念</h3><ul>
<li>字符串概念：所有带单引号或双引号的都叫字符串</li>
<li>字符串的声明：<ul>
<li>通过new运算符去声明字符串</li>
<li>省略new声明字符串</li>
<li>字符串常量复制</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str =<span class="keyword">new</span> <span class="title class_">String</span>(<span class="number">100</span>);</span><br><span class="line"><span class="title function_">alert</span>(<span class="keyword">typeof</span> str);<span class="comment">//object</span></span><br><span class="line"><span class="keyword">var</span> str1 = <span class="title class_">String</span>(<span class="number">100</span>);</span><br><span class="line"><span class="title function_">alert</span>(<span class="keyword">typeof</span> str1);<span class="comment">//string</span></span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">&quot;100&quot;</span>;</span><br><span class="line"><span class="title function_">alert</span>(<span class="keyword">typeof</span> str2);<span class="comment">//string</span></span><br></pre></td></tr></table></figure>

<ul>
<li>访问字符串中的字符的个数：<ul>
<li>字符串.length  访问字符串中字符的个数</li>
<li>注：中文字符集，utf-8(三个字符表示一个汉字) gbk（两个字符表示一个汉字） <strong>在计数的时候都是当作一个汉字计数</strong></li>
</ul>
</li>
<li>访问字符串中单个字符：<ul>
<li>字符串.charAt(下标)  <strong>从0开始</strong></li>
<li>字符串[下标]</li>
</ul>
</li>
<li><strong>注意</strong>：字符串只读，一旦被声明没办法修改，如果非要修改，只能将原字符串销毁再生成</li>
<li><strong>注意</strong>：在JS中，字符串既是基本数据类型也是符合数据类型。</li>
<li>字符串遍历：<ul>
<li>for循环</li>
</ul>
</li>
</ul>
<h3 id="2-字符串方法"><a href="#2-字符串方法" class="headerlink" title="2.字符串方法"></a>2.字符串方法</h3><h4 id="1-不常用字符串方法格式：字符串-函数名"><a href="#1-不常用字符串方法格式：字符串-函数名" class="headerlink" title="1.不常用字符串方法格式：字符串.函数名()"></a>1.不常用字符串方法格式：字符串.函数名()</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">big</span>()		大好字体显示字符串</span><br><span class="line"><span class="title function_">blink</span>()		显示闪动字符串（ie无效）</span><br><span class="line"><span class="title function_">bold</span>()		粗体显示字符串</span><br><span class="line"><span class="title function_">fixed</span>()		以打字机文本显示字符串</span><br><span class="line"><span class="title function_">strike</span>()	使用删除线来显示字符串</span><br><span class="line"><span class="title function_">fontcolor</span>()	指定颜色显示字符串</span><br><span class="line"><span class="title function_">fontsize</span>()	指定尺寸显示字符串</span><br><span class="line"><span class="title function_">link</span>()		字符串显示为链接</span><br><span class="line"><span class="title function_">sub</span>()		字符串显示为下标</span><br><span class="line"><span class="title function_">sup</span>()		字符串显示为上标</span><br><span class="line"><span class="comment">//document.write()中使用,用特殊样式输出字符串</span></span><br></pre></td></tr></table></figure>

<h4 id="2-字符串获取方法"><a href="#2-字符串获取方法" class="headerlink" title="2.字符串获取方法"></a>2.字符串获取方法</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">charAt</span>(<span class="number">3</span>) <span class="comment">//获取下标为3的字符</span></span><br><span class="line"><span class="title function_">charCodeAt</span>(<span class="number">3</span>) <span class="comment">//获取下标为3的字符的编码</span></span><br><span class="line"><span class="comment">//上面2个方法使用字符串对象调用</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">fromCharCode</span>(<span class="number">94</span>) <span class="comment">//编码转换成字符串</span></span><br><span class="line"><span class="comment">//该方法是String静态方法,所以用String调用，</span></span><br><span class="line">如：<span class="keyword">var</span> str = <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">98</span>,<span class="number">99</span>);</span><br></pre></td></tr></table></figure>

<h4 id="3-字符串查找方法"><a href="#3-字符串查找方法" class="headerlink" title="3.字符串查找方法"></a>3.字符串查找方法</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">indexOf()</span></span><br><span class="line"><span class="comment">	格式：supStr.indexOf(subStr,start);</span></span><br><span class="line"><span class="comment">	参数：第一个，要查的字符串</span></span><br><span class="line"><span class="comment">		 start 从哪个下标开始 默认为0</span></span><br><span class="line"><span class="comment">	功能：在supStr中查找subStr第一次出现的位置，从start这个位置开始查找。</span></span><br><span class="line"><span class="comment">    返回值：-1 没有找到</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> supStr=<span class="string">&quot;abcabcabc&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> subStr=<span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> index = supStr.<span class="title function_">indexOf</span>(subStr);<span class="comment">//0</span></span><br><span class="line"><span class="keyword">var</span> index = supStr.<span class="title function_">indexOf</span>(subStr,<span class="number">1</span>);<span class="comment">//3</span></span><br><span class="line"><span class="keyword">var</span> index = supStr.<span class="title function_">indexOf</span>(subStr,<span class="number">4</span>);<span class="comment">//6</span></span><br><span class="line"><span class="comment">//======================================================</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">lastIndexOf()</span></span><br><span class="line"><span class="comment">	格式：supStr.lastIndexOf(subStr);</span></span><br><span class="line"><span class="comment">	功能：在supStr中查找subStr最后一次出现的位置</span></span><br><span class="line"><span class="comment">	参数：第二个参数是开始查找的索引位置，查找方向是从右往左</span></span><br><span class="line"><span class="comment">	返回值：-1 没有找到</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> supStr=<span class="string">&quot;abcabcabc&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> subStr=<span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> index = supStr.<span class="title function_">lastIndexOf</span>(subStr);<span class="comment">//6</span></span><br><span class="line"><span class="keyword">var</span> index = supStr.<span class="title function_">lastIndexOf</span>(subStr)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> arr=[<span class="number">10</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>];</span><br><span class="line">  <span class="comment">//索引值：0  1 2 3 4 5 6 7 8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">lastIndexOf</span>(<span class="number">4</span>));<span class="comment">//4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">lastIndexOf</span>(<span class="number">7</span>));<span class="comment">//6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">lastIndexOf</span>(<span class="number">5</span>));<span class="comment">//5</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">//======================================================</span></span><br><span class="line"><span class="comment">search()</span></span><br><span class="line"><span class="comment">	格式：supStr.search(subStr);</span></span><br><span class="line"><span class="comment">	参数：字符串/正则表达式</span></span><br><span class="line"><span class="comment">	功能：在supStr中查找subStr第一次出现的位置</span></span><br><span class="line"><span class="comment">    返回值：-1 没有查找到</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> supStr=<span class="string">&quot;Abcabcabc&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> subStr=<span class="string">&quot;/abc/i&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> index = supStr.<span class="title function_">search</span>(subStr);<span class="comment">//0</span></span><br></pre></td></tr></table></figure>

<h4 id="4-字符串提取方法"><a href="#4-字符串提取方法" class="headerlink" title="4.字符串提取方法"></a>4.字符串提取方法</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">substring</span></span><br><span class="line"><span class="comment">	格式：字符串.substring(start,end);</span></span><br><span class="line"><span class="comment">	功能：将字符串中[start,end)提取这部分字符，生成新字符串</span></span><br><span class="line"><span class="comment">	返回值：新字符串</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr=str.<span class="title function_">substring</span>(<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line"><span class="title function_">alert</span>(newStr);<span class="comment">//ell</span></span><br><span class="line"><span class="title function_">alert</span>(str);<span class="comment">//hello</span></span><br><span class="line"><span class="comment">//======================================================</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">substr</span></span><br><span class="line"><span class="comment">	格式:字符串.substr(start,length);</span></span><br><span class="line"><span class="comment">	返回值：新字符串</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">substr</span>(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line"><span class="title function_">alert</span>(newStr);<span class="comment">//ell</span></span><br><span class="line"><span class="title function_">alert</span>(str)<span class="comment">//hello</span></span><br><span class="line"><span class="comment">//======================================================</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">slice(数组方法)</span></span><br><span class="line"><span class="comment">	格式：字符串.slice(start,end);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> newStr=str.<span class="title function_">slice</span>(<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line"><span class="title function_">alert</span>(newStr);<span class="comment">//ell</span></span><br><span class="line"><span class="title function_">alert</span>(str);<span class="comment">//hello</span></span><br></pre></td></tr></table></figure>

<h4 id="5-字符串替换分割"><a href="#5-字符串替换分割" class="headerlink" title="5.字符串替换分割"></a>5.字符串替换分割</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">replace() 字符串替换</span></span><br><span class="line"><span class="comment">	格式：supStr.replace(oldStr,newStr);</span></span><br><span class="line"><span class="comment">	功能：用newStr将oldStr，替换，生成新字符串。</span></span><br><span class="line"><span class="comment">	参数：</span></span><br><span class="line"><span class="comment">		第一个参数传入的是字符串只能替换一次。</span></span><br><span class="line"><span class="comment">		第一个参数可以传入正则表达式</span></span><br><span class="line"><span class="comment">	返回值：新生成的字符串。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;how are are you&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">replace</span>(<span class="string">&quot;are&quot;</span>,<span class="string">&quot;old are&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> newStr2 = str.<span class="title function_">replace</span>(<span class="string">&quot;/are/g&quot;</span>,<span class="string">&quot;old are&quot;</span>)</span><br><span class="line"><span class="title function_">alert</span>(newStr);<span class="comment">//how old are are you</span></span><br><span class="line"><span class="title function_">alert</span>(str);<span class="comment">//how are are you</span></span><br><span class="line"><span class="title function_">alert</span>(newStr2);<span class="comment">//how old are old are you</span></span><br><span class="line"><span class="comment">//======================================================</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">split() 字符串分割</span></span><br><span class="line"><span class="comment">	格式：字符串.split(分隔符，length)</span></span><br><span class="line"><span class="comment">	参数：</span></span><br><span class="line"><span class="comment">		第一个参数，用这个分隔符对字符串进行分割</span></span><br><span class="line"><span class="comment">		第二个参数，控制返回的数组的元素格式，一般不用</span></span><br><span class="line"><span class="comment">	功能：用分隔符对原字符串分割分割玩的字串放在数组中返回</span></span><br><span class="line"><span class="comment">	返回值：数组</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;how are are you&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">split</span>(<span class="string">&quot; s&quot;</span>)</span><br><span class="line"><span class="title function_">alert</span>(newStr);<span class="comment">//how,are,you</span></span><br><span class="line"><span class="title function_">alert</span>(str);<span class="comment">//how are you</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">注意：1.相邻两个分隔符，会产生空字符串。</span></span><br><span class="line"><span class="comment">	 2.分割符是空字符串&quot;&quot;,直接将每一个字符单独分割成字串,放在数组中返回。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="6-字符串转大小写"><a href="#6-字符串转大小写" class="headerlink" title="6.字符串转大小写"></a>6.字符串转大小写</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	toLowerCase() 转成全小写</span></span><br><span class="line"><span class="comment">	toUpperCase() 转成全大写</span></span><br><span class="line"><span class="comment">	注：生成新字符串</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="3-字符串练习"><a href="#3-字符串练习" class="headerlink" title="3.字符串练习"></a>3.字符串练习</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1、将字符串str=&quot;When I was young,I love a girl in neighbor class.&quot;中，从young提取到girl生成新字符串</span></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;When I was young,I love a girl in neighbor class.&quot;</span></span><br><span class="line"><span class="keyword">var</span> start = str.<span class="title function_">indexOf</span>(<span class="string">&quot;young&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> end=str.<span class="title function_">indexOf</span>(<span class="string">&quot;girl&quot;</span>)+<span class="string">&quot;girl&quot;</span>.<span class="property">length</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">substring</span>(start,end);</span><br><span class="line"><span class="title function_">alert</span>(newStr);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2、将字符中单词用空格隔开，已知传入的字符串只有字母，每个单词首字母大写，把每个单词用空格隔开，值保留第一个单词首字母大写</span></span><br><span class="line"><span class="comment">传入：&quot;HelloMyWorld&quot;</span></span><br><span class="line"><span class="comment">返回：&quot;Hello my world&quot;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">思路</span></span><br><span class="line"><span class="comment">1、字符串转数组 split(&quot;&quot;)</span></span><br><span class="line"><span class="comment">2、数组转字符串 join(&quot;&quot;)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">wordOfStr</span>(<span class="params">str</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> arr=str.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>;i&lt;arr.<span class="property">length</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i]&gt;=<span class="string">&quot;A&quot;</span>&amp;&amp;arr[i]&lt;=<span class="string">&quot;Z&quot;</span>)&#123;</span><br><span class="line">            <span class="comment">//大写转小写，插空格</span></span><br><span class="line">            arr[i]=arr[i].<span class="title function_">toLowerCase</span>();</span><br><span class="line">            arr.<span class="title function_">splice</span>(i,<span class="number">0</span>,<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">wordOfStr</span>(<span class="string">&quot;HelloMyWorld&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">3.将字符串安单词进行排序，空格作为划分单词的唯一条件</span></span><br><span class="line"><span class="comment">传入&quot;Welcome to Beijing&quot;</span></span><br><span class="line"><span class="comment">改为&quot;Beijing to Welcome&quot;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reverseStr</span>(<span class="params">str</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> arr=arr.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-字符串验证码生成"><a href="#4-字符串验证码生成" class="headerlink" title="4.字符串验证码生成"></a>4.字符串验证码生成</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//纯数字验证码</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">numTestCode</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> arr=[];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">var</span> num=<span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">10</span>);</span><br><span class="line">        arr.<span class="title function_">push</span>(num);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//字母数字验证码</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">0-9</span></span><br><span class="line"><span class="comment">a-z 97-122</span></span><br><span class="line"><span class="comment">A-Z 65-90</span></span><br><span class="line"><span class="comment">随机ASCII码值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testCode</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> arr=[];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">var</span> num=<span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">123</span>);</span><br><span class="line">        <span class="keyword">if</span>(num&gt;=<span class="number">0</span>&amp;&amp;num&lt;=<span class="number">9</span>)&#123;</span><br><span class="line">            arr.<span class="title function_">push</span>(num);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(num&gt;=<span class="number">97</span>&amp;&amp;num&lt;=<span class="number">122</span>||num&gt;=<span class="number">65</span>&amp;&amp;&lt;=<span class="number">90</span>)&#123;</span><br><span class="line">            arr.<span class="title function_">push</span>(<span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(num));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="七-JavaScript-对象"><a href="#七-JavaScript-对象" class="headerlink" title="七. JavaScript-对象"></a>七. JavaScript-对象</h2><h3 id="1-认识对象"><a href="#1-认识对象" class="headerlink" title="1. 认识对象"></a>1. 认识对象</h3><ul>
<li><p>发展历史</p>
<ul>
<li><p>汇编语言：</p>
<ul>
<li>汇编、C语言	面向过程语言</li>
<li>Java、C++、javaScript、Object-c python 面向对象语言</li>
</ul>
</li>
<li><p>思想：</p>
<ul>
<li><p>面向过程→面向对象</p>
</li>
<li><p>面向过程：只考虑数学逻辑</p>
</li>
<li><p>面向对象：分析实体、设计实体属性功能、实体间相互作用，对生活逻辑的映射。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//一辆车60km/h，一条路100km，问跑完时间</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	面向过程：var hours=100/60;</span></span><br><span class="line"><span class="comment">	面向对象：</span></span><br><span class="line"><span class="comment">		车</span></span><br><span class="line"><span class="comment">			速度 60km/h</span></span><br><span class="line"><span class="comment">			功能 跑路上</span></span><br><span class="line"><span class="comment">		路</span></span><br><span class="line"><span class="comment">			属性</span></span><br><span class="line"><span class="comment">				length 100km</span></span><br><span class="line"><span class="comment">		让车真的跑在路上得出结果</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//贪吃蛇</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	面向过程：坐标 蛇速度</span></span><br><span class="line"><span class="comment">	面向对象：</span></span><br><span class="line"><span class="comment">		蛇</span></span><br><span class="line"><span class="comment">		食物</span></span><br><span class="line"><span class="comment">		砖块</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>语法</p>
<ul>
<li><p>类：一类具有相同特征事物的抽象概念。（狗</p>
</li>
<li><p>对象：具体某一个个体，唯一的实例。（小白</p>
</li>
</ul>
</li>
<li><p>举例</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1、通过new运算符声明对象</span></span><br><span class="line"><span class="comment">	2、通过省略new</span></span><br><span class="line"><span class="comment">	3、对象常量赋值（使用大括号表示对象）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> obj1=<span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"><span class="keyword">var</span> obj2=<span class="title class_">Object</span>();</span><br><span class="line"><span class="keyword">var</span> obj3=&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//新增属性 除加前缀使用起来和普通变量无区别</span></span><br><span class="line">obj3.<span class="property">username</span>=<span class="string">&#x27;钢铁侠&#x27;</span></span><br><span class="line">obj3.<span class="property">age</span>=<span class="number">18</span>;</span><br><span class="line"><span class="title function_">alert</span>(obj3.<span class="property">username</span>);</span><br><span class="line"><span class="title function_">alert</span>(obj3.<span class="property">age</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过中括号设置访问</span></span><br><span class="line">obj3[<span class="string">&#x27;username&#x27;</span>]=<span class="string">&#x27;钢铁侠&#x27;</span></span><br><span class="line">obj3[<span class="string">&#x27;age&#x27;</span>]=<span class="number">18</span>;</span><br><span class="line"><span class="title function_">alert</span>(obj3[<span class="string">&#x27;username&#x27;</span>])</span><br><span class="line"><span class="title function_">alert</span>(obj3[<span class="string">&#x27;age&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">//新增方法 除加前缀使用其阿里和普通函数没有区别</span></span><br><span class="line">obj3.<span class="property">show</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;我的名字叫&quot;</span>+obj3.<span class="property">name</span>+<span class="string">&quot;。&quot;</span>+obj3.<span class="property">age</span>+<span class="string">&quot;岁&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj3.<span class="title function_">show</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过对象常量赋值</span></span><br><span class="line"><span class="keyword">var</span> obj3=&#123;</span><br><span class="line">    <span class="attr">username</span>:<span class="string">&quot;钢铁侠&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>:<span class="number">18</span>,</span><br><span class="line">    <span class="attr">show</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;我的名字叫&quot;</span>+obj3.<span class="property">name</span>+<span class="string">&quot;。&quot;</span>+obj3.<span class="property">age</span>+<span class="string">&quot;岁&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//delete 关键字 删除对象属性或方法</span></span><br><span class="line"><span class="keyword">delete</span> obj3.<span class="property">show</span>;</span><br></pre></td></tr></table></figure>


</li>
<li><p>数据结构回顾</p>
<ul>
<li>基本数据类型（存储一个值</li>
<li>数组（存储多个值</li>
<li>对象（不仅可以存储多个值，还能存储函数</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//上面车的例子</span></span><br><span class="line"><span class="keyword">var</span> car=&#123;</span><br><span class="line">    <span class="attr">speed</span>:<span class="number">60</span>,</span><br><span class="line">    <span class="attr">run</span>:<span class="keyword">function</span>(<span class="params">road</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> road.<span class="property">length</span>/car.<span class="property">length</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> gaosugonglu=&#123;</span><br><span class="line">  	<span class="attr">length</span>:<span class="number">100</span> </span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> hours=car.<span class="title function_">run</span>(gaosugonglu);</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;一共花了&quot;</span>+hours.<span class="title function_">toFixed</span>(<span class="number">2</span>)+<span class="string">&quot;小时&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-常用Math对象方法"><a href="#2-常用Math对象方法" class="headerlink" title="2. 常用Math对象方法"></a>2. 常用Math对象方法</h3><ul>
<li>万物皆为对象</li>
<li>数学运算函数Math对象</li>
</ul>
<ol>
<li>Math.random() 返回0~1之间随机数</li>
<li>Math.max(num1,num2) 返回较大的数</li>
<li>Math.min(num1,num2) 返回较小的数</li>
<li>Math.abs(num) 绝对值</li>
<li>Math.round() 四舍五入（成整数，只看小数点后一位）</li>
<li>Math.ceil(19.3) 向上取整</li>
<li>Math.floor(11.8) 向下取整</li>
<li>Math.pow(x,y) x的y次方</li>
<li>Math.sqrt(num) 开平方</li>
</ol>
<h3 id="3-日期对象"><a href="#3-日期对象" class="headerlink" title="3. 日期对象"></a>3. 日期对象</h3><ul>
<li><p>声明</p>
<ul>
<li><p>没有传参：当前系统时间</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> d=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="title function_">alert</span>(d);<span class="comment">//Wed Oct 09 2019 09:01:01 GMT+0800 (中国标准时间)</span></span><br><span class="line"><span class="comment">// GMT 格林尼治时间</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>传参：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数：</span></span><br><span class="line"><span class="comment">1.字符串 &quot;2000-01-01&quot;</span></span><br><span class="line"><span class="comment">Sat Jan 01 2000 08:00:00 GMT+0800 (中国标准时间)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2.数字(按顺序 年月日时分秒毫秒)</span></span><br><span class="line"><span class="comment">	注：月份从0开始</span></span><br><span class="line"><span class="comment">var d=new Date(2000,1,1,8,30,50);</span></span><br><span class="line"><span class="comment">Tue Feb 01 2000 08:30:50 GMT+0800 (中国标准时间)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">3.数字(毫秒数)</span></span><br><span class="line"><span class="comment">	起点：1970/1/1 0:0:0</span></span><br><span class="line"><span class="comment">var d=new Date(1000);</span></span><br><span class="line"><span class="comment">Thu Jan 01 1970 08:00:01 GMT+0800 (中国标准时间)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="4-日期对象方法"><a href="#4-日期对象方法" class="headerlink" title="4. 日期对象方法"></a>4. 日期对象方法</h3><h4 id="4-1-格化式方法（了解）"><a href="#4-1-格化式方法（了解）" class="headerlink" title="4.1. 格化式方法（了解）"></a>4.1. 格化式方法（了解）</h4><table>
<thead>
<tr>
<th>方法</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>box.toDateString()</td>
<td>特定格式显示星期几、月、日和年</td>
</tr>
<tr>
<td>box.totimeString()</td>
<td>特定格式显示时、分、秒和时区</td>
</tr>
<tr>
<td>box.toLocaleDateString()</td>
<td>特定地区格式显示星期几、月、日和年</td>
</tr>
<tr>
<td>box.toLocaleTimeString()</td>
<td>特定地区格式显示时、分、秒和时区</td>
</tr>
<tr>
<td>box.toUTCString()</td>
<td>特定格式显示完整UTC日期</td>
</tr>
</tbody></table>
<h4 id="4-2-常用方法（重点）"><a href="#4-2-常用方法（重点）" class="headerlink" title="4.2.常用方法（重点）"></a>4.2.常用方法（重点）</h4><ul>
<li>set&#x2F;get既能获取又能赋值 get只能获取</li>
<li><strong>set&#x2F;getDate()</strong><ul>
<li>从Date对象中返回一个月中的某一天(1~31)</li>
</ul>
</li>
<li><strong>getDay()</strong><ul>
<li>从Date对象返回一周中的某一天（0~6）</li>
</ul>
</li>
<li><strong>set&#x2F;getMonth()</strong><ul>
<li>从Date对象中返回月份（0~11）</li>
</ul>
</li>
<li><strong>set&#x2F;getFullYear()</strong><ul>
<li>从Date对象以四位数返回年份</li>
</ul>
</li>
<li><strong>set&#x2F;getHours()</strong><ul>
<li>返回Date对象的小时（0~23）</li>
</ul>
</li>
<li><strong>set&#x2F;getMinutes()</strong><ul>
<li>返回Date对象的分钟（0~59）</li>
</ul>
</li>
<li><strong>set&#x2F;getSeconds()</strong><ul>
<li>返回Date对象的秒数（0~59）</li>
</ul>
</li>
<li><strong>set&#x2F;getMilliseconds()</strong><ul>
<li>返回Date对象的毫秒</li>
</ul>
</li>
<li><strong>set&#x2F;getTime()</strong><ul>
<li>返回1970年1月1日至今的毫秒数</li>
</ul>
</li>
<li><strong>getTimezoneOffset()</strong><ul>
<li>返回本地时间与格林威治标准时间（GMT）的分钟差</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">var</span> year = d.<span class="title function_">getFullYear</span>();</span><br><span class="line"><span class="keyword">var</span> month = d.<span class="title function_">getMonth</span>()+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> date = d.<span class="title function_">getDate</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> week = d.<span class="title function_">getDay</span>()<span class="comment">//0~6 0是星期天</span></span><br><span class="line"><span class="keyword">var</span> min = d.<span class="title function_">getMinutes</span>();</span><br><span class="line"><span class="keyword">var</span> sec = d.<span class="title function_">getSeconds</span>();</span><br></pre></td></tr></table></figure>

<h4 id="4-3-日期练习"><a href="#4-3-日期练习" class="headerlink" title="4.3. 日期练习"></a>4.3. 日期练习</h4><h5 id="4-3-1-日期对象转毫秒数"><a href="#4-3-1-日期对象转毫秒数" class="headerlink" title="4.3.1. 日期对象转毫秒数"></a>4.3.1. 日期对象转毫秒数</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	Date.parse()</span></span><br><span class="line"><span class="comment">		格式：Date.parse(日期对象)</span></span><br><span class="line"><span class="comment">		功能：可以将日期对象转换成毫秒数</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	d.getTime()/d.setTime()</span></span><br><span class="line"><span class="comment">		格式：日期对象.getTime/setTime</span></span><br><span class="line"><span class="comment">		功能：将当前日期对象转换成毫秒数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> d=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="title function_">alert</span>(<span class="title class_">Date</span>.<span class="title function_">parse</span>(d));</span><br><span class="line"><span class="title function_">alert</span>(d.<span class="title function_">getTime</span>());<span class="comment">//调用格式不一样</span></span><br></pre></td></tr></table></figure>

<h5 id="4-3-2-获取两个日期之间相差的天数"><a href="#4-3-2-获取两个日期之间相差的天数" class="headerlink" title="4.3.2. 获取两个日期之间相差的天数"></a>4.3.2. 获取两个日期之间相差的天数</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">传入：&quot;xxxx-xx-xx&quot; &quot;xxxx/xx/xx&quot;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">countOfDate</span>(<span class="params">d1,d2</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> dd1=<span class="keyword">new</span> <span class="title class_">Date</span>(d1);</span><br><span class="line">    <span class="keyword">var</span> dd2=<span class="keyword">new</span> <span class="title class_">Date</span>(d2);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> time1=dd1.<span class="title function_">getTime</span>();</span><br><span class="line">    <span class="keyword">var</span> time2=dd2.<span class="title function_">getTime</span>();</span><br><span class="line">    <span class="keyword">var</span> time=<span class="title class_">Math</span>.<span class="title function_">abs</span>(time1-time2);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseInt</span>(time/<span class="number">1000</span>/<span class="number">3600</span>/<span class="number">24</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-3-2-输入n，输出n天后的时间"><a href="#4-3-2-输入n，输出n天后的时间" class="headerlink" title="4.3.2. 输入n，输出n天后的时间"></a>4.3.2. 输入n，输出n天后的时间</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">afterOfDate</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> day = d.<span class="title function_">getDate</span>();</span><br><span class="line">    d.<span class="title function_">setDate</span>(day + n);<span class="comment">//超过30 31自动进1</span></span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-定时器"><a href="#5-定时器" class="headerlink" title="5. 定时器"></a>5. 定时器</h3><ul>
<li><p>格式：var timer &#x3D; setInterval(函数,毫秒数);</p>
</li>
<li><p>功能：隔对应毫秒数，执行一次传入函数</p>
</li>
<li><p>返回值：系统分配的编号</p>
</li>
<li><p>取消定时器：clearInterval(timer);</p>
</li>
<li><p>例子：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i==<span class="number">5</span>)&#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(i++ + <span class="string">&quot;&lt;br/&gt;&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> timer = <span class="built_in">setInterval</span>(show,<span class="number">1000</span>);</span><br><span class="line"><span class="comment">//1 2 3 4 5</span></span><br><span class="line"><span class="comment">//======================================</span></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> show = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i==<span class="number">5</span>)&#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(i++ + <span class="string">&quot;&lt;br/&gt;&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//匿名函数</span></span><br><span class="line"><span class="comment">//======================================</span></span><br><span class="line"><span class="keyword">var</span> timer = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i==<span class="number">5</span>)&#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(i++ + <span class="string">&quot;&lt;br/&gt;&quot;</span>)</span><br><span class="line">&#125;,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="八-JavaScript-BOM"><a href="#八-JavaScript-BOM" class="headerlink" title="八. JavaScript-BOM"></a>八. JavaScript-BOM</h2><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h3><ul>
<li>browser object model(浏览器对象模型)(浏览器规则)</li>
<li>窗口树状结构：</li>
<li>window<ul>
<li>document<ul>
<li>anchors</li>
<li>forms</li>
<li>images</li>
<li>links</li>
<li>location</li>
</ul>
</li>
<li>frames</li>
<li>history</li>
<li>location</li>
<li>navigator</li>
<li>screen</li>
</ul>
</li>
</ul>
<h3 id="2-系统对话框"><a href="#2-系统对话框" class="headerlink" title="2. 系统对话框"></a>2. 系统对话框</h3><p>​	浏览器可以通过alert()、confirm()和prompt()方法调用系统对话框向用户显示信息.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//弹出警告框</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;Lee&quot;</span>)</span><br><span class="line"><span class="comment">//提示框（确定和取消）</span></span><br><span class="line"><span class="title function_">confirm</span>(<span class="string">&quot;请确定或者取消&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_">confirm</span>(<span class="params">(<span class="string">&quot;请确定或者取消&quot;</span>)</span>)&#123;</span><br><span class="line">   <span class="title function_">alert</span>(<span class="string">&quot;按了确定&quot;</span>)<span class="comment">//返回true</span></span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       <span class="title function_">alert</span>(<span class="string">&quot;按了取消&quot;</span>)<span class="comment">//返回false</span></span><br><span class="line">   &#125;</span><br><span class="line"><span class="comment">//输入提示框</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="title function_">prompt</span>(<span class="string">&quot;请输入一个数字&quot;</span>，<span class="number">0</span>);</span><br><span class="line"><span class="comment">//参数1：提示 ； 参数2：默认值</span></span><br><span class="line"><span class="title function_">alert</span>(num);<span class="comment">//得到输入的值</span></span><br></pre></td></tr></table></figure>

<h3 id="3-open-方法"><a href="#3-open-方法" class="headerlink" title="3. open()方法"></a>3. open()方法</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	功能：打开窗口</span></span><br><span class="line"><span class="comment">	open()</span></span><br><span class="line"><span class="comment">	 - 参数1：跳转url 打开一个新窗口加载url</span></span><br><span class="line"><span class="comment">	 - 参数2：字符串，给打开的窗口命名</span></span><br><span class="line"><span class="comment">	 	- 本窗口打开 _parent</span></span><br><span class="line"><span class="comment">	 	- 新建窗口打开 _blank</span></span><br><span class="line"><span class="comment">	 - 参数3：特殊含义字符串</span></span><br><span class="line"><span class="comment">	 	- 可以设置宽高</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">open</span>(<span class="string">&quot;https://www.baidu.com&quot;</span>,<span class="string">&quot;_blank&quot;</span>,<span class="string">&quot;width=400,height=400,top200,left=200&quot;</span>)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>第三个参数属性</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td>channelmode&#x3D;yes|no|1|0</td>
<td>是否使用剧院模式显示窗口。默认为no。</td>
</tr>
<tr>
<td>directories&#x3D;yes|no|1|0</td>
<td>是否添加目录按钮。默认yes</td>
</tr>
<tr>
<td>funllscreen&#x3D;yes|no|1|0</td>
<td>是否使用全屏模式显示浏览器。默认no。处于全屏模式的窗口必须同时处于剧院模式。</td>
</tr>
<tr>
<td>height&#x3D;pixels</td>
<td>窗口显示区高度</td>
</tr>
<tr>
<td>left&#x3D;pixels</td>
<td>窗口x坐标</td>
</tr>
<tr>
<td>location&#x3D;yes|no|1|0</td>
<td>是否显示地址字段。默认yes</td>
</tr>
<tr>
<td>menubar&#x3D;yes|no|1|0</td>
<td>是否显示菜单栏。默认yes</td>
</tr>
<tr>
<td>resizable&#x3D;yes|no|1|0</td>
<td>窗口是否可调节尺寸。默认yes</td>
</tr>
<tr>
<td>scrollbars&#x3D;yes|no|1|0</td>
<td>是否显示滚动条。默认yes</td>
</tr>
<tr>
<td>status&#x3D;yes|no|1|0</td>
<td>是否添加状态栏。默认yes</td>
</tr>
<tr>
<td>titlebar&#x3D;yes|no|1|0</td>
<td>是否显示标题栏。默认yes</td>
</tr>
<tr>
<td>toolbar&#x3D;yes|no|1|0</td>
<td>是否显示浏览器的工具栏。默认yes</td>
</tr>
<tr>
<td>top&#x3D;pixels</td>
<td>窗口y坐标</td>
</tr>
<tr>
<td>width&#x3D;pixels</td>
<td>窗口宽度</td>
</tr>
</tbody></table>
<h3 id="3-history对象"><a href="#3-history对象" class="headerlink" title="3. history对象"></a>3. history对象</h3><ul>
<li>history对象是window对象的属性，它保存用户上网记录，从窗口被打开那一刻算起</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">属性</span><br><span class="line">history.<span class="property">length</span>;<span class="comment">//记录数</span></span><br><span class="line">方法</span><br><span class="line">history.<span class="title function_">back</span>()<span class="comment">//后退</span></span><br><span class="line">history.<span class="title function_">forward</span>()<span class="comment">//前进</span></span><br><span class="line">history.<span class="title function_">go</span>(num)<span class="comment">//跳转到第num个记录</span></span><br><span class="line"> - <span class="number">0</span>刷新</span><br><span class="line"> - <span class="number">2</span> 正整数 前进<span class="number">2</span>个</span><br><span class="line"> - -<span class="number">2</span> 负整数 后退<span class="number">2</span>个</span><br></pre></td></tr></table></figure>

<h3 id="4-location对象"><a href="#4-location对象" class="headerlink" title="4. location对象"></a>4. location对象</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>下location</span><br><span class="line"></span><br><span class="line">属性</span><br><span class="line"><span class="attr">url</span>:统一资源定位符。</span><br><span class="line"> - 协议:<span class="comment">//IP(域名)/:端口号/路径/?查询字符串#锚点</span></span><br><span class="line"></span><br><span class="line">location.<span class="property">protocal</span><span class="comment">//获取访问协议</span></span><br><span class="line"> - <span class="attr">http</span>:</span><br><span class="line"> - <span class="attr">https</span>:(证书认证协议)</span><br><span class="line"></span><br><span class="line">location.<span class="property">hostname</span><span class="comment">//获取主机名</span></span><br><span class="line"> - 一般主机名为<span class="title function_">IP</span>(网络地址) 不好记</span><br><span class="line"> - 域名：ip的别称</span><br><span class="line"></span><br><span class="line">location.<span class="property">port</span><span class="comment">//获取端口号，默认隐藏</span></span><br><span class="line"> - 当前电脑使用网络的软件，随机分配的一个编号 <span class="number">0</span>-<span class="number">65535</span></span><br><span class="line"> - 定位到当前使用网络的进程</span><br><span class="line"> - 浏览器默认端口 <span class="number">8080</span></span><br><span class="line">	- http <span class="number">80</span></span><br><span class="line"> 	- https <span class="number">443</span></span><br><span class="line"></span><br><span class="line">location.<span class="property">pathname</span><span class="comment">//获取路径</span></span><br><span class="line"></span><br><span class="line">location.<span class="property">search</span><span class="comment">//获取查询字符串</span></span><br><span class="line"> - 查询字符串格式：?name1=value1&amp;name2=value2</span><br><span class="line"></span><br><span class="line">location.<span class="property">hash</span> <span class="comment">//获取锚点</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">document下location</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span><span class="params">(window.loaction===window.document.location)</span>;<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">属性：</span><br><span class="line">方法</span><br><span class="line">    assign() <span class="comment">//跳转到指定页面，与href等效</span></span><br><span class="line">     - 产生历史记录</span><br><span class="line">    reload() <span class="comment">//刷新</span></span><br><span class="line">     - reload(<span class="literal">true</span>)<span class="comment">//不经浏览器缓存，强制重载</span></span><br><span class="line">	repalce()<span class="comment">//用新url替换当前页面</span></span><br><span class="line">     - 不产生记录</span><br></pre></td></tr></table></figure>

<h2 id="九-JavaScript-DOM"><a href="#九-JavaScript-DOM" class="headerlink" title="九. JavaScript-DOM"></a>九. JavaScript-DOM</h2><h3 id="1-元素节点的获取"><a href="#1-元素节点的获取" class="headerlink" title="1.元素节点的获取"></a>1.元素节点的获取</h3><ul>
<li>document object model(文档对象模型)<ul>
<li>document：html标签里的内容</li>
</ul>
</li>
<li>节点类型<ul>
<li>元素节点 <code>&lt;div&gt;&lt;/div&gt;</code></li>
<li>属性节点 id&#x3D;‘div1’</li>
<li>文本节点 标签里的文本</li>
</ul>
</li>
<li>元素节点的获取<ul>
<li>document.getElementById(id);<ul>
<li>功能：通过id获取符合条件的元素</li>
<li>返回值：获取到的一个节点</li>
</ul>
</li>
<li>node.getElementsByTagName(标签名);<ul>
<li>功能：从node节点开始通过标签名获取符合条件的元素节点</li>
<li>返回值：伪数组&#x2F;数组</li>
</ul>
</li>
<li>node.getElementsByClassName(class名字);(IE8以下不兼容)<ul>
<li>功能：从node节点开始通过class名字获取符合条件的元素节点</li>
<li>返回值：伪数组&#x2F;数组</li>
</ul>
</li>
<li>document.getElementsByName(name属性的值);<ul>
<li>功能：通过name属性的值获取符合条件的元素节点</li>
<li>返回值：伪数组&#x2F;数组</li>
<li>一般使用在表单元素里</li>
</ul>
</li>
<li>document.querySelector(); IE8以下不兼容<ul>
<li>返回值：一个元素节点，找到符合条件的第一个元素节点。</li>
<li>参数：字符串 CSS选择器格式字符串</li>
</ul>
</li>
<li>document.querySelectorAll() IE8以下不兼容<ul>
<li>返回值：伪数组&#x2F;数组</li>
<li>参数：字符串 CSS选择器格式字符串</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-获取当前有效样式"><a href="#2-获取当前有效样式" class="headerlink" title="2.获取当前有效样式"></a>2.获取当前有效样式</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	查找指定元素指定CSS属性值</span></span><br><span class="line"><span class="comment">	@ elem 指定的元素</span></span><br><span class="line"><span class="comment">	@ attr 指定的CSS属性</span></span><br><span class="line"><span class="comment">	@ return 返回对指定元素查找到的css属性值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getStyle</span>(<span class="params">elem,attr</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> elem.<span class="property">currentStyle</span> ? elem.<span class="property">currentStyle</span>[attr]:<span class="title function_">getComputedStyle</span>(elem)[attr];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//elem.currentStyle[attr]兼容ie</span></span><br><span class="line"><span class="comment">//getComputedStyle(elem)[attr]其他</span></span><br></pre></td></tr></table></figure>

<h3 id="3-attribute和元素节点属性"><a href="#3-attribute和元素节点属性" class="headerlink" title="3.attribute和元素节点属性"></a>3.attribute和元素节点属性</h3><h4 id="3-1-attribute"><a href="#3-1-attribute" class="headerlink" title="3.1.attribute"></a>3.1.attribute</h4><ul>
<li>setAttribute()<ul>
<li>添加指定的属性，并为其赋指定的值。如果这个指定的属性已存在，则仅设置&#x2F;更改值。</li>
</ul>
</li>
<li>getAttribute()<ul>
<li>返回指定属性名的属性值。</li>
</ul>
</li>
<li>removerAttribute()<ul>
<li>删除指定的属性。</li>
</ul>
</li>
<li>特点：<ul>
<li>1.class访问</li>
<li>2.支持自定义属性</li>
</ul>
</li>
</ul>
<h4 id="3-2-元素节点属性"><a href="#3-2-元素节点属性" class="headerlink" title="3.2.元素节点属性"></a>3.2.元素节点属性</h4><ul>
<li>innerHTML：获取标签间内容</li>
<li>innerText：获取标签间纯文本，不会解析标签，设置纯文本</li>
<li>outerHTML：从外标签开始到外标签借宿</li>
</ul>
<h3 id="4-获取文本子节点"><a href="#4-获取文本子节点" class="headerlink" title="4.获取文本子节点"></a>4.获取文本子节点</h3><ul>
<li>通过元素节点的子节点获取</li>
<li>获取元素子节点方法：</li>
<li>兼容ie6-8<ul>
<li>firstChild <ul>
<li>访问子节点中第一个</li>
</ul>
</li>
<li>lastChild<ul>
<li>访问子节点最后一个</li>
</ul>
</li>
<li>nextSibling<ul>
<li>下一同级节点</li>
</ul>
</li>
<li>previousSibling<ul>
<li>上一同级节点</li>
</ul>
</li>
</ul>
</li>
<li>兼容ie9-10 chrome firefox<ul>
<li>只获取元素节点</li>
<li>firstElementChild<ul>
<li>第一个节点</li>
</ul>
</li>
<li>lastElementChild<ul>
<li>最后一个节点</li>
</ul>
</li>
<li>nextElementSibling<ul>
<li>下一同级节点</li>
</ul>
</li>
<li>previousElementSibling<ul>
<li>上一同级节点</li>
</ul>
</li>
</ul>
</li>
<li>childNodes<ul>
<li>访问当前节点下所有子节点</li>
<li>获取：childNodes[]</li>
<li>特点：回车也会被当作节点</li>
</ul>
</li>
<li>children</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>nodeType</th>
<th>nodeName</th>
<th>nodeValue</th>
</tr>
</thead>
<tbody><tr>
<td>元素节点</td>
<td>1</td>
<td><strong>标签名</strong></td>
<td>null</td>
</tr>
<tr>
<td>属性节点</td>
<td>2</td>
<td>属性名</td>
<td>属性值</td>
</tr>
<tr>
<td>文本节点</td>
<td>3</td>
<td>#text</td>
<td><strong>文本内容</strong></td>
</tr>
</tbody></table>
<h3 id="5-属性节点attributes"><a href="#5-属性节点attributes" class="headerlink" title="5.属性节点attributes"></a>5.属性节点attributes</h3><ul>
<li>获取当前元素节点上的素有属性节点</li>
<li>返回值：集合对象</li>
<li>集合：无序、不重复</li>
</ul>
<p>获取其中某一个节点</p>
<ul>
<li>getNamedItem(“title”) 获取节点</li>
<li>节点.attributes.getNamedItem(“title”).nodeName; &#x2F;&#x2F;title 获取属性名</li>
<li>节点.attributes.getNamedItem(“title”).nodeType; &#x2F;&#x2F;2 获取属性类型</li>
<li>节点.attributes.getNamedItem(“title”).nodeValue; &#x2F;&#x2F;hello 获取属性值</li>
<li>繁琐，可以简化<ul>
<li>节点.attributes[“title”].nodeName; &#x2F;&#x2F;title 获取属性名</li>
<li>节点.attributes[“title”]..nodeType; &#x2F;&#x2F;2 获取属性类型</li>
<li>节点.attributes[“title”]..nodeValue; &#x2F;&#x2F;hello 获取属性值</li>
</ul>
</li>
</ul>
<h3 id="6-DOM节点操作"><a href="#6-DOM节点操作" class="headerlink" title="6. DOM节点操作"></a>6. DOM节点操作</h3><ul>
<li>document.write()<ul>
<li>覆盖页面上原有内容</li>
</ul>
</li>
<li>createElement()<ul>
<li>功能：创建一个元素节点</li>
<li>格式：document.createElement()</li>
<li>参数：标签名</li>
<li>返回值：创建好的这个节点</li>
</ul>
</li>
<li>appendChild()<ul>
<li>功能：将node2节点插入到node1节点子节点的末尾</li>
<li>格式：node1.appendChild(node2);</li>
</ul>
</li>
<li>createTextNode()<ul>
<li>功能：创建文本节点(纯文本，写标签也不解析)</li>
<li>格式：document.createTextNode(文本)</li>
</ul>
</li>
<li>insertBefore()<ul>
<li>功能：将box2添加到box1前面</li>
<li>格式：box1.parentNode.insertBefore(box2,box1);<ul>
<li><strong>注意</strong>：必须用box1的父节点进行调用</li>
</ul>
</li>
</ul>
</li>
<li>replaceChild()<ul>
<li>功能：用box2节点将box1节点替换掉</li>
<li>格式：box1.parentNode.replaceChild(box2,box1);<ul>
<li><strong>注意</strong>：必须用box1的父节点进行调用</li>
</ul>
</li>
</ul>
</li>
<li>cloneNode()<ul>
<li>功能：克隆node节点，子节点和行间内容不克隆</li>
<li>格式：node.cloneNode();</li>
<li>功能2：克隆node节点，子节点和行间内容也克隆</li>
<li>格式：node.cloneNode(true);</li>
<li>返回值：克隆出来的新节点</li>
</ul>
</li>
<li>removeChild()<ul>
<li>功能：删除box节点</li>
<li>格式：(box.parentNode).removeChild(box)<ul>
<li>注意：必须用box的父节点进行调用</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="7-this关键字"><a href="#7-this关键字" class="headerlink" title="7. this关键字"></a>7. this关键字</h3><ul>
<li><p>概念：只要封装函数，任何一个函数系统都会内置一个叫做this的变量，this变量存储的是地址，当前函数主人的地址。函数主人通过上下文判断。this类似于现实生活中，用到的“我”。</p>
</li>
<li><p>常用情况：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person=&#123;</span><br><span class="line">    <span class="attr">username</span>:<span class="string">&quot;钢铁侠&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>:<span class="string">&quot;男&quot;</span>,</span><br><span class="line">    <span class="attr">show</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="comment">//函数主人为person</span></span><br><span class="line">        <span class="title function_">alert</span>(person.<span class="property">username</span>);</span><br><span class="line">        <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">username</span>);<span class="comment">//2个结果一样</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">show</span>();<span class="comment">//全局函数 函数主人默认为window</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">show</span>();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">window.onload=function()&#123;</span><br><span class="line">    <span class="keyword">var</span> oBtn=dcument.getElementById(<span class="string">&quot;btn1&quot;</span>);</span><br><span class="line">    <span class="comment">//给页面上btn1的一个对象添加了一个函数</span></span><br><span class="line">    <span class="comment">//函数主人为当前按钮 this指向oBtn</span></span><br><span class="line">    oBtn.onclick=function()&#123;</span><br><span class="line">        alert(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="8-offset方法"><a href="#8-offset方法" class="headerlink" title="8. offset方法"></a>8. offset方法</h3><ul>
<li>offsetWidth</li>
<li>offsetHeight<ul>
<li>获取元素宽高 不带px </li>
<li>boorder和padding计算在内</li>
</ul>
</li>
<li>offsetLeft</li>
<li>offsetTop<ul>
<li>获取眼睛能看到的实际距离第一个有定位的父节点的距离。</li>
<li>不带px margin计算在内</li>
</ul>
</li>
</ul>
<h4 id="8-1-获取元素相对于视口的位置"><a href="#8-1-获取元素相对于视口的位置" class="headerlink" title="8.1. 获取元素相对于视口的位置"></a>8.1. 获取元素相对于视口的位置</h4><ul>
<li>getBoundingClientRect()<ul>
<li>getBoundingClientRect用于获取某个元素相对于视窗的位置集合。集合中有top, right, bottom, left等属性。</li>
</ul>
</li>
<li>返回值：<ul>
<li>div.getBoundingClientRect().top：名为div元素上边到视窗上边的距离;</li>
<li>div.getBoundingClientRect().right：名为div元素右边到视窗左边的距离;</li>
<li>div.getBoundingClientRect().bottom：名为div元素下边到视窗上边的距离;</li>
<li>div.getBoundingClientRect().left：名为div元素左边到视窗左边的距离;</li>
</ul>
</li>
</ul>
<h3 id="9-文档碎片"><a href="#9-文档碎片" class="headerlink" title="9. 文档碎片"></a>9. 文档碎片</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1.创建10w个节点，添加到页面上</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&quot;test1&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">100000</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">var</span> newDiv=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&quot;test1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	2.创建10w个节点，将10w节点插入到一个节点上，最后将这一个节点添加到页面上</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&quot;test2&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> node=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">100000</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">var</span> newDiv=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    node.<span class="title function_">appendChild</span>(newDiv);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(node);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&quot;test2&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一种方式耗时120毫秒 第二种耗时78毫秒</span></span><br><span class="line"><span class="comment">而第二种方式就是 文档碎片操作（效率高）</span></span><br><span class="line"><span class="comment">生活中的例子：</span></span><br><span class="line"><span class="comment">1.想吃干脆面，下楼买一趟，想喝可乐，再下楼一趟，想吃方便面，再下楼一趟。</span></span><br><span class="line"><span class="comment">2.一趟把东西买完。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="10-数组和对象的遍历方法"><a href="#10-数组和对象的遍历方法" class="headerlink" title="10. 数组和对象的遍历方法"></a>10. 数组和对象的遍历方法</h3><p>数组遍历：</p>
<ul>
<li><p>for循环</p>
</li>
<li><p>for…in快速遍历 (效率高无判断</p>
</li>
<li><p>forEach</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i++)&#123;</span><br><span class="line">	<span class="variable language_">document</span>.<span class="title function_">write</span>(i+<span class="string">&quot;,&quot;</span>+arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> arr)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(i+<span class="string">&quot;,&quot;</span>+arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item,index,arr</span>)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(indexi+<span class="string">&quot;,&quot;</span>+item);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<p>对象遍历:</p>
<ul>
<li><p>for…in</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person=&#123;</span><br><span class="line">    <span class="attr">username</span>:<span class="string">&quot;钢铁侠&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">    <span class="attr">sex</span>:<span class="string">&quot;男&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> person)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;属性名:&quot;</span>+i+<span class="string">&quot;属性值:&quot;</span>+person[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="九-JavaScript-事件"><a href="#九-JavaScript-事件" class="headerlink" title="九. JavaScript-事件"></a>九. JavaScript-事件</h2><h3 id="1-事件和事件类型"><a href="#1-事件和事件类型" class="headerlink" title="1.事件和事件类型"></a>1.事件和事件类型</h3><h4 id="1-1-什么是事件："><a href="#1-1-什么是事件：" class="headerlink" title="1.1. 什么是事件："></a>1.1. 什么是事件：</h4><ul>
<li>事件是发生并得到处理的操作，即事情来了，然后处理，例如：<ul>
<li>电话铃响起（事件发生），接电话（处理）</li>
<li>同学举手（事件发生），解答（处理）</li>
<li>按钮被点击（事件发生），对应一个函数来处理（处理）</li>
</ul>
</li>
</ul>
<h4 id="1-2-事件绑定方式"><a href="#1-2-事件绑定方式" class="headerlink" title="1.2. 事件绑定方式"></a>1.2. 事件绑定方式</h4><ul>
<li><p>JavaScript事件是由访问Web页面的用户引起的一系列操作，例如：用户点击。当用户执行某些操作的时候，再去执行一系列代码。</p>
</li>
<li><p>JavaScript有两种事件模型：内联模型、外联&#x2F;脚本模型。</p>
</li>
<li><p>内联模型：</p>
<ul>
<li><p>这种模型是最传统接单的一种处理事件的方法。在内联模型中，事件处理函数是HTML标签的一个属性，用于处理指定事件。虽然内联在早期使用较多</p>
</li>
<li><pre><code class="html">&lt;button onclick=&#39;btn();&#39;&gt; &lt;/button&gt;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- 外联模型：</span><br><span class="line"></span><br><span class="line">  - ```javascript</span><br><span class="line">    var btn=document.getElementById(&quot;btn1&quot;);</span><br><span class="line">    btn.onclick=function()&#123;</span><br><span class="line">        alert(&quot;外连模式&quot;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>绑定格式：</p>
<ul>
<li><strong>元素节点.on+事件类型&#x3D;匿名函数。</strong></li>
<li>click      事件类型</li>
<li>onclick 事件处理的函数</li>
</ul>
</li>
</ul>
</li>
<li><p>实际开发中我们希望js代码和html css是分离的 所以推荐使用外联模型。</p>
</li>
</ul>
<h4 id="1-3-事件类型的种类"><a href="#1-3-事件类型的种类" class="headerlink" title="1.3. 事件类型的种类"></a>1.3. 事件类型的种类</h4><p>一、鼠标事件(可以绑定在任何元素节点上)</p>
<table>
<thead>
<tr>
<th>事件名</th>
<th>事件详情</th>
</tr>
</thead>
<tbody><tr>
<td>click</td>
<td>单击</td>
</tr>
<tr>
<td>dblclick</td>
<td>双击</td>
</tr>
<tr>
<td>mouseover</td>
<td>鼠标移入</td>
</tr>
<tr>
<td>mouseout</td>
<td>鼠标移出</td>
</tr>
<tr>
<td>mousemove</td>
<td>鼠标移动（不停触发</td>
</tr>
<tr>
<td>mouseenter</td>
<td>鼠标移入</td>
</tr>
<tr>
<td>mouseleave</td>
<td>鼠标移出</td>
</tr>
</tbody></table>
<ul>
<li><p>mouserleave和mouseout的区别</p>
</li>
<li><p>mouseleave是当鼠标指针离开了目标元素以及目标元素的所有子元素以后才会触发。</p>
<p>而mouseout是只要鼠标指针离开了目标元素或者目标元素的所有子元素中的任何一个就会被触发，即使鼠标指针还在目标元素内。也就是离开子元素后，mouseout事件会冒泡到父元素上。直到取消了冒泡或者到达了最外层根元素，才会停止冒泡。</p>
</li>
<li><p><a href="https://www.w3school.com.cn/tiy/t.asp?f=jquery_event_mouseleave_mouseout">https://www.w3school.com.cn/tiy/t.asp?f=jquery_event_mouseleave_mouseout</a></p>
</li>
<li><p>mouseenter与mouseove同理</p>
<ul>
<li>mouseenter经过子节点不会重复触发</li>
<li>mouserover经过子节点会重复触发</li>
</ul>
</li>
</ul>
<p>二、键盘事件（表单元素、全局window）</p>
<ul>
<li>keydown<ul>
<li>键盘按下（不放手 一直触发</li>
</ul>
</li>
<li>keyup<ul>
<li>键盘抬起</li>
</ul>
</li>
<li>keypress<ul>
<li>键盘按下（只支持字符键,例如数字，英文字符键）</li>
</ul>
</li>
</ul>
<p>三、HTML事件</p>
<ol>
<li>window事件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- load</span><br><span class="line">  </span><br><span class="line">  - 页面加载完以后触发</span><br><span class="line">- unload</span><br><span class="line">  </span><br><span class="line">  - 当页面解构的时候触发（刷新,关闭）仅兼容ie</span><br><span class="line">- scroll</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- 页面滚动</span><br><span class="line">  - resize</span><br><span class="line">    - 窗口大小发生变化</span><br><span class="line">     	2. 表单事件</span><br><span class="line">  - blur</span><br><span class="line">    </span><br><span class="line">    - 失去焦点</span><br><span class="line">  - foucs</span><br><span class="line">    </span><br><span class="line">    - 获取焦点</span><br><span class="line">  - select</span><br><span class="line">    </span><br><span class="line">    - 当我们在输入框内选中文本的时候触发</span><br><span class="line">  - change</span><br><span class="line">    </span><br><span class="line">    - 当我们对输入框的文本进行修改并且失去焦点的时候</span><br><span class="line">  - 必须添加到form元素的事件</span><br><span class="line">    - submit</span><br><span class="line">      - 当我们点击submit的按钮才能触发</span><br><span class="line">    - reset</span><br><span class="line">      - 当我们点击reset的按钮才能触发</span><br></pre></td></tr></table></figure>

<h3 id="2-事件对象和事件对象属性"><a href="#2-事件对象和事件对象属性" class="headerlink" title="2. 事件对象和事件对象属性"></a>2. 事件对象和事件对象属性</h3><h4 id="2-1-事件对象"><a href="#2-1-事件对象" class="headerlink" title="2.1. 事件对象"></a>2.1. 事件对象</h4><ul>
<li><p>引例：番茄炒蛋 番茄+鸡蛋+条例炒出来的味道是全新的味道，不是番茄也不是鸡蛋的味道了</p>
</li>
<li><p>事件绑定：</p>
<ul>
<li>元素节点.on + 事件类型&#x3D;匿名函数；</li>
</ul>
</li>
<li><p>系统会在事件绑定完成的时候，生成一个事件对象，将事件对象当作第一个参数传入</p>
</li>
<li><p>触发事件的时候，系统会自动去调用事件绑定的函数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="variable language_">arguments</span>.<span class="property">length</span>);<span class="comment">//1</span></span><br><span class="line">    <span class="title function_">alert</span>(<span class="variable language_">arguments</span>[<span class="number">0</span>]);<span class="comment">//object MouseEvent</span></span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> btn=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn1&quot;</span>);</span><br><span class="line">    btn.<span class="property">onclick</span>=show;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以设置一个形参，传入事件对象的时候可以通过形参拿到 ie8以下不兼容</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params">ev</span>)&#123;</span><br><span class="line">    <span class="comment">//浏览器兼容</span></span><br><span class="line">	<span class="keyword">var</span> ev = ev || <span class="variable language_">window</span>.<span class="property">event</span></span><br><span class="line">    </span><br><span class="line">	<span class="title function_">alert</span>(<span class="variable language_">arguments</span>.<span class="property">length</span>);<span class="comment">//1</span></span><br><span class="line">    <span class="title function_">alert</span>(<span class="variable language_">arguments</span>[<span class="number">0</span>]);<span class="comment">//object MouseEvent</span></span><br><span class="line">    <span class="title function_">alert</span>(ev)<span class="comment">//object MouseEvent </span></span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> btn=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn1&quot;</span>);</span><br><span class="line">    btn.<span class="property">onclick</span>=show;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>最终写法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> btn=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn1&quot;</span>);</span><br><span class="line">    btn.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">ev</span>)&#123;</span><br><span class="line">        <span class="comment">//事件对象获取,固定写法</span></span><br><span class="line">        <span class="keyword">var</span> ev=ev||<span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line">        <span class="title function_">alert</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-2-事件对象属性"><a href="#2-2-事件对象属性" class="headerlink" title="2.2. 事件对象属性"></a>2.2. 事件对象属性</h4><ul>
<li>button属性<ul>
<li>0 按下鼠标左键</li>
<li>1 滚轮</li>
<li>2 右键</li>
</ul>
</li>
</ul>
<p>获取当前鼠标位置：区别（原点位置不同）</p>
<ul>
<li>clientX   clientY<ul>
<li>可视窗口的左上角为原点</li>
</ul>
</li>
<li>pageX    pageY<ul>
<li>整个页面的左上角(包含滚动出去的距离)</li>
</ul>
</li>
<li>screenX screenY<ul>
<li>电脑屏幕的左上角</li>
</ul>
</li>
</ul>
<p>获取功能键：</p>
<ul>
<li>shiftKey<ul>
<li>按下shift键，为true，默认为false</li>
</ul>
</li>
<li>altKey<ul>
<li>按下alt键，为true，默认为false</li>
</ul>
</li>
<li>ctrlKey<ul>
<li>按下ctrl键，为true，默认为false</li>
</ul>
</li>
<li>metaKey<ul>
<li>windows系统 按下windows（开始）键，为true</li>
<li>macos系统 按下command键，为true</li>
</ul>
</li>
<li>可以和别的操作进行组合，形成一些快捷键操作。</li>
</ul>
<p>获取键码</p>
<ul>
<li>keyCode (兼容ie) 和 which    <ul>
<li>格式：var which &#x3D; e.which || e.keyCode;</li>
<li>返回值：大写字母的ASCII码值。不区分大小写。</li>
<li>只在keydown下支持</li>
</ul>
</li>
</ul>
<p>获取字符码</p>
<ul>
<li>charCode (兼容ie) 和 which<ul>
<li>格式：var which &#x3D; e.which || e.charCode;</li>
<li>返回值：区分大小写的ASCII码值。</li>
<li>只在keypress下支持，只支持字符键。</li>
</ul>
</li>
</ul>
<h3 id="3-目标对象和事件冒泡"><a href="#3-目标对象和事件冒泡" class="headerlink" title="3. 目标对象和事件冒泡"></a>3. 目标对象和事件冒泡</h3><h4 id="3-1-目标对象target"><a href="#3-1-目标对象target" class="headerlink" title="3.1. 目标对象target"></a>3.1. 目标对象target</h4><ul>
<li><p>概念：是事件对象的属性，代表触发对象</p>
<ul>
<li>触发对象：事件由谁而起的</li>
</ul>
</li>
<li><p>兼容IE8：window.event.srcElement;</p>
</li>
<li><p>例子：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> li=doucment.<span class="title function_">getElementById</span>(<span class="string">&quot;li1&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    li.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">ev</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> e=ev||<span class="variable language_">window</span>.<span class="property">event</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> target = e.<span class="property">target</span>||<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">srcElement</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(target.<span class="property">innerHTML</span>);<span class="comment">//1111</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ul=doucment.<span class="title function_">getElementById</span>(<span class="string">&quot;ul1&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    li.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">ev</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> e=ev||<span class="variable language_">window</span>.<span class="property">event</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> target = e.<span class="property">target</span>||<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">srcElement</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//点击内容2222的li</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">tagName</span>);<span class="comment">//ul  this指向函数主人ul</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(target.<span class="property">innerHTML</span>);<span class="comment">//2222 由li而起的</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//就好像隔了一层纸打了你一下，然后你叫了一声，但是我打的是纸，触发对象是纸，疼的是你。</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&#x27;ul1&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&#x27;li1&#x27;</span>&gt;</span>1111<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>2222<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-2-事件冒泡与捕获"><a href="#3-2-事件冒泡与捕获" class="headerlink" title="3.2. 事件冒泡与捕获"></a>3.2. 事件冒泡与捕获</h4><ul>
<li><p>冒泡：一个页面中的多个dom如果呈现父子类关系，并且都绑定了事件，则会有事件冒泡的情况发生，从最里面的dom冒泡到外层，<strong>由里向外逐级触发</strong>。</p>
</li>
<li><p>捕获：冒泡反过来，由外向里逐级触发</p>
</li>
<li><p>阻止事件冒泡：</p>
<ul>
<li>event.stopPropagation()</li>
<li>event.cancelBubble&#x3D;true;</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">stopbUBBLE</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(e.<span class="property">stopPropagation</span>)&#123;</span><br><span class="line">        e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        e.<span class="property">cancelBubble</span>=<span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="4-阻止默认行为"><a href="#4-阻止默认行为" class="headerlink" title="4.阻止默认行为"></a>4.阻止默认行为</h3><p>1.阻止官方右键菜单</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//关闭官方右键菜单</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">oncontextmenu</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.阻止超链接跳转</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">link.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">evt</span>)&#123;</span><br><span class="line">    evt.<span class="title function_">preventDefault</span>();<span class="comment">//W3C，阻止默认行为，放哪里都可以</span></span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">link.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">ev</span>)&#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">returnValue</span>=<span class="literal">false</span>;<span class="comment">//IE，阻止默认行为</span></span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//兼容写法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">preDef</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">preventDefault</span>) &#123;</span><br><span class="line">        e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">returnValue</span>=<span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>案例：自定义右键菜单，跳转链接阻止加操作</p>
<h3 id="5-实现拖拽使用到的事件"><a href="#5-实现拖拽使用到的事件" class="headerlink" title="5.实现拖拽使用到的事件"></a>5.实现拖拽使用到的事件</h3><p>拖拽：</p>
<ul>
<li>mousedown<ul>
<li>记录鼠标按下位置和被拖拽物体相对距离</li>
</ul>
</li>
<li>mousemove<ul>
<li>一直保持相对距离</li>
</ul>
</li>
<li>mouseup<ul>
<li>取消拖拽</li>
</ul>
</li>
</ul>
<h3 id="6-事件委托"><a href="#6-事件委托" class="headerlink" title="6. 事件委托"></a>6. 事件委托</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> ul=<span class="variable language_">document</span>.<span class="title function_">getElementByid</span>(<span class="string">&quot;ul&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> li=docuemnt.<span class="title function_">getElementByTagName</span>(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//添加点击事件</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;li.<span class="property">length</span>;i++)&#123;</span><br><span class="line">        li[i].<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span>=<span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    	这种添加方法</span></span><br><span class="line"><span class="comment">    	 - 1.浪费</span></span><br><span class="line"><span class="comment">    	 - 2.如果新增节点是没有事件的</span></span><br><span class="line"><span class="comment">    	相当于5个人想喝水一个人带一个水龙头(函数) 谁要喝就拧上去，喝完把水龙头拧下来。而且新来的同学不知道规矩没有水龙头(惨)</span></span><br><span class="line"><span class="comment">    	</span></span><br><span class="line"><span class="comment">    	解决这种情况的方式就叫事件委托</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	委托：</span></span><br><span class="line"><span class="comment">		A委托B去买饭。</span></span><br><span class="line"><span class="comment">		A发布任务 委托方</span></span><br><span class="line"><span class="comment">		B执行任务 受理方</span></span><br><span class="line"><span class="comment">		A要吃饭 B去买饭 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	事件委托步骤：</span></span><br><span class="line"><span class="comment">	 - 1.找到当前节点的父节点或者祖先节点</span></span><br><span class="line"><span class="comment">	 - 2.将事件添加到你找的父节点或者祖先节点上</span></span><br><span class="line"><span class="comment">	 - 3.找到触发对象，判断触发对象是否是想要的触发对象，进行后续操作。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    	li要变红</span></span><br><span class="line"><span class="comment">    	li委托ul去做</span></span><br><span class="line"><span class="comment">    	li变红</span></span><br><span class="line"><span class="comment">    	</span></span><br><span class="line"><span class="comment">    	li要吃饭</span></span><br><span class="line"><span class="comment">    	ul去买饭</span></span><br><span class="line"><span class="comment">    	li吃到饭</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">var</span> ul=<span class="variable language_">document</span>.<span class="title function_">getElementByid</span>(<span class="string">&quot;ul&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    ul.<span class="property">onclickk</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> e=ev||<span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line">        <span class="keyword">var</span> target=e.<span class="property">target</span>||<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">srcElement</span>;</span><br><span class="line">        <span class="keyword">if</span>(target.<span class="property">nodeName</span>.<span class="title function_">toLowerCase</span>()==<span class="string">&quot;li&quot;</span>)&#123;</span><br><span class="line">            target.<span class="property">style</span>.<span class="property">backgroundColor</span>=<span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//所有li的变红都由ul的一个点击函数实现 1.不浪费 2.新增li也可以添加到效果,相当于5个同学 用一个水龙头(函数)。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-事件监听器"><a href="#7-事件监听器" class="headerlink" title="7. 事件监听器"></a>7. 事件监听器</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//传统事件绑定格式</span></span><br><span class="line"><span class="keyword">var</span> btn=docuement.<span class="title function_">getElementById</span>(<span class="string">&quot;btn1&quot;</span>);</span><br><span class="line">btn.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;点击1&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">btn.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;点击2&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	缺点:</span></span><br><span class="line"><span class="comment">	 - 1.重复添加覆盖</span></span><br><span class="line"><span class="comment">	 	- 因为是赋值，覆盖，点击后输出点击2</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	事件监听器：</span></span><br><span class="line"><span class="comment">	 - 事件绑定的另一种方式</span></span><br><span class="line"><span class="comment">	 - addEventListener()</span></span><br><span class="line"><span class="comment">	  - 格式：node.addEventListener(“click”)</span></span><br><span class="line"><span class="comment">	  - 参数：</span></span><br><span class="line"><span class="comment">	   - 1.事件类型</span></span><br><span class="line"><span class="comment">	   - 2.绑定函数</span></span><br><span class="line"><span class="comment">	   - 3.布尔值 true:捕获 false:冒泡（默认</span></span><br><span class="line"><span class="comment">	 - removeEventListener()</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//事件监听器绑定格式</span></span><br><span class="line"><span class="keyword">var</span> btn=docuement.<span class="title function_">getElementById</span>(<span class="string">&quot;btn1&quot;</span>);</span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;点击1&quot;</span>);</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;点击2&quot;</span>);</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	优点：</span></span><br><span class="line"><span class="comment">		1.不会覆盖</span></span><br><span class="line"><span class="comment">		2.可精确删除某个函数</span></span><br><span class="line"><span class="comment">	适用情况：</span></span><br><span class="line"><span class="comment">		- 给一个控件添加多个函数</span></span><br><span class="line"><span class="comment">		- 精确删除某一个函数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//点击后输出点击1然后输出点击2</span></span><br><span class="line"><span class="comment">//应用情况：写了好多代码 想加功能 不用回去找</span></span><br></pre></td></tr></table></figure>

<h4 id="事件监听器兼容"><a href="#事件监听器兼容" class="headerlink" title="事件监听器兼容"></a>事件监听器兼容</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addEvent</span>(<span class="params">node,evenType,funcName</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(node.<span class="property">addEventListener</span>)&#123;</span><br><span class="line">		node.<span class="title function_">addEventListener</span>(evenType,funcName,<span class="literal">false</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        node.<span class="title function_">attachEvent</span>(<span class="string">&quot;on&quot;</span>+evenType,funcName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">removeEvent</span>(<span class="params">node,evenType,funcName</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(node.<span class="property">removeEventListener</span>)&#123;</span><br><span class="line">        node.<span class="title function_">removeEventListener</span>(eventType,funcName);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        node.<span class="title function_">detachEvent</span>(<span class="string">&quot;on&quot;</span>+eventType,funcName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>案例：生成表格，放大镜</p>
<h3 id="十-JavaScript-正则表达式"><a href="#十-JavaScript-正则表达式" class="headerlink" title="十. JavaScript-正则表达式"></a>十. JavaScript-正则表达式</h3><h3 id="1-概念"><a href="#1-概念" class="headerlink" title="1. 概念"></a>1. 概念</h3><ul>
<li>用途<ul>
<li>假设用户需要在HTML表单中填写姓名、地址、出生日期等。那么在将表单提交到服务器进一步处理之前，JavaScript程序会检查表单确认用户确实输入了信息并且这些信息是符合要求的。</li>
</ul>
</li>
<li>概念：<ul>
<li>正则表达式（regular expression）是一个描述字符模式的对象。ECMAScript的RegExp类表示正则表达式，而String和正则表达式都定义了进行强大的<strong>模式匹配</strong>和<strong>文本检索</strong>与<strong>替换</strong>的函数</li>
</ul>
</li>
</ul>
<h3 id="2-创建正则表达式"><a href="#2-创建正则表达式" class="headerlink" title="2. 创建正则表达式"></a>2. 创建正则表达式</h3><ol>
<li><p>通过new去声明正则表达式</p>
<ul>
<li>参数1：正则表达式主体（字符串</li>
<li>参数2：修饰符 i&#x2F;g</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> box1=<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;ig&quot;</span>);</span><br><span class="line"><span class="title function_">alert</span>(box1) <span class="comment">// 	/hello/gi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>省略new运算符声明正则表达式</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> box1=<span class="title class_">RegExp</span>(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;ig&quot;</span>);</span><br><span class="line"><span class="title function_">alert</span>(box1) <span class="comment">// 	/hello/gi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>通过常量赋值声明正则表达式</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> box1=<span class="regexp">/hello/gi</span>;</span><br><span class="line"><span class="title function_">alert</span>(box1) <span class="comment">// 	/hello/gi</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-正则表达式方法"><a href="#3-正则表达式方法" class="headerlink" title="3. 正则表达式方法"></a>3. 正则表达式方法</h3><ul>
<li>test<ul>
<li>格式：正则.test(字符串)</li>
<li>功能：在字符串中匹配这个正则是否存在</li>
<li>返回值：成功返回true，失败返回false</li>
</ul>
</li>
<li>exec<ul>
<li>格式：正则.exec(字符串)</li>
<li>功能：在字符串中匹配这个正则是否存在</li>
<li>返回值：返回匹配到的字符串，成功返回数组，失败返回null</li>
</ul>
</li>
</ul>
<h3 id="4-可使用正则表达式的字符串方法"><a href="#4-可使用正则表达式的字符串方法" class="headerlink" title="4.可使用正则表达式的字符串方法"></a>4.可使用正则表达式的字符串方法</h3><ul>
<li><p>match()</p>
<ul>
<li>格式：字符串.match(正则);</li>
<li>功能：字符串中匹配是否有符合的字符串</li>
<li>返回值：成功返回装有匹配到字符串的数组，失败返回null</li>
</ul>
</li>
<li><p>replace()</p>
<ul>
<li><p>格式：字符串.replace(旧字符串&#x2F;正则,新字符串);</p>
</li>
<li><p>功能：新替换旧</p>
</li>
<li><p>返回值：替换成功的新字符串</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;how are Are ARE you&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr=str.<span class="title function_">replace</span>(<span class="regexp">/are/ig</span>,<span class="string">&quot;*&quot;</span>);</span><br><span class="line"><span class="title function_">alert</span>(newStr) <span class="comment">// how * * * you</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>split()</p>
<ul>
<li><p>格式：字符串.replace(分隔符&#x2F;正则);</p>
</li>
<li><p>功能：用分隔符将原字符串进行分割</p>
</li>
<li><p>返回值：分割剩下的子串组成的数组。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;how are Are ARE you&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr=str.<span class="title function_">split</span>(<span class="regexp">/are/i</span>);</span><br><span class="line"><span class="title function_">alert</span>(arr);<span class="comment">//how,,,you</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>search()</p>
<ul>
<li><p>格式：字符串.search(字符串&#x2F;正则);</p>
</li>
<li><p>功能：找到符合字符串第一次出现位置</p>
</li>
<li><p>返回值：找到返回&gt;&#x3D;0下标，否则返回-1</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;how Are are ARE you&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr=str.<span class="title function_">search</span>(<span class="regexp">/are/i</span>);</span><br><span class="line"><span class="title function_">alert</span>(arr);<span class="comment">//4</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="5-元字符"><a href="#5-元字符" class="headerlink" title="5.元字符"></a>5.元字符</h3><ul>
<li>概念：在正则表达式中有特殊含义的字符串</li>
</ul>
<h4 id="5-1-常用元字符"><a href="#5-1-常用元字符" class="headerlink" title="5.1. 常用元字符"></a>5.1. 常用元字符</h4><table>
<thead>
<tr>
<th>元字符</th>
<th>匹配情况</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>匹配除换行符外任意单个字符</td>
</tr>
<tr>
<td>[a-z0-9]</td>
<td>匹配括号中字符集任意字符</td>
</tr>
<tr>
<td>[^a-z0-9]</td>
<td>匹配不在括号中字符集的字符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td>\D</td>
<td>匹配非数字同[ ^0-9]相同</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母数字下划线</td>
</tr>
<tr>
<td>\W</td>
<td>匹配非字母数字下划线</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>元字符</th>
<th>匹配情况</th>
</tr>
</thead>
<tbody><tr>
<td>x?</td>
<td>匹配0或1个x</td>
</tr>
<tr>
<td>x*</td>
<td>匹配0或任意多个x</td>
</tr>
<tr>
<td>x+</td>
<td>匹配至少一个x</td>
</tr>
<tr>
<td>(xyz)+</td>
<td>匹配至少一个xyz</td>
</tr>
<tr>
<td>x{m,n}</td>
<td>匹配最少m个、最多n个x</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>元字符</th>
<th>匹配情况</th>
</tr>
</thead>
<tbody><tr>
<td>\s</td>
<td>匹配空白字符、空格、制表符和换行符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配非空白字符</td>
</tr>
<tr>
<td>\0</td>
<td>匹配null字符</td>
</tr>
<tr>
<td>\b</td>
<td>匹配空格字符</td>
</tr>
<tr>
<td>\f</td>
<td>匹配换页符</td>
</tr>
<tr>
<td>\n</td>
<td>匹配换行字符</td>
</tr>
<tr>
<td>\r</td>
<td>匹配回车字符</td>
</tr>
<tr>
<td>\t</td>
<td>匹配制表符</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>元字符</th>
<th>匹配情况</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>必须以这个正则开头</td>
</tr>
<tr>
<td>$</td>
<td>必须以这个正则结尾</td>
</tr>
<tr>
<td>|</td>
<td>两项之间的一个选择</td>
</tr>
</tbody></table>
<ul>
<li>案例：输入框密码框验证</li>
</ul>
<h2 id="十一-localStorage"><a href="#十一-localStorage" class="headerlink" title="十一. localStorage"></a>十一. localStorage</h2><h3 id="1-什么是localStorage"><a href="#1-什么是localStorage" class="headerlink" title="1.什么是localStorage"></a>1.什么是localStorage</h3><p>​	loacalStorage本地存储对象	</p>
<p>​	在HTML5中，新加入了一个loaclStorage特性，这个特性作为本地存储使用，解决了cookie存储空间不足问题（每条cookie的存储空间为4k），localStorage中一般浏览器支持的是5M大小，这个在不同浏览器中localStoarage会有所不同。</p>
<h3 id="2-localStorage优势与局限"><a href="#2-localStorage优势与局限" class="headerlink" title="2.localStorage优势与局限"></a>2.localStorage优势与局限</h3><ul>
<li>localStorage的优势<ul>
<li>localStorage拓展了cookie的4K限制</li>
<li>localStorage可以将第一次请求的数据直接存储到本地，相当于5M大小针对前端页面的数据库，相比cookie可以节约带宽，高版本浏览器才支持</li>
</ul>
</li>
<li>localStorage的局限<ul>
<li>浏览器大小不统一，ie8以上才支持</li>
<li>值类型为string，相比常见的JSON对象类型需要转换</li>
<li>在浏览器隐私模式下不可读取</li>
<li>本质是对字符串读取，存储内容多会消耗内存空间，导致页面变卡</li>
<li>不能被爬虫抓取到</li>
<li>永久性存储</li>
</ul>
</li>
</ul>
<h3 id="3-cookie"><a href="#3-cookie" class="headerlink" title="3.cookie"></a>3.cookie</h3><ol>
<li>可以设置过期时间</li>
<li>最大可以存4KB</li>
<li>每一个域名下最多可以存储50条数据</li>
</ol>
<h3 id="4-sessionStorage"><a href="#4-sessionStorage" class="headerlink" title="4.sessionStorage"></a>4.sessionStorage</h3><ul>
<li>结合后端</li>
<li>保留一次对话</li>
</ul>
<h3 id="5-localStorage方法"><a href="#5-localStorage方法" class="headerlink" title="5.localStorage方法"></a>5.localStorage方法</h3><ul>
<li><p>setItem(name,value);</p>
</li>
<li><p>getItem(name);</p>
</li>
<li><p>removeItem(name);</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="variable language_">window</span>.<span class="property">localStorage</span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;当前页面不支持localStorage&quot;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//设置</span></span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="property">b</span>=<span class="string">&#x27;2&#x27;</span>;</span><br><span class="line">    <span class="variable language_">localStorage</span>[<span class="string">&quot;c&quot;</span>]=<span class="string">&#x27;3&#x27;</span>;</span><br><span class="line">    <span class="comment">//获取</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;b&quot;</span>));</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">localStorage</span>.<span class="property">c</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">localStorage</span>[<span class="string">&#x27;a&#x27;</span>]);</span><br><span class="line">	<span class="comment">//删除</span></span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="十二-强制改变this指向函数"><a href="#十二-强制改变this指向函数" class="headerlink" title="十二. 强制改变this指向函数"></a>十二. 强制改变this指向函数</h2><ul>
<li><p>this回顾</p>
<ul>
<li><p>每一个函数的内置变量 指向当前函数主人</p>
</li>
<li><p>全局函数this指向window对象</p>
</li>
<li><p>对象内的函数的this指向对应名称对象</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person=&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;123&quot;</span>;</span><br><span class="line">    <span class="attr">show</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span>;<span class="comment">//this指向person</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>绑定事件的函数中的this指向绑定函数的对象</p>
</li>
</ul>
</li>
<li><p>call()</p>
<ul>
<li>格式：函数名.call();</li>
<li>参数1：传入改函数this指向的对象，传入什么强制指向什么</li>
<li>参数2：将原函数的参数往后顺延一位。</li>
</ul>
</li>
<li><p>apply()</p>
<ul>
<li><p>格式：函数名.apply();</p>
</li>
<li><p>参数1：传入改函数this指向的对象，传入什么强制指向什么</p>
</li>
<li><p>参数2：数组，放入我们原有所有参数</p>
</li>
<li><p>apply()应用小技巧</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="title function_">alert</span>(<span class="title class_">Math</span>.<span class="property">min</span>.<span class="title function_">apply</span>(<span class="literal">null</span>,arr))</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>bind() 预设this指向</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params">x,y</span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="title function_">alert</span>(x+<span class="string">&quot;,&quot;</span>+y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> res=show.<span class="title function_">bind</span>(<span class="string">&quot;bind&quot;</span>);<span class="comment">//不调用</span></span><br><span class="line"><span class="title function_">res</span>(<span class="number">40</span>,<span class="number">50</span>);<span class="comment">//bing 40,50</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>三者区别点：</p>
<ol>
<li>call和apply会调用函数，并改变函数内部this指向</li>
<li>call和apply传递的参数不一样，call传递参数aru1，aru2…形式，apply必须数组形式[arg]</li>
<li>bind不会调用函数，可以改变函数内部this指向。</li>
</ol>
</li>
<li><p>主要应用场景：</p>
<ol>
<li>call常做继承</li>
<li>apply经常跟数组有关系，比如借助math对象实现数组最大值最小值</li>
<li>bind不调用函数，但想改变this指向，比如改变定时器内部的this指向</li>
</ol>
</li>
</ul>
<h2 id="十三-let和const关键字"><a href="#十三-let和const关键字" class="headerlink" title="十三. let和const关键字"></a>十三. let和const关键字</h2><h3 id="1-let关键字"><a href="#1-let关键字" class="headerlink" title="1. let关键字"></a>1. let关键字</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//类似var 但是所声明的变量，只在let命令所在的代码块内有效。</span></span><br><span class="line"><span class="comment">//不存在变量提升</span></span><br><span class="line"><span class="comment">//暂时性死区 只要一进入当前作用域，所要使用的变量就已经存在了，但是不可获取，只有等到声明变量的那一行代码出现，才可以获取和使用该变量。</span></span><br><span class="line"><span class="comment">//不允许重复声明</span></span><br><span class="line"><span class="comment">//应用在循环中每次不同循环会生成不同作用域</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> a=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">let</span> b=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">alert</span>(a);<span class="comment">//报错</span></span><br><span class="line"><span class="title function_">alert</span>(b);</span><br></pre></td></tr></table></figure>

<h3 id="2-const关键字"><a href="#2-const关键字" class="headerlink" title="2. const关键字"></a>2. const关键字</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	变量值只能在声明时确定 后续无法修改</span></span><br><span class="line"><span class="comment">	相当于常量</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">IP</span>=<span class="string">&quot;10.30.152.33&quot;</span>;</span><br><span class="line"><span class="comment">//避免中途被修改</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">IP</span>=<span class="string">&quot;10.30.152.33&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="十四-箭头函数"><a href="#十四-箭头函数" class="headerlink" title="十四. 箭头函数"></a>十四. 箭头函数</h2><ul>
<li>箭头函数：另一种函数写法</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> x+<span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">add</span>=x =&gt; x+<span class="number">10</span>;</span><br><span class="line"><span class="comment">//适当省略 函数中的function和return关键字。除了形式不一样其他完全一样。不推荐使用，可读性差</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.无参数，无返回值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">show</span>=(<span class="params"></span>) =&gt; &#123;<span class="title function_">alert</span>(<span class="string">&quot;1&quot;</span>)&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.有一个参数，无返回值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">xxx</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(num);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">xxx</span>=num =&gt;&#123;<span class="title function_">alert</span>(num);&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.有一个参数，有返回值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> x+<span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">add</span>=x =&gt; x+<span class="number">10</span>;</span><br><span class="line"><span class="comment">//==================</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x</span>)&#123;</span><br><span class="line">    <span class="comment">//代码</span></span><br><span class="line">    <span class="keyword">return</span> x+<span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">add</span>=x =&gt; &#123;</span><br><span class="line">	<span class="comment">//代码    	</span></span><br><span class="line">    <span class="keyword">return</span> x+<span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.多个参数，有返回值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params">x,y</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">alert</span>(x+y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">show</span>=(<span class="params">x,y</span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">alert</span>(x+y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>与数组方法结合使用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//filter 过滤</span></span><br><span class="line"><span class="keyword">var</span> arr=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">var</span> newArr=arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">item</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> item&gt;<span class="number">2</span>;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_">alert</span>(newArr);<span class="comment">//3,4,5,6</span></span><br><span class="line"><span class="comment">//转换成箭头函数</span></span><br><span class="line"><span class="keyword">var</span> newArr=arr.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item&gt;<span class="number">2</span>);</span><br><span class="line"><span class="comment">//====================</span></span><br><span class="line"><span class="keyword">var</span> newArr=arr.<span class="title function_">map</span>(<span class="function"><span class="params">item</span>=&gt;</span>item*<span class="number">1.3</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意：</p>
<ul>
<li>箭头函数不能用new</li>
<li>返回值是对象一定要加();</li>
<li>箭头函数中的this指向上一层函数主人,没有上一层指向window</li>
</ul>
</li>
</ul>
<h2 id="十五-解构和ECMA6字符串"><a href="#十五-解构和ECMA6字符串" class="headerlink" title="十五. 解构和ECMA6字符串"></a>十五. 解构和ECMA6字符串</h2><h3 id="1-解构"><a href="#1-解构" class="headerlink" title="1. 解构"></a>1. 解构</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x=<span class="number">10</span>,y=<span class="number">20</span>,z=<span class="number">30</span>;</span><br><span class="line"><span class="keyword">var</span> [x,y,z]=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>];</span><br><span class="line"><span class="keyword">var</span> [x,[y,z]]=[<span class="number">10</span>,[<span class="number">20</span>,<span class="number">30</span>]];</span><br><span class="line"><span class="comment">//上面3个效果一样</span></span><br><span class="line"><span class="keyword">var</span> name=<span class="string">&quot;钢铁侠&quot;</span>,age=<span class="number">18</span>,sex=<span class="string">&quot;男&quot;</span></span><br><span class="line"><span class="keyword">var</span> &#123;name,age,sex&#125;=&#123;</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;钢铁侠&quot;</span>,</span><br><span class="line">    <span class="attr">sex</span>:<span class="string">&quot;男&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//上面2个效果一样</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	好处：</span></span><br><span class="line"><span class="comment">		1.交换2个值</span></span><br><span class="line"><span class="comment">		2.函数可以返回多个值</span></span><br><span class="line"><span class="comment">		3.函数定义参数和传入参数顺序改变</span></span><br><span class="line"><span class="comment">			- 参数可以带默认值</span></span><br><span class="line"><span class="comment">		4.快速取出数组中某一元素</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="keyword">var</span> [x,y]=[<span class="number">10</span>,<span class="number">20</span>];</span><br><span class="line">[x,y]=[y,x];</span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">xxx</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> [a,b,c]=<span class="title function_">xxx</span>();</span><br><span class="line"><span class="comment">//3</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params">&#123;name,age=<span class="number">20</span>,sex&#125;</span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;我叫&quot;</span>+name+<span class="string">&quot;今年&quot;</span>+age+<span class="string">&quot;,&quot;</span>+sex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">show</span>(&#123;</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">    <span class="attr">sex</span>:<span class="string">&quot;男&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;小明&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//4</span></span><br><span class="line"><span class="keyword">var</span> arr=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">var</span> &#123;<span class="number">0</span>:first,<span class="number">4</span>:last&#125;=arr;</span><br><span class="line"><span class="title function_">alert</span>(first);</span><br></pre></td></tr></table></figure>

<h3 id="2-ECMA6字符串"><a href="#2-ECMA6字符串" class="headerlink" title="2. ECMA6字符串"></a>2. ECMA6字符串</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	传统字符串：单引号双引号</span></span><br><span class="line"><span class="comment">	ECMA6字符串：反引号</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	ECMA6字符串新特性：</span></span><br><span class="line"><span class="comment">		1.回车和缩进保留</span></span><br><span class="line"><span class="comment">		2.$&#123;变量/表达式/函数调用&#125;字符串拼接</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params">&#123;name,age=<span class="number">20</span>,sex&#125;</span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">`我叫<span class="subst">$&#123;name&#125;</span>,今年<span class="subst">$&#123;age&#125;</span>,+<span class="subst">$&#123;sex&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="十六-ECMA6新增数组方法和合并对象"><a href="#十六-ECMA6新增数组方法和合并对象" class="headerlink" title="十六.ECMA6新增数组方法和合并对象"></a>十六.ECMA6新增数组方法和合并对象</h2><h3 id="1-新增数组方法"><a href="#1-新增数组方法" class="headerlink" title="1. 新增数组方法"></a>1. 新增数组方法</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	Array.from() 伪数组转真数组</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	find()</span></span><br><span class="line"><span class="comment">	 - 功能：中查找符合条件的元素（短路操作</span></span><br><span class="line"><span class="comment">	 - 返回值；找到的元素</span></span><br><span class="line"><span class="comment">	 </span></span><br><span class="line"><span class="comment">	findIndex()</span></span><br><span class="line"><span class="comment">	 - 功能：中查找符合条件的元素（短路操作</span></span><br><span class="line"><span class="comment">	 - 返回值；找到的元素的下标</span></span><br><span class="line"><span class="comment">	 </span></span><br><span class="line"><span class="comment">	arr.copyWithin(target, start = 0, end = this.length)</span></span><br><span class="line"><span class="comment">	 - 功能：把某些个位置的元素复制并覆盖到其他位置上去</span></span><br><span class="line"><span class="comment">	 - target：目的起始位置。</span></span><br><span class="line"><span class="comment">	   start：复制源的起始位置，可以省略，可以是负数。</span></span><br><span class="line"><span class="comment">       end：复制源的结束位置，可以省略，可以是负数，实际结束位置是end-1。</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//find()</span></span><br><span class="line"><span class="keyword">var</span> arr=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">var</span> res=arr.<span class="title function_">find</span>(<span class="keyword">function</span>(<span class="params">item,index,arr</span>)&#123;</span><br><span class="line">    <span class="comment">//查找条件</span></span><br><span class="line">    <span class="keyword">return</span> item&gt;<span class="number">20</span>;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//箭头函数写法</span></span><br><span class="line"><span class="keyword">var</span> res=arr.<span class="title function_">find</span>(<span class="function"><span class="params">item</span>=&gt;</span>item&gt;<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//copyWithin</span></span><br><span class="line"><span class="keyword">var</span> arr=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>];</span><br><span class="line">arr.<span class="title function_">copyWithin</span>(<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>) <span class="comment">//1,2,5,6,7,8,9,8,9,10</span></span><br></pre></td></tr></table></figure>

<h3 id="2-合并对象"><a href="#2-合并对象" class="headerlink" title="2. 合并对象"></a>2. 合并对象</h3><ul>
<li>Object.assign</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1=&#123;</span><br><span class="line">    <span class="attr">a</span>:<span class="number">30</span></span><br><span class="line">    	<span class="attr">b</span>:<span class="number">20</span>,</span><br><span class="line">    	<span class="attr">c</span>:<span class="number">30</span>,</span><br><span class="line">    	<span class="attr">d</span>:<span class="number">40</span>,</span><br><span class="line">    	<span class="attr">f</span>:<span class="string">&quot;地址&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj2=&#123;</span><br><span class="line">    <span class="attr">b</span>:<span class="number">20</span>,</span><br><span class="line">    <span class="attr">c</span>:<span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj3=&#123;</span><br><span class="line">    <span class="attr">d</span>:<span class="number">40</span>,</span><br><span class="line">    <span class="attr">f</span>:[<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;world&quot;</span>,<span class="literal">true</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(obj1,obj2,obj3);<span class="comment">//从第二个参数开始，把后面的对象合并到第一个对象</span></span><br><span class="line"><span class="comment">//只拷贝源对象的自身属性（不拷贝继承属性），也不拷贝不可枚举的属性</span></span><br><span class="line"><span class="comment">//浅拷贝，而不是深拷贝。也就是说，如果源对象某个属性的值是对象，那么目标对象拷贝得到的是这个对象的引用。</span></span><br><span class="line"><span class="comment">//浅拷贝：拷贝地址 深拷贝：复合数据类型重新生成一份</span></span><br><span class="line"><span class="comment">//遇到同名属性处理方法为替换</span></span><br></pre></td></tr></table></figure>

<ul>
<li>应用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//为对象添加属性</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="十六-ECMA6集合"><a href="#十六-ECMA6集合" class="headerlink" title="十六.ECMA6集合"></a>十六.ECMA6集合</h2><ul>
<li><p>集合：</p>
<ul>
<li>不重复</li>
<li>无序</li>
</ul>
</li>
<li><p>Set</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> imgs=<span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">imgs.<span class="title function_">add</span>(<span class="number">100</span>);</span><br><span class="line">imgs.<span class="title function_">add</span>(<span class="number">100</span>);<span class="comment">//重复 添加不进去</span></span><br><span class="line">imgs.<span class="title function_">add</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">imgs.<span class="title function_">add</span>(<span class="string">&quot;hello&quot;</span>);<span class="comment">//重复 添加不进去</span></span><br><span class="line">imgs.<span class="title function_">add</span>(<span class="literal">true</span>);</span><br><span class="line">imgs.<span class="title function_">add</span>(<span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;world&quot;</span>));</span><br><span class="line">imgs.<span class="title function_">add</span>(<span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;world&quot;</span>));<span class="comment">//每次新建一个 添加的进去</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	集合遍历</span></span><br><span class="line"><span class="comment">	for...of</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> imgs.<span class="title function_">keys</span>())&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> imgs.<span class="title function_">values</span>())&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> imgs.<span class="title function_">entries</span>())&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	利用集合去重</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> set=<span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>]);</span><br><span class="line"><span class="keyword">var</span> arr=[...set];<span class="comment">//将数据结构展开成数组</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>];</span><br><span class="line">arr=[...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)];</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>Map映射</p>
<ul>
<li>键值不一致</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//声明</span></span><br><span class="line"><span class="keyword">let</span> map =<span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="comment">//添加</span></span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;打渔&quot;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;李四&quot;</span>,<span class="string">&quot;种地&quot;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;王五&quot;</span>,<span class="string">&quot;挖煤&quot;</span>);</span><br><span class="line"><span class="comment">//取值</span></span><br><span class="line"><span class="title function_">alert</span>(map.<span class="title function_">get</span>(<span class="string">&quot;王五&quot;</span>));</span><br><span class="line"><span class="comment">//遍历for of</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [key,value] <span class="keyword">of</span> map)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key,value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="十七-数组遍历回顾与补充"><a href="#十七-数组遍历回顾与补充" class="headerlink" title="十七.数组遍历回顾与补充"></a>十七.数组遍历回顾与补充</h2><ul>
<li><p>数组</p>
<ul>
<li><p>for循环</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">60</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i++)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(arr[i]+<span class="string">&quot;,&quot;</span>+i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>for…in</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> arr)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(arr[i]+<span class="string">&quot;,&quot;</span>+i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>foreach</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arr.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item,index</span>)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(item+<span class="string">&quot;,&quot;</span>+index);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>for…of</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> item <span class="keyword">of</span> arr)&#123;</span><br><span class="line">    <span class="comment">//item是当前遍历元素</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>对象</p>
<ul>
<li><p>for…in</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> attr <span class="keyword">in</span> obj)&#123;</span><br><span class="line">    <span class="comment">//attr是obj对象的属性</span></span><br><span class="line">   <span class="variable language_">document</span>.<span class="title function_">write</span>(attr+<span class="string">&quot;,&quot;</span>+obj[attr]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>集合</p>
<ul>
<li>for …of</li>
</ul>
</li>
</ul>
<h2 id="十八-构造函数-封装"><a href="#十八-构造函数-封装" class="headerlink" title="十八.构造函数(封装)"></a>十八.构造函数(封装)</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	prototype原型对象</span></span><br><span class="line"><span class="comment">	概念：每一个函数，都有一个原型对象prototype</span></span><br><span class="line"><span class="comment">		用在构造函数上，我们可以给构造函数的原型prototype，添加方法，构造出来的对象共享原型上所有方法</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过new调用函数：构造函数，可以构造对象</span></span><br><span class="line"><span class="comment">//构造函数首字母大写</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name,sex</span>)&#123;</span><br><span class="line">    <span class="comment">//1.原料</span></span><br><span class="line">    <span class="comment">//var obj=new Object();</span></span><br><span class="line">    <span class="comment">//加new  this=new Object</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2.加工</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span>=name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sex</span>=sex;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">showName</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;我的名字叫&quot;</span>+<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">showSex</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;我的性别是&quot;</span>+<span class="variable language_">this</span>.<span class="property">sex</span>+<span class="string">&quot;的&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3.出厂</span></span><br><span class="line">    <span class="comment">//return obj;</span></span><br><span class="line">    <span class="comment">//加new return this;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1= <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;blue&quot;</span>,<span class="string">&quot;男&quot;</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	如果某一函数使用new运算符调用</span></span><br><span class="line"><span class="comment">	 1.当前函数中的this指向新创建的对象</span></span><br><span class="line"><span class="comment">	 2.自动去完成1.原料和3.出厂</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//=============================================</span></span><br><span class="line"><span class="comment">//最终效果 类似于 类</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name,sex</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span>=name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sex</span>=sex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">showName</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;我的名字叫&quot;</span>+<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">showSex</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;我的性别是&quot;</span>+<span class="variable language_">this</span>.<span class="property">sex</span>+<span class="string">&quot;的&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="十九-继承和多态"><a href="#十九-继承和多态" class="headerlink" title="十九.继承和多态"></a>十九.继承和多态</h2><h3 id="1-继承"><a href="#1-继承" class="headerlink" title="1. 继承"></a>1. 继承</h3><ol>
<li><p>父类</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span>=name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sum</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">age</span>=<span class="number">10</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="原型链继承"><a href="#原型链继承" class="headerlink" title="原型链继承"></a>原型链继承</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Per</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span>=<span class="string">&quot;ker&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Per</span>.<span class="property"><span class="keyword">prototype</span></span>=<span class="keyword">new</span> <span class="title class_">Person</span>();<span class="comment">//原型链继承</span></span><br><span class="line"><span class="keyword">var</span> per1=<span class="keyword">new</span> <span class="title class_">Per</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(per1.<span class="property">age</span>);<span class="comment">//10</span></span><br></pre></td></tr></table></figure>

<p>概念：让新实例的原型等于父类的实例</p>
<p>特点：实例可继承的属性有：实例的构造函数的属性，父类构造函数属性，父类原型的属性。（新实例不会继承父类实例的属性！）</p>
<p>缺点：</p>
<ol>
<li>新实例无法向父类构造函数传参</li>
<li>继承单一</li>
<li>所有新实例都会共享父类实例的属性。</li>
</ol>
</li>
<li><h4 id="借用构造函数继承"><a href="#借用构造函数继承" class="headerlink" title="借用构造函数继承"></a>借用构造函数继承</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Per</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title class_">Person</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>,<span class="string">&quot;jer&quot;</span>);<span class="comment">//借用构造函数继承</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span>=<span class="number">12</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> per1=<span class="keyword">new</span> <span class="title class_">Per</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(per1.<span class="property">name</span>);<span class="comment">//jer</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(per1.<span class="property">age</span>);<span class="comment">//12</span></span><br></pre></td></tr></table></figure>

<p>重点：用.call()和.apply()将父类构造函数引入子类函数（在子类函数中做了父类函数的自执行（复制））<br>特点：</p>
<ol>
<li>只继承了父类构造函数的属性，没有继承父类原型的属性。</li>
<li>解决了原型链继承缺点1、2、3。</li>
<li>可以继承多个构造函数属性（call多个）。</li>
<li>在子实例中可向父实例传参。</li>
</ol>
<p>缺点：</p>
<ol>
<li>只能继承父类构造函数的属性。</li>
<li>无法实现构造函数的复用。（每次用每次都要重新调用）。</li>
<li>每个新实例都有父类构造函数的副本，臃肿。</li>
</ol>
</li>
<li><h4 id="组合继承-组合上面2种）（常用）"><a href="#组合继承-组合上面2种）（常用）" class="headerlink" title="组合继承(组合上面2种）（常用）"></a>组合继承(组合上面2种）（常用）</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Per</span>(<span class="params">name</span>)&#123;</span><br><span class="line">    <span class="title class_">Person</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>,name);<span class="comment">//借用构造函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Per</span>.<span class="property"><span class="keyword">prototype</span></span>=<span class="keyword">new</span> <span class="title class_">Person</span>();<span class="comment">//原型链继承</span></span><br><span class="line"><span class="keyword">var</span> per=<span class="keyword">new</span> <span class="title class_">Per</span>(<span class="string">&quot;ker&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sub.<span class="property">name</span>);<span class="comment">//gar 继承构造函数属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sub.<span class="property">age</span>);<span class="comment">//10  继承父类原型属性</span></span><br></pre></td></tr></table></figure>

<p>重点：结合了两种模式的优点，传参和复用</p>
<p>特点：</p>
<ol>
<li>可以继承父类原型上的属性，可以传参，可复用。</li>
<li>每个新实例引入的构造函数属性是私有的。</li>
</ol>
<p>缺点：调用了两次父类构造函数（耗内存），子类的构造函数会代替原型上的那个父类构造函数。</p>
</li>
<li><h4 id="原型式继承"><a href="#原型式继承" class="headerlink" title="原型式继承"></a>原型式继承</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span>=name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sum</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">age</span>=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//先封装一个函数容器，用来输出对象和承载继承的原型</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">content</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">F</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    F.<span class="property"><span class="keyword">prototype</span></span>=obj;<span class="comment">//继承传入参数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">F</span>();<span class="comment">//返回函数对象</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> sup=<span class="keyword">new</span> <span class="title class_">Person</span>();<span class="comment">//拿父类实例</span></span><br><span class="line"><span class="keyword">var</span> sup1=<span class="title function_">content</span>(sup);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sup1.<span class="property">age</span>);<span class="comment">//10 继承了父类函数属性</span></span><br></pre></td></tr></table></figure>

<p>重点：用一个函数包装一个对象，然后返回这个函数的调用，这个函数就变成了个可以随意增添属性的实例或对象。object.create()就是这个原理。</p>
<p>特点：类似于复制一个对象，用函数来包装。</p>
<p>缺点：</p>
<ol>
<li>所有实例都会继承原型上的属性。</li>
<li>无法实现复用。（新实例属性都是后面添加的）</li>
</ol>
</li>
<li><h4 id="寄生式继承"><a href="#寄生式继承" class="headerlink" title="寄生式继承"></a>寄生式继承</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//先封装一个函数容器，用来输出对象和承载继承的原型</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">content</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">F</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    F.<span class="property"><span class="keyword">prototype</span></span>=obj;<span class="comment">//继承传入参数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">F</span>();<span class="comment">//返回函数对象</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> sup=<span class="keyword">new</span> <span class="title class_">Person</span>();<span class="comment">//拿父类实例</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">subobject</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> sub=<span class="title function_">content</span>(obj);</span><br><span class="line">    sub.<span class="property">name</span>=<span class="string">&quot;gar&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> sub;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> sup2=<span class="title function_">subobject</span>(sup);</span><br><span class="line"><span class="comment">//这个函数经过声明之后成了可增添属性的对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> subobject);<span class="comment">//function</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> sup2);<span class="comment">//object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sup2.<span class="property">name</span>);<span class="comment">//&quot;gar&quot;,返回sub对象 继承了sub的属性</span></span><br></pre></td></tr></table></figure>

<p>重点：就是给原型式继承外面套了个壳子。</p>
<p>优点：没有创建自定义类型，因为只是套了个壳子返回对象（这个），这个函数顺理成章就成了创建的新对象。</p>
<p>缺点：没用到原型，无法复用。</p>
</li>
<li><h4 id="寄生组合式继承（常用）"><a href="#寄生组合式继承（常用）" class="headerlink" title="寄生组合式继承（常用）"></a>寄生组合式继承（常用）</h4><p>寄生：在函数内返回对象然后调用</p>
<p>组合：1、函数原型等于另一个实例。2、在函数中用apply或call引入另一个构造函数，可以传参</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//寄生</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">content</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">F</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    F.<span class="property"><span class="keyword">prototype</span></span>=obj;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">F</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//content就是F实例的另一种表示法</span></span><br><span class="line"><span class="keyword">var</span> con=<span class="title function_">content</span>(<span class="title class_">Person</span>.<span class="property">peototype</span>);</span><br><span class="line"><span class="comment">//con实例（F实例）的原型继承了父类函数的原型</span></span><br><span class="line"><span class="comment">//上述更像是原型链继承，只不过只继承了原型属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//组合</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Sub</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="title class_">Person</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);<span class="comment">//继承了父类构造函数属性</span></span><br><span class="line">&#125;<span class="comment">//解决了组合式量词调用构造函数属性缺点</span></span><br><span class="line"><span class="comment">//重点:</span></span><br><span class="line"><span class="title class_">Sub</span>.<span class="property"><span class="keyword">prototype</span></span>=con;<span class="comment">//继承了con实例</span></span><br><span class="line">con.<span class="property">constructor</span>=<span class="title class_">Sub</span>;<span class="comment">//一定要修复实例</span></span><br><span class="line"><span class="keyword">var</span> sub1=<span class="keyword">new</span> <span class="title class_">Sub</span>();</span><br><span class="line"><span class="comment">//Sub的实例就继承了构造函数属性，父类实例，con的函数属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sub1.<span class="property">age</span>);<span class="comment">//10;</span></span><br></pre></td></tr></table></figure>

<p>重点：修复了组合继承的问题</p>
<blockquote>
<p>继承内容引用于：<a href="https://www.cnblogs.com/ranyonsue/p/11201730.html">https://www.cnblogs.com/ranyonsue/p/11201730.html</a></p>
</blockquote>
</li>
</ol>
<h3 id="2-多态"><a href="#2-多态" class="headerlink" title="2.多态"></a>2.多态</h3><ul>
<li><p>多态背后的思想是将”做什么“和”谁去做以及怎样去做分开“。</p>
<p>非多态代码示例</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> makeSound = <span class="keyword">function</span>(<span class="params">animal</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(animal <span class="keyword">instanceof</span> <span class="title class_">Duck</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;嘎嘎嘎&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (animal <span class="keyword">instanceof</span> <span class="title class_">Chicken</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;咯咯咯&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Duck</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Chiken</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line"><span class="title function_">makeSound</span>(<span class="keyword">new</span> <span class="title class_">Chicken</span>());</span><br><span class="line"><span class="title function_">makeSound</span>(<span class="keyword">new</span> <span class="title class_">Duck</span>());</span><br></pre></td></tr></table></figure>

<p>多态代码实例</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> makeSound = <span class="keyword">function</span>(<span class="params">animal</span>) &#123;</span><br><span class="line">    animal.<span class="title function_">sound</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Duck</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="title class_">Duck</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sound</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;嘎嘎嘎&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Chicken</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line"><span class="title class_">Chiken</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sound</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;咯咯咯&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">makeSound</span>(<span class="keyword">new</span> <span class="title class_">Chicken</span>());<span class="comment">//咯咯咯</span></span><br><span class="line"><span class="title function_">makeSound</span>(<span class="keyword">new</span> <span class="title class_">Duck</span>());<span class="comment">//嘎嘎嘎</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-proto-和instanceof关键字"><a href="#3-proto-和instanceof关键字" class="headerlink" title="3.__ proto __ 和instanceof关键字"></a>3.__ proto __ 和instanceof关键字</h4><ul>
<li>__ proto __ ：构造函数构造出来的对象，有一个属性<code>__proto__</code>,指向构造出这个对象的构造函数的原型。</li>
<li>instanceof：instanceof运算符用来判断一个构造函数的prototype属性所指向的对象是否存在另外一个要检测对象的原型链上</li>
</ul>
<h2 id="二十-ECMA6的class语法"><a href="#二十-ECMA6的class语法" class="headerlink" title="二十. ECMA6的class语法"></a>二十. ECMA6的class语法</h2><ul>
<li><p>传统构造函数写法</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name,sex,age</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span>=name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sex</span>=sex;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span>=age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">show</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;我的名字叫$&#123;this.name&#125;,今年$&#123;this.age&#125;岁,$&#123;this.sex&#125;&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ECMA6 class</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name,sex,age</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span>=name;</span><br><span class="line">    	<span class="variable language_">this</span>.<span class="property">sex</span>=sex;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span>=age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">show</span>(<span class="params"></span>)&#123;</span><br><span class="line">    	<span class="title function_">alert</span>(<span class="string">&#x27;我的名字叫$&#123;this.name&#125;,今年$&#123;this.age&#125;岁,$&#123;this.sex&#125;&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Worker</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span>&#123;</span><br><span class="line">    <span class="title function_">construtor</span>(<span class="params">name,sex,age,job</span>)&#123;</span><br><span class="line">        <span class="comment">//继承父级属性</span></span><br><span class="line">        <span class="variable language_">super</span>(name,sex,age);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">job</span>=job;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">showJob</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;我的工作是&quot;</span>+<span class="variable language_">this</span>.<span class="property">job</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>前端</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>Js</tag>
        <tag>前端</tag>
      </tags>
  </entry>
  <entry>
    <title>闭包</title>
    <url>/2023/04/07/%E9%97%AD%E5%8C%85/</url>
    <content><![CDATA[<p>每当我们运行代码的时候，代码就会生成执行上下文(可以理解为执行环境)</p>
<p>JavaScript执行环境主要分为三种：</p>
<ul>
<li>全局环境</li>
<li>函数环境</li>
<li>Eval环境</li>
</ul>
<p>JavaScript用栈处理多个执行上下文</p>
<p><img src="http://qny.bioart.icu/blog/16.png" alt="img"></p>
<p>作用域链</p>
<p>创建执行上下文分两个阶段</p>
<ul>
<li><p>创建阶段</p>
</li>
<li><ul>
<li>作用域链</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>包含当前变量对象+所有父级变量对象</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li>变量对象(参数、变量函数声明)</li>
<li>this</li>
</ul>
</li>
<li><p>执行阶段</p>
</li>
<li><ul>
<li>变量赋值、函数引用等</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function books()&#123;</span><br><span class="line">  var book = &quot;书包里面的书本&quot;</span><br><span class="line">  return function()&#123;</span><br><span class="line">    console.log(book);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var bag = books();</span><br><span class="line">bag()</span><br></pre></td></tr></table></figure>

<p>上面代码的上下文创建顺序</p>
<p>全局执行上下文 &#x3D; {作用域链：{全局变量对象}, {变量对象: books, bag}}</p>
<p>books执行上下文 &#x3D; {作用域链：{books变量对象+全局变量对象},{变量对象:book}}</p>
<p>匿名函数执行上下文 &#x3D; {作用域链:{匿名函数遍历对象+books变量对象+全局变量对象},{变量对象:}}</p>
<p>一道题：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for(var i = 0;i&lt;5;i++)&#123;</span><br><span class="line">  setTimeout(function()&#123;</span><br><span class="line">    console.log(i++);</span><br><span class="line">  &#125;,4000)</span><br><span class="line">&#125;</span><br><span class="line">console.log(i);//556789</span><br></pre></td></tr></table></figure>

<p>解析：</p>
<p>顺序是这样的，1. 循环走完 设置完一堆定时器 定时器里的函数并没有执行；2. 执行第6条的log输出第一个5；3. 定时器时间到，开始执行，此时i从5开始计算 输出 5,6,7,8,9；</p>
<h3 id="闭包的应用-数据私有"><a href="#闭包的应用-数据私有" class="headerlink" title="闭包的应用-数据私有"></a>闭包的应用-数据私有</h3><p>没有使用闭包</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let i = 0;</span><br><span class="line">function fn()&#123;</span><br><span class="line">  i++</span><br><span class="line">  console.log(i);</span><br><span class="line">&#125;</span><br><span class="line">//另外一个程序</span><br><span class="line">i= 1000</span><br><span class="line"></span><br><span class="line">fn()//1001</span><br></pre></td></tr></table></figure>

<p>我们希望i这个变量是私有的，脱离全局上下文环境</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function count()&#123;</span><br><span class="line">  let i = 0;</span><br><span class="line">  function fn()&#123;</span><br><span class="line">    i++</span><br><span class="line">    console.log(i);</span><br><span class="line">  &#125;</span><br><span class="line">  return fn</span><br><span class="line">&#125;</span><br><span class="line">i = 1000</span><br><span class="line">const fun = count()</span><br><span class="line">fun()//1</span><br></pre></td></tr></table></figure>

<p>这样子i就不在全局上下文环境中了，不会被全局上下文中的代码修改掉。</p>
<h3 id="闭包内存泄露"><a href="#闭包内存泄露" class="headerlink" title="闭包内存泄露"></a>闭包内存泄露</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function count()&#123;</span><br><span class="line">  let i = 0;</span><br><span class="line">  function fn()&#123;</span><br><span class="line">    i++</span><br><span class="line">    console.log(i);</span><br><span class="line">  &#125;</span><br><span class="line">  return fn</span><br><span class="line">&#125;</span><br><span class="line">const fun = count()</span><br></pre></td></tr></table></figure>

<ol>
<li>fun是一个全局变量，代码执行完毕不会立即销毁</li>
<li>fun使用count函数</li>
<li>count函数使用fn函数</li>
<li>fn函数里面有用到i</li>
<li>i被引用就不会被回收，所以一直存在</li>
</ol>
<p><strong>此时：闭包引起了内存泄漏</strong></p>
<p><strong>不是所有的内存泄露都要手动回收的</strong></p>
<p><strong>比如react里面很多闭包不能回收的</strong></p>
]]></content>
      <categories>
        <category>Js</category>
      </categories>
      <tags>
        <tag>Js</tag>
      </tags>
  </entry>
  <entry>
    <title>laravel框架学习笔记</title>
    <url>/2020/12/01/laravel%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="laravel54笔记"><a href="#laravel54笔记" class="headerlink" title="laravel54笔记"></a>laravel54笔记</h1><h3 id="1-准备前"><a href="#1-准备前" class="headerlink" title="1.准备前"></a>1.准备前</h3><ul>
<li>切换阿里云镜像:<code>composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/</code></li>
<li>laravel下载语句:<code>composer create-project laravel/laravel=5.4.* --prefer-dist ./laravel</code></li>
</ul>
<h3 id="2-目录结构分析"><a href="#2-目录结构分析" class="headerlink" title="2.目录结构分析"></a>2.目录结构分析</h3><ul>
<li>app：核心目录，存放核心代码，控制器、模型、路由。模型文件直接写在app目录下即可，也可分目录管理</li>
<li>bootstarp（启动）：laravel启动目录，autoload.php文件用于自动载入需要类文件</li>
<li>config：项目配置目录，存放配置目录。例如数据库的配置文件<ul>
<li>App.php：项目主要配置文件</li>
<li>Auth.php：用于定义用户认证（登陆）配置文件</li>
<li>Database.php：针对数据库的配置</li>
<li>Filesystems.php：上传文件、文件存储需要使用到的配置文件</li>
</ul>
</li>
<li>database：数据迁移目录，存储跟数据表相关的操作类文件（迁移文件、种子文件<ul>
<li>migrations：创建数据表类</li>
<li>seeds：种子文件目录、</li>
</ul>
</li>
<li>public：项目入口文件和系统静态资源目录（css,img,js,uploads）后期使用的外部静态文件（js、css、图片等）都需要放到public。项目单一入口文件也在此目录下，和后续配置虚拟主机时需将站点位置指定到public下</li>
<li>resources：存放视图文件，还有语言包文件的目录<ul>
<li>assets：有用的</li>
<li>lang：语言包，如需本地化配置语言包</li>
<li>views：视图，可分目录管理</li>
</ul>
</li>
<li>routes：定义路由的目录，web.php是定义路由的文件</li>
<li>storage：存放缓存和日志文件，在linux下该目录需可写权限（后期用户上传文件如果存在本地也在此目录）<ul>
<li>app：用户文件</li>
<li>framework：缓存文件</li>
<li>logs：日志</li>
</ul>
</li>
<li>vendor：第三方代码依赖</li>
<li>.env文件：设置一些系统相关的环境配置文件信息。config目录里面的文件配置内容一般都是读取该文件里面的配置信息（config里面的配置项的值基本来自.env文件）</li>
<li><strong>artisan脚手架文件</strong>：主要用于生成的代码（自动生成），比如生成控制器，模型文件等<ul>
<li>执行命令：#php artisan (环境变量，artisan存在命令行当前工作路径)</li>
</ul>
</li>
<li>composer.json：依赖包配置文件，声明当前需要的软件依赖，不能删，composer需使用</li>
</ul>
<table>
<thead>
<tr>
<th>目录</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>app</td>
<td>保存模型文件（默认）</td>
</tr>
<tr>
<td>app&#x2F;Http&#x2F;Controllers</td>
<td>保存控制器文件</td>
</tr>
<tr>
<td>resources&#x2F;views</td>
<td>保存视图文件</td>
</tr>
<tr>
<td>config</td>
<td>配置文件目录</td>
</tr>
<tr>
<td>routes</td>
<td>存放路由文件</td>
</tr>
<tr>
<td>database&#x2F;migrations</td>
<td>存放数据库迁移文件（操作数据表结构）</td>
</tr>
<tr>
<td>database&#x2F;seeds</td>
<td>存放数据库种子文件（模拟测试数据）</td>
</tr>
</tbody></table>
<h3 id="3-启动方式"><a href="#3-启动方式" class="headerlink" title="3.启动方式"></a>3.启动方式</h3><p>方式一(不推荐)：Laravel框架提供了更简单的方式启动项目（相比配置apche）</p>
<ul>
<li>cmd执行命令：<code>#php artisan serve</code></li>
<li>缺点：能跑php，不启动数据库，如果修改项目配置文件，则需重新启动</li>
</ul>
<p>方式二(推荐)：使用wamp或lamp环境，虚拟主机配置（虚拟主机≠虚拟机）</p>
<h3 id="4-路由"><a href="#4-路由" class="headerlink" title="4.路由"></a>4.路由</h3><ul>
<li>什么是路由：将用户的请求按照事先规划的方案提交给指定的控制器或功能函数来进行处理（通俗的酱，路由就是访问地址形式）。在ThinkPHP框架中，当我们在URL地址中，传递m、c、a三个参数时，系统会自动跳转到指定模型中指定控制器的指定方法，这些处理过程都由框架自动完成。但在Laravel框架，并没有指定固定参数，其路由必须手工配置。</li>
</ul>
<h4 id="4-1-路由配置文件：routes-web-php"><a href="#4-1-路由配置文件：routes-web-php" class="headerlink" title="4.1.路由配置文件：routes&#x2F;web.php"></a>4.1.路由配置文件：routes&#x2F;web.php</h4><ul>
<li>路由定义格式：<strong>Route::请求方式(‘请求的url’,匿名函数或控制响应方法)</strong></li>
</ul>
<h4 id="4-2-路由方式"><a href="#4-2-路由方式" class="headerlink" title="4.2.路由方式"></a>4.2.路由方式</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="variable">$url</span>,<span class="variable">$callback</span>);<span class="comment">//支持get请求方式</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">post</span>(<span class="variable">$url</span>,<span class="variable">$callback</span>);<span class="comment">//支持post请求方式</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="keyword">match</span>(<span class="variable">$url</span>,<span class="variable">$callback</span>);<span class="comment">//表示匹配固定（自己定义）请求方式</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">any</span>(<span class="variable">$url</span>,<span class="variable">$callback</span>);<span class="comment">//匹配任意请求方式</span></span><br><span class="line"><span class="comment">//下面不常用</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">put</span>(<span class="variable">$url</span>,<span class="variable">$callback</span>);</span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">delete</span>(<span class="variable">$url</span>,<span class="variable">$callback</span>);</span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">options</span>(<span class="variable">$url</span>,<span class="variable">$callback</span>);</span><br></pre></td></tr></table></figure>

<p>有时候还需要注册路由响应多个HTTP请求，这可以通过<code>match</code>方法来实现。或者用<code>any</code>方法注册一个路由来响应所有HTTP请求</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="keyword">match</span>([<span class="string">&#x27;get&#x27;</span>,<span class="string">&#x27;post&#x27;</span>],<span class="string">&#x27;/&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//可以通过get和post方式请求/目录</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">any</span>(<span class="string">&#x27;foo&#x27;</span>,function()&#123;</span><br><span class="line">    <span class="comment">//可以通过任意请求方式访问/foo目录</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="4-3-路由参数"><a href="#4-3-路由参数" class="headerlink" title="4.3.路由参数"></a>4.3.路由参数</h4><ul>
<li>路由参数就是给路由地址传递参数</li>
</ul>
<p>路由参数分为必选参数和可选参数 </p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//必须传参，不传报错</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/user/&#123;id&#125;&#x27;</span>,function(<span class="variable">$id</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;当前用户id是&quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//有id也行 没id也行需要给默认值</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/user/&#123;id?&#125;&#x27;</span>,function(<span class="variable">$id</span>=<span class="literal">null</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;当前用户id是&quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/user/&#123;id?&#125;&#x27;</span>,function(<span class="variable">$id</span>=<span class="number">5</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;当前用户id是&quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//参数字符不支持-可以用_代替</span></span><br></pre></td></tr></table></figure>

<p>还可以通过传统的?传参，不需要写路由</p>
<h4 id="4-4-路由别名"><a href="#4-4-路由别名" class="headerlink" title="4.4.路由别名"></a>4.4.路由别名</h4><p>路由别名相当于在路由定义时，为路由起了一个别名，在以后程序中可以通过这个别名来获取路由信息。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/user/&#123;id&#125;&#x27;</span>,function(<span class="variable">$id</span>)&#123;</span><br><span class="line">    <span class="comment">//xxx</span></span><br><span class="line">&#125;)-&gt;<span class="title function_ invoke__">name</span>(<span class="string">&#x27;名字&#x27;</span>);</span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line"><span class="title function_ invoke__">route</span>(<span class="string">&#x27;名字&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>查看系统已有路由：php artisan</p>
<h4 id="4-5-路由群组"><a href="#4-5-路由群组" class="headerlink" title="4.5.路由群组"></a>4.5.路由群组</h4><p>比如后台有如下路由</p>
<p>&#x2F;admin&#x2F;login</p>
<p>&#x2F;admin&#x2F;logout</p>
<p>&#x2F;admin&#x2F;index</p>
<p>&#x2F;admin&#x2F;user&#x2F;add</p>
<p>他们共同点都有admin前缀，为了管理方便，可以把他们放到一个路由分组中，使用prefix属性指定路由前缀</p>
<p>比如你想为所有路由URIs前面添加前缀admin</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>([<span class="string">&#x27;prefix&#x27;</span>=&gt;<span class="string">&#x27;admin&#x27;</span>],function()&#123;</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;users&#x27;</span>,function()&#123;</span><br><span class="line">        <span class="comment">//匹配&quot;/admin/users&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;logout&#x27;</span>,function()&#123;</span><br><span class="line">        <span class="comment">//匹配&quot;/admin/logout&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;user/add&#x27;</span>,function()&#123;</span><br><span class="line">        <span class="comment">//匹配&quot;/admin/user/add&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>语法：Route::group(公共属性数组,回调函数)</p>
<h3 id="5-控制器"><a href="#5-控制器" class="headerlink" title="5.控制器"></a>5.控制器</h3><ul>
<li>控制器文件位于：app&#x2F;Http&#x2F;Controllers</li>
<li>控制器文件如何命名：大驼峰命名+Controller.php。例如：GoodsController.php</li>
</ul>
<h4 id="5-1-控制器生成"><a href="#5-1-控制器生成" class="headerlink" title="5.1.控制器生成"></a>5.1.控制器生成</h4><p><code>php artisan make:controller 控制器名(大驼峰)+Controller 关键词</code></p>
<p>例如：<code>php artisan make:controller TestController</code></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;<span class="comment">//命名空间三元素：常量、方法、类</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//测试路由函数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">phpinfo</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-1-控制器路由"><a href="#5-1-控制器路由" class="headerlink" title="5.1.控制器路由"></a>5.1.控制器路由</h4><ul>
<li>如何使用路由规则调用控制器下的方法</li>
<li>路由设置格式基本相同，只需将匿名函数换成<code>控制器类命@方法名</code></li>
<li>格式：Route::请求方法(路由表达式,控制器@方法)</li>
</ul>
<p>例子：设定路由home&#x2F;test&#x2F;test1</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//web文件下</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;home/test/test1&#x27;</span>,<span class="string">&#x27;TestController@test1&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>分目录管理：<ul>
<li>例：创建前台分组，在前台平台中创建IndexController.php文件；同时建立后台分组，再创建后台的IndexController.php</li>
<li>在Controllers文件夹下新建2个文件夹 Admin和Home</li>
<li>创建控制器文件命令<ul>
<li><code>php artisan make:controller Admin/IndexController</code></li>
<li><code>php artisan make:controller Home/IndexController</code></li>
</ul>
</li>
<li>路由文件：<ul>
<li><code>Route::get(&#39;home/index/index&#39;,&#39;Home\IndexController@index&#39;);</code></li>
<li><code>Route::get(&#39;admin/index/index&#39;,&#39;Admin\IndexController@index&#39;);</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="6-控制器接受用户输入"><a href="#6-控制器接受用户输入" class="headerlink" title="6.控制器接受用户输入"></a>6.控制器接受用户输入</h3><ul>
<li>接受用户输入类：Illuminate\Support\Facades\Input</li>
<li>Facades:中文门面。门面是介于一个类的实例化与没有实例化中间的一个状态。其实是类的一个接口实现。在这个状态下可以不实例化类但是可以调用类中的方法。</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Input</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;参数名字&#x27;</span>,<span class="string">&#x27;如果参数没被传递使用该默认值&#x27;</span>)</span><br><span class="line"><span class="title class_">Input</span>::<span class="title function_ invoke__">all</span>() <span class="comment">//获取所有用户输入</span></span><br><span class="line"><span class="title class_">Input</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;&#x27;</span>) <span class="comment">//获取单个的用户输入</span></span><br><span class="line"><span class="title class_">Input</span>::<span class="title function_ invoke__">only</span>([]) <span class="comment">//获取指定几个用户的输入</span></span><br><span class="line"><span class="title class_">Input</span>::<span class="title function_ invoke__">except</span>([]) <span class="comment">//获取指定几个用户的输入以外的所有参数</span></span><br><span class="line"><span class="title class_">Input</span>::<span class="title function_ invoke__">has</span>(<span class="string">&#x27;name&#x27;</span>) <span class="comment">//判断某个输入的参数是否存在</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//上述方法即可获取get也可获取post的信息，laravel7以上淘汰</span></span><br><span class="line"><span class="comment">//2.使用request类</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">insert</span>(<span class="params">Request <span class="variable">$res</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable">$username</span>=<span class="variable">$res</span>-&gt;<span class="title function_ invoke__">input</span>(<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;123&#x27;</span>);<span class="comment">//默认123</span></span><br><span class="line">        <span class="title function_ invoke__">dd</span>(<span class="variable">$username</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>使用Input类前需先use引用，可以使用别名，配置在config文件夹下app.php。</p>
<h3 id="7-DB类操作数据库"><a href="#7-DB类操作数据库" class="headerlink" title="7.DB类操作数据库"></a>7.DB类操作数据库</h3><p>按照MVC架构，对数据操作应放在Model中完成，但如果不使用Model，我们也可以用laravel框架提供的DB类操作数据库。对于某些极其复杂sql，用Model已经很难完成，需要开发者自己手写sql语句，使用DB类去执行原生sql。laravel中DB类的基本用法DB::table(‘tableName’)获取tableName表的实例</p>
<h4 id="7-1-配置文件"><a href="#7-1-配置文件" class="headerlink" title="7.1.配置文件"></a>7.1.配置文件</h4><p>.env文件中配置数据库相关信息</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">DB_CONNECTION=mysql <span class="comment">//数据库类型</span></span><br><span class="line">DB_HOST=<span class="number">127.0</span>.<span class="number">0.1</span>   <span class="comment">//localhost</span></span><br><span class="line">DB_PORT=<span class="number">3306</span>		<span class="comment">//段鸥</span></span><br><span class="line">DB_DATABASE=homestead<span class="comment">//数据库名</span></span><br><span class="line">DB_USERNAME=homestead<span class="comment">//账号</span></span><br><span class="line">DB_PASSWORD=secret	<span class="comment">//密码</span></span><br></pre></td></tr></table></figure>

<p>也可以在config目录下database.php文件里面配置，使用env函数，表示先从env获取，获取失败使用env函数第二个参数。<strong>strict，严格模式选项，建议修改为false</strong></p>
<h4 id="7-2-使用"><a href="#7-2-使用" class="headerlink" title="7.2.使用"></a>7.2.使用</h4><ol>
<li><p>控制器中引入DB门面：<code>user DB</code></p>
</li>
<li><p>定义增删改查需要的路由，例如：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/test/add&#x27;</span>,<span class="string">&#x27;TestController@add&#x27;</span>);</span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/test/del&#x27;</span>,<span class="string">&#x27;TestController@del&#x27;</span>);</span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/test/update&#x27;</span>,<span class="string">&#x27;TestController@update&#x27;</span>);</span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/test/select&#x27;</span>,<span class="string">&#x27;TestController@select&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>使用group优化路由</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>([<span class="string">&#x27;prefix&#x27;</span>=&gt;<span class="string">&#x27;test&#x27;</span>],function()&#123;</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;add&#x27;</span>,<span class="string">&#x27;TestController@add&#x27;</span>);</span><br><span class="line">	<span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;del&#x27;</span>,<span class="string">&#x27;TestController@del&#x27;</span>);</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;update&#x27;</span>,<span class="string">&#x27;TestController@update&#x27;</span>);</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;select&#x27;</span>,<span class="string">&#x27;TestController@select&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="增加信息-insert"><a href="#增加信息-insert" class="headerlink" title="增加信息(insert)"></a>增加信息(insert)</h5><p>对数据库增加数据主要有2个函数insert()和insertGetId()</p>
<p>insert()可以同时添加一条或多条，返回值布尔</p>
<p>insertGetId()只能添加一条，返回自增的id</p>
<p>举例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//指定数据表</span></span><br><span class="line">    <span class="variable">$db</span>=DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;TableName&#x27;</span>);</span><br><span class="line">    <span class="comment">//增加多条数据,增加一个一维，多个二维</span></span><br><span class="line">    <span class="variable">$rs</span>=<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">insert</span>([</span><br><span class="line">        [</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;age =&gt; ‘23&#x27;</span></span><br><span class="line">        ],[</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;age =&gt; ‘23&#x27;</span></span><br><span class="line">        ],[</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;王五&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;age =&gt; ‘23&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">    ]);</span><br><span class="line">    <span class="comment">//insertGetId</span></span><br><span class="line">    <span class="variable">$db</span> -&gt; <span class="title function_ invoke__">insertGetId</span>([</span><br><span class="line">         <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;age =&gt; ‘23&#x27;</span></span><br><span class="line">    ]);</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="variable">$rs</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ps:链式&#x2F;连贯操作:<code>DB::table(&#39;TableName&#39;)-&gt;insert()</code></p>
</li>
<li><h5 id="修改信息-update"><a href="#修改信息-update" class="headerlink" title="修改信息(update)"></a>修改信息(update)</h5><p>Update表示可以修改整个记录中的全部字段</p>
<p>Increment和decrement表示修改数字字段的数字(递增或递减),应用：记录登陆次数、积分增加</p>
<p>举例：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="variable">$db</span> = DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;TableName&#x27;</span>);</span><br><span class="line">    <span class="comment">//id=1的name改成&#x27;赵六&#x27;</span></span><br><span class="line">    <span class="variable">$rs</span>=<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;=&#x27;</span>,<span class="string">&#x27;1&#x27;</span>)-&gt;<span class="title function_ invoke__">update</span>([</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;赵六&#x27;</span></span><br><span class="line">    ]);</span><br><span class="line">    <span class="title function_ invoke__">dd</span>(<span class="variable">$rs</span>)<span class="comment">//更好的输出函数dd，返回受影响行数</span></span><br><span class="line">        <span class="comment">//======================</span></span><br><span class="line">    DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;tableName&#x27;</span>)-&gt;<span class="title function_ invoke__">increment</span>(<span class="string">&#x27;votes&#x27;</span>);<span class="comment">//每次+1</span></span><br><span class="line">    DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;tableName&#x27;</span>)-&gt;<span class="title function_ invoke__">increment</span>(<span class="string">&#x27;votes&#x27;</span>,<span class="number">5</span>);<span class="comment">//+5</span></span><br><span class="line">    DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;tableName&#x27;</span>)-&gt;<span class="title function_ invoke__">decrement</span>(<span class="string">&#x27;votes&#x27;</span>);<span class="comment">//-1</span></span><br><span class="line">    DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;tableName&#x27;</span>)-&gt;<span class="title function_ invoke__">decrement</span>(<span class="string">&#x27;votes&#x27;</span>,<span class="number">5</span>);<span class="comment">//-5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h5><ol>
<li><p>取出基本数据</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取member表中所有数据</span></span><br><span class="line"><span class="variable">$db</span>=DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;member&#x27;</span>)</span><br><span class="line"><span class="variable">$date</span>=<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">get</span>();<span class="comment">//返回集合对象</span></span><br><span class="line"><span class="comment">//遍历数据</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$data</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;value:<span class="subst">&#123;$value-&gt;id&#125;</span>&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//查id大于3</span></span><br><span class="line"><span class="variable">$date</span>=<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;&gt;&#x27;</span>,<span class="string">&#x27;3&#x27;</span>)-&gt;<span class="title function_ invoke__">get</span>();</span><br><span class="line"><span class="comment">//并且</span></span><br><span class="line">-&gt;<span class="title function_ invoke__">where</span>()-&gt;<span class="title function_ invoke__">where</span>()-&gt;<span class="title function_ invoke__">where</span>()</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line">-&gt;<span class="title function_ invoke__">where</span>()-&gt;<span class="title function_ invoke__">orWhere</span>()-&gt;<span class="title function_ invoke__">orWhere</span>()</span><br></pre></td></tr></table></figure>
</li>
<li><p>取出单行数据</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;member&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;3&#x27;</span>)-&gt;<span class="title function_ invoke__">first</span>();<span class="comment">//返回一个对象</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>取出具体某个值(一个字段)</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//取出id为3的记录的name值</span></span><br><span class="line">DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;member&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;3&#x27;</span>)-&gt;<span class="title function_ invoke__">value</span>(<span class="string">&#x27;name&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取某些字段数据(多个字段)</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;member&#x27;</span>)-&gt;<span class="title function_ invoke__">select</span>(<span class="string">&#x27;name as username&#x27;</span>,<span class="string">&#x27;email&#x27;</span>)-&gt;<span class="title function_ invoke__">get</span>();</span><br></pre></td></tr></table></figure>
</li>
<li><p>排序</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;member&#x27;</span>)-&gt;<span class="title function_ invoke__">orderBy</span>(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;desc&#x27;</span>)-&gt;<span class="title function_ invoke__">get</span>();</span><br></pre></td></tr></table></figure>
</li>
<li><p>分页（限制输出记录数）</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;member&#x27;</span>)-&gt;<span class="title function_ invoke__">limit</span>(<span class="number">3</span>)-&gt;<span class="title function_ invoke__">offset</span>(<span class="number">2</span>)-&gt;<span class="title function_ invoke__">get</span>();</span><br><span class="line"><span class="comment">//Limit：限制输出条数</span></span><br><span class="line"><span class="comment">//Offset:从什么地方开始</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><h5 id="删除数据-delete"><a href="#删除数据-delete" class="headerlink" title="删除数据(delete)"></a>删除数据(delete)</h5><p>删除两种方式：物理删除（本质是删除）<strong>逻辑删除（本质是修改）</strong></p>
<p>delete函数：删除记录</p>
<p>Truncate：清空数据表</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;member&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;3&#x27;</span>)-&gt;<span class="title function_ invoke__">delete</span>();<span class="comment">//返回影响行数</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>执行任意sql语句</p>
<ol>
<li><p>执行任意insert update delete</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">DB::<span class="title function_ invoke__">statement</span>(<span class="string">&quot;insert into member values(null,&quot;</span><span class="string">&quot;)&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行任意select语句</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$res</span>=DB::<span class="title function_ invoke__">select</span>(<span class="string">&quot;select * from member&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h3 id="8-视图操作resources-views"><a href="#8-视图操作resources-views" class="headerlink" title="8.视图操作resources&#x2F;views"></a>8.视图操作resources&#x2F;views</h3><p>其实就是-html页面把控制器中分配的数据进行处理和展示</p>
<h4 id="8-1-视图文件命名与渲染"><a href="#8-1-视图文件命名与渲染" class="headerlink" title="8.1.视图文件命名与渲染"></a>8.1.视图文件命名与渲染</h4><ol>
<li>文件名习惯小写（建议小写）</li>
<li>文件名后缀blade.php（因为laravel里面有一套模板引擎就是使用blade，可以直接使用标签语法）,也可以使用原生php语法显示数据）</li>
<li>也可以不使用blade，这样话就没有模板引擎了，两个视图文件同时存在以模板引擎后缀优先显示</li>
<li>展示视图：控制器中调用return view(‘viewname’);</li>
<li>视图支持分目录管理。控制器中可以使用&#x2F;或.进行目录分隔</li>
</ol>
<h4 id="8-2-变量分配与展示（数据交互"><a href="#8-2-变量分配与展示（数据交互" class="headerlink" title="8.2.变量分配与展示（数据交互"></a>8.2.变量分配与展示（数据交互</h4><p>语法：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">view</span>(viewname,数组)</span><br><span class="line"><span class="title function_ invoke__">view</span>(viewname)-&gt;<span class="title function_ invoke__">with</span>(数组)</span><br><span class="line"><span class="title function_ invoke__">view</span>(viewname)-&gt;<span class="title function_ invoke__">with</span>(名称，值)-&gt;<span class="title function_ invoke__">with</span>(名称,值)</span><br><span class="line"><span class="comment">//举例 控制器中传参$date,$day</span></span><br><span class="line"><span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;testview&#x27;</span>,[<span class="string">&#x27;date&#x27;</span>=&gt;<span class="variable">$date</span>,<span class="string">&#x27;day&#x27;</span>=&gt;<span class="variable">$day</span>]);</span><br><span class="line">    <span class="comment">//调用 视图中展示</span></span><br><span class="line">	&#123;&#123;<span class="variable">$date</span>&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>模板输出：</p>
<h4 id="8-3-补充：compact函数传递参数"><a href="#8-3-补充：compact函数传递参数" class="headerlink" title="8.3.补充：compact函数传递参数"></a>8.3.补充：compact函数传递参数</h4><p>Compact函数是php内置函数 ，跟laravel框架没关系,用于打包数组</p>
<p>语法:compact(‘变量名1’,’变量名2’,……)</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//优化上面案例</span></span><br><span class="line"><span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;testview&#x27;</span>,<span class="title function_ invoke__">compact</span>(<span class="string">&#x27;date&#x27;</span>,<span class="string">&#x27;day&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h4 id="8-4-在视图中使用函数"><a href="#8-4-在视图中使用函数" class="headerlink" title="8.4.在视图中使用函数"></a>8.4.在视图中使用函数</h4><p>在视图模板中我们可以使用函数去处理变量</p>
<p>语法：<code>&#123;&#123;函数名(参数1,参数2)&#125;&#125;</code></p>
<p>说明：函数名可以是php内置的，也可以是laravel框架中定义的</p>
<p>案例：在数据库中存储时间都是以时间戳存储，但在页面上展示不适合使用时间戳。需要对其进行格式化处理。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//控制器传递时间戳</span></span><br><span class="line"><span class="variable">$time</span>=<span class="title function_ invoke__">strtotime</span>(<span class="string">&#x27;+1 year&#x27;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;test&#x27;</span>,<span class="title function_ invoke__">compact</span>(<span class="string">&#x27;time&#x27;</span>));</span><br><span class="line"><span class="comment">//test模板</span></span><br><span class="line">&#123;&#123;<span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>,<span class="variable">$time</span>)&#125;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-5-循环与分支语法标签"><a href="#8-5-循环与分支语法标签" class="headerlink" title="8.5.循环与分支语法标签"></a>8.5.循环与分支语法标签</h4><p>视图中遍历数据</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//php循环</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$variable</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)&#123;</span><br><span class="line">    <span class="comment">//循环体</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//laravel视图中</span></span><br><span class="line">@<span class="keyword">foreach</span>(<span class="variable">$variable</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)</span><br><span class="line">    <span class="comment">//循环体</span></span><br><span class="line">@<span class="keyword">endforeach</span></span><br><span class="line"></span><br><span class="line">@<span class="keyword">if</span>(条件)</span><br><span class="line">    语句<span class="number">1</span></span><br><span class="line">@<span class="keyword">elseif</span>(条件)</span><br><span class="line">    语句<span class="number">2</span></span><br><span class="line">@<span class="keyword">else</span></span><br><span class="line">    语句<span class="number">3</span></span><br><span class="line">@<span class="keyword">endif</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//举例</span></span><br><span class="line"><span class="comment">//控制器</span></span><br><span class="line"><span class="variable">$data</span>=DB::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;testTable&#x27;</span>)-&gt;<span class="title function_ invoke__">get</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;test&#x27;</span>,<span class="title function_ invoke__">compact</span>(<span class="string">&#x27;data&#x27;</span>));</span><br><span class="line"><span class="comment">//test模板</span></span><br><span class="line">@<span class="keyword">foreach</span>(<span class="variable">$date</span> <span class="keyword">as</span> <span class="variable">$val</span>)</span><br><span class="line">	id:&#123;&#123;<span class="variable">$val</span>-&gt;id&#125;&#125;，name:&#123;&#123;<span class="variable">$val</span>-&gt;name&#125;&#125;</span><br><span class="line">@<span class="keyword">endforeach</span></span><br></pre></td></tr></table></figure>

<h4 id="8-6-模板继承-包含"><a href="#8-6-模板继承-包含" class="headerlink" title="8.6.模板继承&#x2F;包含"></a>8.6.模板继承&#x2F;包含</h4><p>用于制作公共部分页面</p>
<p>语法：@yield(‘名字’) 在父级页面中的占位</p>
<p>父级页面parent</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>头部<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">@yield(&#x27;mainbody&#x27;)</span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>尾部<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>子级界面</p>
<p>语法：@extends(‘父级文件名’)	 相对路径根view</p>
<p>​			通过section标签绑定区块&#x2F;部件到父级页面，区块名称就是父级页面yield标签参数名</p>
<p>​			@section(区块名称)</p>
<p>​			代码</p>
<p>​			@endsection</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">@extends(‘parent&#x27;)</span><br><span class="line">@section(&#x27;mainbody&#x27;)</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    正文内容</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">@endsection</span><br></pre></td></tr></table></figure>

<p>模板包含：@include(‘模板文件名’)</p>
<p>继承模板留空：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;@<span class="keyword">yield</span>(<span class="string">&#x27;title&#x27;</span>)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">@<span class="keyword">yield</span>(<span class="string">&#x27;content&#x27;</span>)</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>填空：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">@<span class="keyword">extends</span>(<span class="string">&#x27;wap.base&#x27;</span>)</span><br><span class="line"></span><br><span class="line">@<span class="title function_ invoke__">section</span>(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">    aa</span><br><span class="line">@endsection</span><br><span class="line"></span><br><span class="line">@<span class="title function_ invoke__">section</span>(<span class="string">&#x27;content&#x27;</span>)</span><br><span class="line">    &lt;h1&gt;我是aa&lt;/h1&gt;</span><br><span class="line">@endsection</span><br></pre></td></tr></table></figure>



<h4 id="8-7-外部静态文件引入"><a href="#8-7-外部静态文件引入" class="headerlink" title="8.7.外部静态文件引入"></a>8.7.外部静态文件引入</h4><p>原先</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/app.css&quot;</span>&gt;</span></span><br><span class="line">源码中显示效果href=&quot;/css/app.css&quot;</span><br></pre></td></tr></table></figure>

<p>现在laravel中系统封装了asset方法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;asset(&#x27;css/app.css&#x27;)&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">源码中显示效果href=&quot;域名/css/app.css&quot;</span><br></pre></td></tr></table></figure>

<h3 id="9-CSRF攻击"><a href="#9-CSRF攻击" class="headerlink" title="9.CSRF攻击"></a>9.CSRF攻击</h3><h4 id="9-1-什么是CSRF攻击"><a href="#9-1-什么是CSRF攻击" class="headerlink" title="9.1.什么是CSRF攻击"></a>9.1.什么是CSRF攻击</h4><p>CSRF是跨站请求伪造(Cross-site request forgery)的英文缩写</p>
<p>Laravel框架中避免CSRF攻击很简单，Laravel自动为每个用户Session生成了一个CSRF Token，该Token可用于验证登陆用户和发起请求者是否是同一人，如果不是则请求失败。和验证码原理一致</p>
<p>Laravel提供了一个全局帮助函数csrf token来获取该Token值，因此只需在视图提交中添加如下HTML代码即可在请求中带上Token</p>
<p>php模板：<code> &lt;input type=&quot;hidden&quot; name=&quot;_token&quot; value=&quot;&lt;?php echo csrf_token();&gt;&quot;&gt;</code></p>
<p>blade模板：<code>&lt;input type=&quot;hidden&quot; name=&quot;_token&quot; value=&quot;&#123;&#123;csrf_token()&#125;&#125;&quot;&gt;</code></p>
<h3 id="简写：-csrf-field"><a href="#简写：-csrf-field" class="headerlink" title="简写：{ {csrf_field()} }"></a><strong>简写：<code>&#123; &#123;csrf_field()&#125; &#125;</code></strong></h3><p><strong>异步提交</strong>时没有选择权，只能使用<code>csrf_token：$get(url,&#123;csrf_token;&#125;);</code></p>
<h4 id="9-2-CSRF验证排除例外路由"><a href="#9-2-CSRF验证排除例外路由" class="headerlink" title="9.2.CSRF验证排除例外路由"></a>9.2.CSRF验证排除例外路由</h4><p>不是所有请求都需要避免CSRF攻击，比如第三方api获取数据请求</p>
<p>可以通过在VerifyCsrfToken（app&#x2F;Http&#x2F;Middleware&#x2F;VerifyCsrfToken.php)中间件将要排除的请求URL添加到$except属性数组中</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="variable">$except</span>=[</span><br><span class="line">  <span class="comment">//此处填写需要排除csrf验证的路由</span></span><br><span class="line">    <span class="string">&#x27;home/test&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;home/test2&#x27;</span>,</span><br><span class="line">  <span class="comment">//星号排除全部</span></span><br><span class="line">	<span class="string">&#x27;*&#x27;</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="10-模型操作-AR模式"><a href="#10-模型操作-AR模式" class="headerlink" title="10.模型操作(AR模式)"></a>10.模型操作(AR模式)</h3><p>Laravel自带的Eloquent ORM提供了一个美观、简单的与数据库打交道的ActiveRecord实现，<strong>每张数据表都对应一个与该表进行交互的“Model模型”</strong>，模型允许你在表中进行数据查询，以及插入、更新、删除等操作</p>
<blockquote>
<p>AR模型三核心(映射)：</p>
<p>每个数据表	与数据表进行交互的Model模型映射(实例化模型)</p>
<p>记录中的字段	与模型类的属性映射(给属性赋值)</p>
<p>表中的每个记录 	与一个完整的请求实例映射(具体的CURD操作)</p>
</blockquote>
<h4 id="10-1-定义模型"><a href="#10-1-定义模型" class="headerlink" title="10.1.定义模型"></a>10.1.定义模型</h4><ol>
<li><p>位置：app目录下，建议分目录管理</p>
</li>
<li><p>命名规则：一般使用 表名(首字母大写).php</p>
</li>
<li><p>创建模型：php artisan make:model Models&#x2F;Member</p>
</li>
<li><p><strong>定义模型注意事项</strong>：</p>
<ol>
<li>定义$table属性，值为不要前缀的表名，如果不指定则使用类名的复数形式作为表名，不定义默认找members表。修饰词:protected</li>
<li>定义$primarKey属性，值为主键名称，如果需要使用AR模式find方法，则可能需要指定主键(Model::find(n))。修饰词:protected</li>
<li>定义$timestamps属性，值为false，如果不设置false，则默认会操作表中的created_at和updated_at字段，我们表中一般没有，所以设置false，表示不操作这两个字段。修饰词:public</li>
<li>定义$fillable属性，表示使用模型插入数据时，允许插入到数据库的字段信息。修饰词:protected</li>
<li>使用模型create插入数据，设置$fillable允许入库字段，使用$guarded是设置排除入库字段</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Home</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Member</span> <span class="keyword">extends</span> <span class="title">Model</span></span>&#123;</span><br><span class="line">    <span class="comment">//定义模型关联数据表，一个模型一个表</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$table</span>-<span class="string">&#x27;member&#x27;</span>;</span><br><span class="line">    <span class="comment">//定义主键，可选</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$primaryKey</span>=<span class="string">&#x27;id&#x27;</span>;</span><br><span class="line">    <span class="comment">//定义禁止操作时间</span></span><br><span class="line"> <span class="keyword">public</span> <span class="variable">$timestamps</span>=<span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//设置允许写入的数据字段</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$fillable</span>=[<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="10-2-模型控制器调用"><a href="#10-2-模型控制器调用" class="headerlink" title="10.2.模型控制器调用"></a>10.2.模型控制器调用</h4><p>引入Member模型类，use App\Home\Member</p>
<p>模型在控制器中使用方式有2种</p>
<ol>
<li>直接像使用DB门面一样的操作方式，以调用静态方法为主的形式，该形式模型下不需要实例化，例如：Member::get() 等价于DB::table(‘member’)-&gt;get();</li>
<li>实例化模型然后再使用模型类(普通)，例如：$model&#x3D;new Member();$model-&gt;get();</li>
</ol>
<h4 id="10-3-添加数据"><a href="#10-3-添加数据" class="headerlink" title="10.3.添加数据"></a>10.3.添加数据</h4><ol>
<li><p>AR模式：必须实例化模型</p>
<p>$member&#x3D;new Member(); &#x2F;&#x2F;映射关系1，将表映射到模型</p>
<p>$member-&gt;name&#x3D;value; &#x2F;&#x2F;映射关系2，将字段映射打属性，属性名和字段名一致</p>
<p>$member-&gt;age&#x3D;value;&#x2F;&#x2F;映射关系3：将记录映射到实例</p>
</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   	<span class="comment">//实例化模型 表类映射</span></span><br><span class="line">    <span class="variable">$model</span>=<span class="keyword">new</span> <span class="title class_">Member</span>();</span><br><span class="line">    <span class="comment">//属性赋值 字段类属性映射</span></span><br><span class="line">    <span class="variable">$model</span>-&gt;name=<span class="string">&#x27;zhangsan&#x27;</span>;</span><br><span class="line">    <span class="variable">$model</span>-&gt;age=<span class="string">&#x27;15&#x27;</span>;</span><br><span class="line">    <span class="comment">//具体操作 记录映射实例</span></span><br><span class="line">    <span class="variable">$model</span>-&gt;<span class="title function_ invoke__">save</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不推荐，一个个字段添加</p>
<ol>
<li><p>推荐，可以使用数组</p>
<p>建立简单表单，提交姓名年龄</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">Request <span class="variable">$request</span></span>)</span>&#123;</span><br><span class="line">	<span class="variable">$model</span>=<span class="keyword">new</span> <span class="title class_">Member</span>();</span><br><span class="line">    <span class="comment">//添加</span></span><br><span class="line">    <span class="variable">$result</span>=<span class="variable">$model</span>-&gt;<span class="title function_ invoke__">create</span>(<span class="variable">$request</span>-&gt;<span class="title function_ invoke__">all</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>request语法</p>
<p>$request-&gt;all() 返回数组</p>
<p>$request-&gt;input(‘name’)</p>
<p>$request-&gt;only([‘name1’,’name2])</p>
<p>$request-&gt;except([‘name1’,’name2])</p>
<p>$request-&gt;has(‘name’)</p>
<p>$request-&gt;get(‘name’)</p>
</li>
</ol>
<h4 id="10-4-查询数据"><a href="#10-4-查询数据" class="headerlink" title="10.4.查询数据"></a>10.4.查询数据</h4><p>获取指定主键一条数据</p>
<p>$info&#x3D;Member::find(4); &#x2F;&#x2F;获取主键为4的数据</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params">Request <span class="variable">$request</span></span>)</span>&#123;</span><br><span class="line">	<span class="variable">$info</span>=<span class="title class_">Member</span>::<span class="title function_ invoke__">find</span>(<span class="number">4</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$info</span>-&gt;name;<span class="comment">//结果为对象</span></span><br><span class="line">    <span class="comment">//如果需要将对象结果集转数组</span></span><br><span class="line">    -&gt;<span class="title function_ invoke__">get</span>()-&gt;<span class="title function_ invoke__">toArray</span>();</span><br><span class="line">    <span class="comment">//如下</span></span><br><span class="line">    <span class="variable">$info</span>=<span class="title class_">Member</span>::<span class="title function_ invoke__">find</span>(<span class="number">4</span>)-&gt;<span class="title function_ invoke__">toArray</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>获取符合指定条件的第一条记录</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test3</span>(<span class="params">Request <span class="variable">$request</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$rest</span>=<span class="title class_">Member</span>::<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;&gt;&#x27;</span>,<span class="string">&#x27;4&#x27;</span>)-&gt;<span class="title function_ invoke__">toArray</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>查询多行并指定字段</p>
<p>Member::all()		Member::all(字段1，字段2);</p>
<p>Member::get() 	Member::get([字段1，字段2]);</p>
<p>按条件查询指定多个字段<br>Member::where(‘id’,’&gt;’,’4’)-&gt;get([列1,列2]);	数组选列</p>
<p>Member::where(‘id’,’&gt;’,’4’)-&gt;select(列1,列2)-&gt;get();  字符串选列</p>
<p>Member::where(‘id’,’&gt;’,’4’)-&gt;select([列1,列2])-&gt;get();  字符串选列</p>
<h4 id="10-4-修改数据"><a href="#10-4-修改数据" class="headerlink" title="10.4.修改数据"></a>10.4.修改数据</h4><p><strong>注意：在laravel里面如果需要更新数据（ORM模型方式），需要先调用模型的find方法获取对应记录，返回一个模型对象，然后为该模型对象设置要更新的数据（对象的属性）。最后调用save方法即可。</strong></p>
<p>例如：</p>
<p>$user&#x3D;User::find($id);</p>
<p>$user-&gt;title&#x3D;$_POST[‘title’];</p>
<p>$user-&gt;content&#x3D;$_POST[‘content’];</p>
<p>$user-&gt;save()</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test4</span>(<span class="params">Request <span class="variable">$request</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$rest</span>=<span class="variable">$model</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>,<span class="number">7</span>)-&gt;<span class="title function_ invoke__">update</span>([<span class="string">&#x27;age&#x27;</span>-&gt;‘<span class="number">10</span><span class="string">&#x27;]);</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="10-5-删除数据"><a href="#10-5-删除数据" class="headerlink" title="10.5.删除数据"></a>10.5.删除数据</h4><p><strong>注意：在laravel里面如果要删除数据，如果需要使用AR模型删除数据必须先根据主键id查询对应记录，返回模型对象，然后调用模型对象的delete</strong></p>
<p>例如代码：</p>
<p>$user&#x3D;User::find($id);</p>
<p>$uesr-&gt;delete();</p>
<h3 id="11-自动验证"><a href="#11-自动验证" class="headerlink" title="11.自动验证"></a>11.自动验证</h3><p>前端可通过JS验证表单数据有效性，但如果用户浏览器过低或直接禁用js，则前端验证可能失效，这样就不能保证数据有效性。所以后端也需要做相应的验证操作，这个操作在laravel中称为自动验证</p>
<h4 id="11-1-准备工作"><a href="#11-1-准备工作" class="headerlink" title="11.1.准备工作"></a>11.1.准备工作</h4><p>可以使用有表单的视图，建好路由控制器方法跳转到视图</p>
<h4 id="11-2-验证方法"><a href="#11-2-验证方法" class="headerlink" title="11.2.验证方法"></a>11.2.验证方法</h4><ol>
<li><p>基本语法</p>
<p>使用控制器中的validate方法来完成，$this-&gt;validate($request,[验证规则];)如果验证失败，laravel会自动将用户重新定向回上一个位置，并将验证错误信息一次性存放到session中</p>
</li>
</ol>
<p>扩展：如何得知请求类型。</p>
<p>语法：$request-&gt;method()   获取当前请求方法 返回GET或POST</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test13</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$request</span>-&gt;<span class="title function_ invoke__">method</span>()==<span class="string">&quot;POST&quot;</span>)&#123;</span><br><span class="line">     	</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>基本规则</p>
<p>required:不能为空</p>
<p>max:255 最长255字符</p>
<p>min:1 最少1字符</p>
<p>email:验证邮箱是否合法</p>
<p>confirmed:验证两个字段是否相同,如果验证的字段是password，则必须输入一个与之匹配的password_confirmation字段</p>
<p>integer:验证字段必须是整型</p>
<p>numeric:字段必须数值</p>
<p>ip:必须是ip</p>
<p>size:value 验证字段必须有和给定value相匹配的尺寸，字符串是字符数，数值是给定整型值，文件对应文件字节数,固定值</p>
<p>string:必须是字符串</p>
<p>unique:表名，字段，需要排除的ID</p>
<p>alpha:必须字母</p>
<p><strong>多个验证规则通过“|”字符进行隔开</strong></p>
<p>语法：$this-&gt;validat(数据对象,[数组形式验证规则]);</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test13</span>(<span class="params">Request <span class="variable">$request</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$request</span>-&gt;<span class="title function_ invoke__">method</span>()==<span class="string">&quot;POST&quot;</span>)&#123;</span><br><span class="line">     	<span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">validate</span>(<span class="variable">$request</span>,[</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span>=&gt;<span class="string">&#x27;required|min:2|max:20&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;age&#x27;</span>=&gt;<span class="string">&#x27;required|integer|min:1|max:120&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;email&#x27;</span>=&gt;<span class="string">&#x27;required|email&#x27;</span></span><br><span class="line">        ]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="11-3-错误信息输出（放视图文件里头"><a href="#11-3-错误信息输出（放视图文件里头" class="headerlink" title="11.3.错误信息输出（放视图文件里头"></a>11.3.错误信息输出（放视图文件里头</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">@<span class="keyword">if</span>(<span class="title function_ invoke__">count</span>(<span class="variable">$errors</span>)&gt;<span class="number">0</span>)</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">alert</span> <span class="title">alert</span>-<span class="title">danger</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    	&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">    		@<span class="title">foreach</span>($<span class="title">errors</span>-&gt;<span class="title">all</span>() <span class="title">as</span> $<span class="title">error</span>)</span></span><br><span class="line"><span class="class">    			&lt;<span class="title">li</span>&gt;</span>&#123;&#123;<span class="variable">$error</span>&#125;&#125;&lt;/li&gt;</span><br><span class="line">    		@<span class="keyword">endforeach</span></span><br><span class="line">    	&lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">@<span class="keyword">endif</span></span><br></pre></td></tr></table></figure>

<h4 id="11-4-错误信息英转中"><a href="#11-4-错误信息英转中" class="headerlink" title="11.4.错误信息英转中"></a>11.4.错误信息英转中</h4><p><a href="https://packagist.org/">https://packagist.org</a> 下载 laravel-lang</p>
<p>在项目根目录cmd输入说明里的安装指令:composer require caouecs&#x2F;laravel-lang:~3.0</p>
<p>语言包文件再vendor&#x2F;caous&#x2F;laravel-lang中，将你需要的语言目录复制到resources&#x2F;lang即可，一般找zh-cn</p>
<p>然后再config&#x2F;app.php中修改locale的值，改成你复制过来的语言包的文件夹名字</p>
<p>翻译不准可以去zh-cn文件夹下修改语言包文件代码</p>
<h3 id="12-分页"><a href="#12-分页" class="headerlink" title="12.分页"></a>12.分页</h3><p>表：news</p>
<p>建好模型</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">News</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$table</span>=<span class="string">&quot;news&quot;</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$primaryKey</span>=<span class="string">&#x27;id&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$timestamps</span>=<span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$fillable</span>=[<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;title&#x27;</span>,<span class="string">&#x27;content&#x27;</span>,<span class="string">&#x27;image&#x27;</span>,<span class="string">&#x27;auther&#x27;</span>,<span class="string">&#x27;class&#x27;</span>,<span class="string">&#x27;time&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>控制器</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">News</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">homenews</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$homenews</span>=<span class="title class_">News</span>::<span class="title function_ invoke__">where</span>(<span class="string">&#x27;class&#x27;</span>,<span class="string">&#x27;3&#x27;</span>)-&gt;<span class="title function_ invoke__">orderBy</span>(<span class="string">&#x27;time&#x27;</span>,<span class="string">&#x27;desc&#x27;</span>)-&gt;<span class="title function_ invoke__">paginate</span>(<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;homenews&#x27;</span>,[<span class="string">&quot;homenews&quot;</span>=&gt;<span class="variable">$homenews</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>视图</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">row</span> <span class="title">justify</span>-<span class="title">content</span>-<span class="title">center</span> <span class="title">mt</span>-4&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">md</span>-4 <span class="title">pl</span>-5&quot;&gt;</span></span><br><span class="line"><span class="class">		</span>&#123;&#123;<span class="variable">$hotdate</span>-&gt;<span class="title function_ invoke__">links</span>()&#125;&#125;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>后端</category>
        <category>Php</category>
      </categories>
      <tags>
        <tag>Php</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql数据库常用命令</title>
    <url>/2020/04/03/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>登陆数据库：mysql -h localhost -u root -p</p>
<h1 id="1-数据库操作"><a href="#1-数据库操作" class="headerlink" title="1.数据库操作"></a>1.数据库操作</h1><p>显示数据库：<code>show databases;</code></p>
<p>创建数据库：<code>create database if not exists [数据库名字]</code></p>
<p>创建数据库并指定字符集：<code>create database [库名] character set gbk;</code></p>
<p>删除数据库：<code>drop database [库名];</code></p>
<p>显示警告信息：<code>show warnings;</code></p>
<p>运行sql文件：<code>source /绝对路径/文件名.sql</code></p>
<h1 id="2-数据表操作"><a href="#2-数据表操作" class="headerlink" title="2.数据表操作"></a>2.数据表操作</h1><p>创建数据表:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE 表名</span><br><span class="line">(</span><br><span class="line">	字段名1 数据类型[完整的约束条件],</span><br><span class="line">	字段名2 数据类型[完整的约束条件]</span><br><span class="line">)ENGINE=InnoDB DEFAULT CHARSET=utf8;	</span><br></pre></td></tr></table></figure>

<p>数据表查询</p>
<ul>
<li><p>查看数据表：</p>
<p>​	<code>SHOW TABLES;</code></p>
</li>
<li><p>查看数据表结构：</p>
<p>​	<code>DESCRIBE 表名;</code></p>
</li>
<li><p>查看表的创建信息：</p>
<p>​	<code>show create table 表名[\G];</code></p>
</li>
</ul>
<p>对表操作</p>
<ul>
<li><h4 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h4><p>ALTER TABLE 旧表名 RENAME [TO] 新表名;<br>  例子：<code>alter table sc rename score;</code></p>
</li>
<li><h4 id="修改表的存储引擎"><a href="#修改表的存储引擎" class="headerlink" title="修改表的存储引擎"></a>修改表的存储引擎</h4><p>ALTER TABLE 表名 ENGINE&#x3D;&lt;更改后的存储引擎名&gt;;<br>  例子：<code>alter table student engine = myisam;</code></p>
</li>
<li><h4 id="修改表的字符集"><a href="#修改表的字符集" class="headerlink" title="修改表的字符集"></a>修改表的字符集</h4><p>ALTER TABLE 表名 CHARACTER SET 更改后的字符集 ;<br>例子：<code>alter table student modify sno varchar(10) character set utf8;</code></p>
</li>
<li><h4 id="复制表"><a href="#复制表" class="headerlink" title="复制表"></a>复制表</h4><p><code>create table 新表名 select * from 旧表;</code></p>
</li>
<li><h4 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h4><p><code>drop table 表名;</code></p>
</li>
</ul>
<h1 id="3-字段操作"><a href="#3-字段操作" class="headerlink" title="3.字段操作"></a>3.字段操作</h1><p>​	</p>
<ul>
<li><p>字段约束目录</p>
<ul>
<li>PRIMARY KEY 主键约束			<br>NOT NULL 非空约束			<br> UNIQUE 唯一约束			<br> DEFAULT 默认值约束			<br> FOREIGN KEY 外键约束			<br> AUTO_INCREMENT 自动增加值</li>
</ul>
<p>			</p>
</li>
<li><h4 id="增删改字段操作"><a href="#增删改字段操作" class="headerlink" title="增删改字段操作"></a>增删改字段操作</h4><ul>
<li>添加字段<br>ALTER TABLE 表名 ADD  新字段名  数据类型 [列级约束条件]<br>例子：<code>alter table student add class char(10) after ssex;</code></li>
<li>删除字段<br>ALTER TABLE 表名 DROP 字段名;<br> 例子：<code>alter table student drop class;</code></li>
<li>修改字段的数据类型<br>ALTER TABLE 表名 MODIFY 字段名  数据类型;<br> 例子：<code>alter table product modify ProductID int(11) AUTO_INCREMENT;</code></li>
<li>修改字段名和数据类型<br>ALTER TABLE 表名 CHANGE 旧字段名  新字段名 新数据类型;<br> 例子：<code>alter table student change sbirthday sbirth date;</code></li>
</ul>
</li>
<li><h4 id="字段约束添加"><a href="#字段约束添加" class="headerlink" title="字段约束添加"></a>字段约束添加</h4><ul>
<li>外键约束添加删除<ul>
<li>添加：ALTER TABLE 从表<br>ADD CONSTRAINT 外键名 foreign key (被加字段) references 主表(主表字段);</li>
<li>删除:alter table table_name drop foreign key 约束名</li>
</ul>
</li>
<li>主键添加删除<ul>
<li>先删后加:</li>
<li>删除:alter table table_name drop primary key</li>
<li>添加:alter table table_name add primary key (字段)</li>
</ul>
</li>
<li>复合主键添加<ul>
<li>多个字段组合而成的主键，表级约束</li>
<li>PRIMARY KEY (字段名1,字段名2,…)</li>
</ul>
</li>
<li>非空约束添加删除<ul>
<li>添加:alter table table_name modify 列名 数据类型 not null </li>
<li>删除:alter table table_name modify 列名 数据类型 null</li>
</ul>
</li>
<li>唯一约束添加删除<ul>
<li>添加:alter table table_name add unique 约束名（字段） </li>
<li>删除:alter table table_name drop key 约束名</li>
</ul>
</li>
<li>自增添加删除<ul>
<li>添加:alter table table_name modify 列名 int auto_increment </li>
<li>删除:alter table table_name modify 列名 int</li>
</ul>
</li>
<li>默认值添加删除<ul>
<li>添加:alter table table_name alter 列名 set default ‘值’ </li>
<li>删除:alter table table_name alter 列名 drop default</li>
</ul>
</li>
</ul>
</li>
<li><p>查看表字段信息</p>
<ul>
<li>查看表的字段信息：desc table_name;</li>
</ul>
</li>
</ul>
<h1 id="4-对数据表数据操作"><a href="#4-对数据表数据操作" class="headerlink" title="4.对数据表数据操作"></a>4.对数据表数据操作</h1><ul>
<li><h4 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h4><ul>
<li><p>为所有字段添加数据<br>INSERT [INTO] 数据表名(字段列表)  VALUES(值列表);<br><code>insert into student(sno,sname,ssex) values(&#39;1001&#39;,&#39;曹操&#39;,&#39;男&#39;);</code></p>
<p>如果向表中所有字段插入数据，可以省略字段列，可以写成：<br><code>insert into student values(&#39;1002&#39;,&#39;刘备&#39;,&#39;男&#39;);</code></p>
</li>
<li><p>为部分字段添加数据</p>
<p>​	INSERT [INTO] 数据表名 (字段名1 [, 字段名2] …) VALUES (值1[, 值2] …);<br>​	INSERT [INTO] 数据表名 SET 字段名1 &#x3D; 值1 [, 字段名2 &#x3D; 值2]<br>​	字段名必须与数据相对应 一次只能加一条<br>​	<code>insert into student set sno=&#39;1004&#39;,sname=&#39;貂蝉&#39;,classno=&#39;19004&#39;;</code><br>​	<code>insert into student(sno,sname,classno) values (&#39;1003&#39;,&#39;吕布&#39;,&#39;19001&#39;);</code></p>
</li>
<li><p>一次添加多行数据<br>INSERT [INTO] 数据表名 [(字段列表)] VALUES (值列表) [, (值列表)] …;</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  insert into student values</span><br><span class="line">  (&#x27;1005&#x27;,&#x27;司马懿&#x27;,null,null,null,null,&#x27;19003&#x27;),</span><br><span class="line">(&#x27;1006&#x27;,&#x27;大乔&#x27;,&#x27;女&#x27;,null,null,null,&#x27;19003&#x27;),</span><br><span class="line">  (&#x27;1007&#x27;,&#x27;小乔&#x27;,&#x27;女&#x27;,null,null,null,&#x27;19003&#x27;);</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><p>DELETE FROM 数据表名 [WHERE 条件表达式];<br>有WHERE条件，删除满足条件的记录，无WHERE条件，系统就会自动删除该表中所有的记录。<br>删除example01表中所有记录：<code>select * from example01;</code><br>删除student表sno字段为1002的记录：<code>delete from student where sno = &#39;1002&#39;;</code></p>
</li>
<li><h4 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h4><p>查询当前表数据： <code>SELECT * FROM 数据表名</code></p>
</li>
<li><h4 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h4><p>UPDATE 数据表名 SET 字段名1 &#x3D; 值1 [, 字段名2 &#x3D; 值2, …][WHERE 条件表达式];<br>有WHERE条件，修改符合要求的对应字段，无WHERE条件，修改表中所有对应的字段。<br><code>update student set classno = &#39;19003&#39; where sname = &#39;貂蝉&#39;;</code></p>
</li>
</ul>
<h2 id="5-数据导出"><a href="#5-数据导出" class="headerlink" title="5.数据导出"></a>5.数据导出</h2><ul>
<li><h4 id="使用-SELECT-…-INTO-OUTFILE-语句导出数据"><a href="#使用-SELECT-…-INTO-OUTFILE-语句导出数据" class="headerlink" title="使用 SELECT … INTO OUTFILE 语句导出数据"></a>使用 SELECT … INTO OUTFILE 语句导出数据</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT 导出的字段 FROM 导出的表 </span><br><span class="line">INTO OUTFILE &#x27;路径(双反斜杠)&#x27; </span><br><span class="line">character set utf8</span><br><span class="line">FIELDS</span><br><span class="line">	TERMINATED BY &#x27;,&#x27;		-- 字段之间用,间隔   默认&#x27;\t&#x27;</span><br><span class="line">	ENCLOSED BY &#x27;\&quot;&#x27;		-- 设置字段包围字符</span><br><span class="line">	ESCAPED BY &#x27;\&#x27;&#x27;			-- 转义字符，默认为&#x27;\&#x27;</span><br><span class="line">LINES</span><br><span class="line">	STARTING BY &#x27;val&#x27;;		-- 每行的开头字符，默认不使用任何字符</span><br><span class="line">	TERMINATED BY &#x27;\r\n&#x27;;	-- 每行的结尾字符，默认为&#x27;\n&#x27;</span><br><span class="line"></span><br><span class="line">-- 例子：</span><br><span class="line">SELECT * FROM student </span><br><span class="line">INTO OUTFILE &#x27;C:\\ProgramData\\MySQL\\MySQL Server 5.7\\Uploads\\myschool35stu.txt&#x27; </span><br><span class="line">character set utf8</span><br><span class="line">FIELDS</span><br><span class="line">	TERMINATED BY &#x27;,&#x27;</span><br><span class="line">	ENCLOSED BY &#x27;\&quot;&#x27;</span><br><span class="line">	ESCAPED BY &#x27;\&#x27;&#x27;</span><br><span class="line">LINES</span><br><span class="line">	TERMINATED BY &#x27;\r\n&#x27;;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="6-视图"><a href="#6-视图" class="headerlink" title="6.视图"></a>6.视图</h2><ul>
<li>创建视图命令：<code> create view 视图名字 as</code></li>
<li>删除视图命令：<code>drop view 视图名;</code></li>
<li>修改视图数据：<code>update view_s set sname = &#39;安琪拉&#39; where sno = &#39;2005020301&#39;</code></li>
<li>删除视图数据：<code>delete from view_s where sname =&#39;安琪拉&#39;</code></li>
</ul>
<h2 id="7-索引"><a href="#7-索引" class="headerlink" title="7.索引"></a>7.索引</h2><ul>
<li><p>创建索引</p>
<ul>
<li><p>建表时</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE &lt;表名&gt;</span><br><span class="line">	(</span><br><span class="line">    &lt;字段1&gt; &lt;数据类型1&gt; [&lt;列级完整性约束条件1&gt;],</span><br><span class="line">    &lt;字段2&gt; &lt;数据类型2&gt; [&lt;列级完整性约束条件2&gt;],</span><br><span class="line">    [UNIQUE|FULLTEXT|SPATIAL] &lt;INDEX|KEY&gt; [索引名](属性名[(长度)] [,…]) </span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">create table test_index</span><br><span class="line">	(</span><br><span class="line">	tid int,</span><br><span class="line">	tname varchar(20),</span><br><span class="line">	tcount double,</span><br><span class="line">	index index_tid (tid) -- 普通索引</span><br><span class="line">    unique index index_test(tid,tname) -- 唯一索引</span><br><span class="line">	);</span><br></pre></td></tr></table></figure>
</li>
<li><p>建表后</p>
<ul>
<li>create语句：<code>create [UNIQUE|FULLTEXT|SPATIAL] INDEX 索引名 on 表(字段);</code></li>
<li>alter语句：<code>ALTER TABLE 表名 ADD  [UNIQUE|FULLTEXT|SPATIAL] INDEX 索引名 (属性名[(长度)] [,…]);</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="6-用户管理"><a href="#6-用户管理" class="headerlink" title="6.用户管理"></a>6.用户管理</h2><h3 id="1-查看用户"><a href="#1-查看用户" class="headerlink" title="1.查看用户"></a>1.查看用户</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select user,host from mysql.user;</span><br></pre></td></tr></table></figure>

<h3 id="2-创建用户"><a href="#2-创建用户" class="headerlink" title="2.创建用户"></a>2.创建用户</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">不带密码</span><br><span class="line">create user user1@localhost;</span><br><span class="line">带密码</span><br><span class="line">create user userA@localhost identified by &#x27;123&#x27;</span><br><span class="line">创建多个</span><br><span class="line">create user</span><br><span class="line">user2@localhost identified by &#x27;user2&#x27;,</span><br><span class="line">user3@localhost identified by &#x27;user3&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="3-删除用户"><a href="#3-删除用户" class="headerlink" title="3.删除用户"></a>3.删除用户</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">drop user test1,tets2@localhost;</span><br></pre></td></tr></table></figure>

<h3 id="4-修改密码"><a href="#4-修改密码" class="headerlink" title="4.修改密码"></a>4.修改密码</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER USER 账户名 IDENTIFIED BY &#x27;明文密码&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="5-修改用户名"><a href="#5-修改用户名" class="headerlink" title="5.修改用户名"></a>5.修改用户名</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rename user 旧用户名 to 新用户名;</span><br><span class="line">将用户user1和user2的名字分别修改为test1和test2。</span><br><span class="line">rename user &#x27;user1&#x27; to &#x27;test1&#x27;,&#x27;user2&#x27;@&#x27;localhost&#x27; to &#x27;tets2&#x27;@&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="7-权限管理"><a href="#7-权限管理" class="headerlink" title="7.权限管理"></a>7.权限管理</h2><h3 id="1-查看权限"><a href="#1-查看权限" class="headerlink" title="1.查看权限"></a>1.查看权限</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">看自己</span><br><span class="line">show grants</span><br><span class="line">看别人</span><br><span class="line">show grants for root@localhost</span><br></pre></td></tr></table></figure>

<h3 id="2-授予权限"><a href="#2-授予权限" class="headerlink" title="2.授予权限"></a>2.授予权限</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">授予test1用户对所有数据有查询和插入权限</span><br><span class="line">create user test1@localhost identified by &#x27;123&#x27;;</span><br><span class="line">grant select,insert</span><br><span class="line">on *.*</span><br><span class="line">to test1@localhost;</span><br><span class="line"></span><br><span class="line">gradem数据库中student表的DELETE权限授予用户user4。</span><br><span class="line">grant delete</span><br><span class="line">on gradem.student</span><br><span class="line">to user4@localhost;</span><br><span class="line"></span><br><span class="line">添加多个和grant权限</span><br><span class="line">grant delete,select,create,drop</span><br><span class="line">on gradem.student</span><br><span class="line">to user4@localhost</span><br><span class="line">with grant OPTION;</span><br><span class="line"></span><br><span class="line">使用GRANT语句将gradem数据库中sc表的degree列和cno列的UPDATE权限授予用户test1。</span><br><span class="line">grant update(degree,cno)</span><br><span class="line">on gradem.sc</span><br><span class="line">to test1@localhost;</span><br></pre></td></tr></table></figure>

<h3 id="3-回收权限"><a href="#3-回收权限" class="headerlink" title="3.回收权限"></a>3.回收权限</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">REVOKE语句收回test8用户的的所有权限，包括GRANT权限。</span><br><span class="line">revoke all privileges,grant option</span><br><span class="line">from test8@localhost;</span><br><span class="line"></span><br><span class="line">收回用户指定的权限 收回test1用户对gradem数据库中sc表的cno列的UPDATE权限</span><br><span class="line">revoke update(cno) </span><br><span class="line">on gradem.sc</span><br><span class="line">from test1@localhost;</span><br></pre></td></tr></table></figure>

<h2 id="7-存储函数"><a href="#7-存储函数" class="headerlink" title="7.存储函数"></a>7.存储函数</h2><p>存储函数格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE FUNCTION 函数名([参数名 数据类型, …]) RETURNS 返回值类型</span><br><span class="line">			[BEGIN]</span><br><span class="line">			 # 函数体</span><br><span class="line">			 RETURN 返回值数据; # 数据必须与结构中定义的返回值类型一致</span><br><span class="line">			[END]</span><br></pre></td></tr></table></figure>

<p>不带参数函数：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line">	create function sayhello() returns varchar(20)</span><br><span class="line">	begin</span><br><span class="line">		return &#x27;hello world！&#x27;;</span><br><span class="line">	end</span><br><span class="line">	$$</span><br><span class="line">	delimiter ;</span><br></pre></td></tr></table></figure>

<p>带参数函数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 带参数的函数。创建一个名为func_name的存储函数，返回某位老师的姓名。</span><br><span class="line">delimiter $$</span><br><span class="line">	create function func_name(t_tno varchar(10)) returns varchar(20)</span><br><span class="line">	begin</span><br><span class="line">		return (select tname from teacher where tno = t_tno);</span><br><span class="line">	end</span><br><span class="line">	$$ </span><br><span class="line">	delimiter ;</span><br></pre></td></tr></table></figure>

<p>查看函数创建语句</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW CREATE FUNCTION sayhello \G</span><br></pre></td></tr></table></figure>

<p>查看函数状态语句</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW FUNCTION STATUS LIKE &#x27;sayHello&#x27; \G</span><br></pre></td></tr></table></figure>

<p>调用函数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT 函数名1(实参列表), 函数名2(实参列表), …;</span><br><span class="line">select sayhello();</span><br></pre></td></tr></table></figure>

<p>删除函数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP FUNCTION [IF EXISTS] 函数名;</span><br><span class="line">drop function sayhello;</span><br></pre></td></tr></table></figure>

<h4 id="一些系统函数："><a href="#一些系统函数：" class="headerlink" title="一些系统函数："></a>一些系统函数：</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 将字符串转换为全部大写。</span><br><span class="line">SELECT UPPER(&#x27;Welcome to My SQL&#x27;);</span><br><span class="line">-- 将字符串转换为全部小写。</span><br><span class="line">SELECT LOWER(&#x27;Welcome to My SQL&#x27;);</span><br><span class="line">-- 去掉字符串前后的空格。</span><br><span class="line">SELECT TRIM(&#x27;  Welcome to My SQL  &#x27;);</span><br><span class="line">-- 截取从第12个字符开始的10个字符。</span><br><span class="line">SELECT MID(&#x27;Welcome to My SQL&#x27;,12,10);</span><br><span class="line"></span><br><span class="line">#使用日期型函数，获得输出结果见下表。</span><br><span class="line">#输出结果：</span><br><span class="line">#年份 月份 日期 星期几</span><br><span class="line">#2009 11 18 2</span><br><span class="line">SELECT YEAR(&#x27;2009-11-18&#x27;)  年份,MONTH(&#x27;2009-11-18&#x27;) 月份,DAY(&#x27;2009-11-18&#x27;) 日期,</span><br><span class="line">WEEKDAY(&#x27;2009-11-18&#x27;)  星期几;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="8-存储过程"><a href="#8-存储过程" class="headerlink" title="8.存储过程"></a>8.存储过程</h2><p>存储过程格式</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELIMITER 新结束符号</span><br><span class="line">				CREATE PROCEDURE 过程名字([[ IN | OUT | INOUT ] 参数名称 参数类型])</span><br><span class="line">				BEGIN</span><br><span class="line">				  过程体</span><br><span class="line">				END</span><br><span class="line">				新结束符号</span><br><span class="line">				DELIMITER ;</span><br></pre></td></tr></table></figure>

<p>无参过程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 从数据库gradem的student表中检索出所有籍贯为“青岛”的学生的学号、姓名、班级号及家庭地址等信息。</span><br><span class="line">delimiter $$</span><br><span class="line">	create procedure proc_stud()</span><br><span class="line">	begin</span><br><span class="line">		select sno,sname,classno,saddress </span><br><span class="line">		from student </span><br><span class="line">		where saddress like &#x27;%青岛%&#x27;;		</span><br><span class="line">	end</span><br><span class="line">	$$</span><br><span class="line">	delimiter ;</span><br></pre></td></tr></table></figure>

<p>有参过程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line">	create procedure proc_sc(in tmp_sno varchar(10))</span><br><span class="line">	begin</span><br><span class="line">		select * from sc </span><br><span class="line">		where sno = tmp_sno;</span><br><span class="line">	end</span><br><span class="line">	$$</span><br><span class="line">	delimiter ;</span><br></pre></td></tr></table></figure>

<p>有参有返回值过程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 创建一个名为proc_sc_num的存储过程，统计某位同学的考试门数。</span><br><span class="line">delimiter $$</span><br><span class="line">	create procedure proc_sc_num(in tmp_sno varchar(10),out count_num int)</span><br><span class="line">	begin</span><br><span class="line">		select count(*) into count_num</span><br><span class="line">		from sc </span><br><span class="line">		where sno = tmp_sno;</span><br><span class="line">	end</span><br><span class="line">	$$</span><br><span class="line">	delimiter ;</span><br></pre></td></tr></table></figure>

<p>查看存储过程创建语句</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW CREATE PROCEDURE 过程名;</span><br><span class="line">show create procedure proc_sc_num;</span><br></pre></td></tr></table></figure>

<p>查看存储过程状态信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW PROCEDURE STATUS [LIKE 匹配模式];</span><br><span class="line">SHOW PROCEDURE STATUS LIKE &#x27;proc%&#x27;\G</span><br></pre></td></tr></table></figure>

<p>调用存储过程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CALL 数据库名.存储过程名称([实参列表]);</span><br><span class="line"></span><br><span class="line">-- 无参</span><br><span class="line">call proc_stud();</span><br><span class="line">-- 有参</span><br><span class="line">call proc_sc(&#x27;2007010104&#x27;);</span><br><span class="line">-- 有参有返回值</span><br><span class="line">call proc_sc_num(&#x27;2007010104&#x27;,@num);</span><br><span class="line">select @num;</span><br></pre></td></tr></table></figure>

<h2 id="9-变量"><a href="#9-变量" class="headerlink" title="9.变量"></a>9.变量</h2><h3 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h3><ul>
<li><p>概念：系统变量也可称为全局变量，指的就是MySQL系统内部定义的变量，对所有MySQL客户端都有效。默认情况下，会在服务器启动时使用命令行上的选项或配置文件（ini文件）完成系统变量的设置。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW [GLOBAL | SESSION] VARIABLES  [LIKE &#x27;匹配模式&#x27;]</span><br><span class="line">-- 查看当前mysql版本</span><br><span class="line">SELECT @@version </span><br></pre></td></tr></table></figure>
</li>
<li><p>修改系统变量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 永久生效</span><br><span class="line"># 语法1</span><br><span class="line">SET GLOBAL 变量名 = 值;</span><br><span class="line"># 语法2</span><br><span class="line">SET @@GLOBAL.变量名 = 值;</span><br><span class="line"></span><br><span class="line">-- 仅本次链接生效</span><br><span class="line">SET 变量名 = 新值;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="用户变量"><a href="#用户变量" class="headerlink" title="用户变量"></a>用户变量</h3><ul>
<li><p>概念：基于会话变量实现的, 可以暂存值, 并传递给同一连接里的下一条sql使用的变量。当客户端连接退出时,变量会被释放。</p>
</li>
<li><p>用户变量的定义：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 语法1</span><br><span class="line">SET @变量名 =表达式;</span><br><span class="line"># 语法2</span><br><span class="line">SELECT @变量名 :=表达式;</span><br><span class="line"></span><br><span class="line">-- 查询结果赋值给变量</span><br><span class="line">SET @student=(SELECT sname FROM student </span><br><span class="line">              WHERE sno=&#x27;2007010120&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><ul>
<li><p>概念：局部变量的作用范围仅在复合语句语法BEGIN和END语句之间，保证局部变量在除BEGIN和END之间以外的任何地方，不能被获取和修改。</p>
</li>
<li><p>定义局部变量格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DECLARE 变量名1 [, 变量名2] … 数据类型 [DEFAULT 默认值]</span><br><span class="line">-- 省略default时变量的初始值为NULL</span><br></pre></td></tr></table></figure>
</li>
<li><p>例子</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 创建一个名为addr的局部变量，并在select语句中使用该局部变量查找位于青岛的所有学生的学号和名字。</span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE proc_setaddr() </span><br><span class="line">	begin</span><br><span class="line">		DECLARE addr varchar(50);</span><br><span class="line">		set addr = &#x27;青岛&#x27;;</span><br><span class="line">		select sno,sname </span><br><span class="line">		from student</span><br><span class="line">		where saddress like concat(&#x27;%&#x27;,addr,&#x27;%&#x27;);</span><br><span class="line">	end</span><br><span class="line">	$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用SELECT…into为变量赋值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 查找‘计算机工程系’的专业主任，将主任名字保存在变量中。</span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE proc_into_dept(in dept_value varchar(50)) </span><br><span class="line">	begin</span><br><span class="line">		DECLARE deptheader_value varchar(50);</span><br><span class="line">		select deptheader into deptheader_value</span><br><span class="line">		from department</span><br><span class="line">		where deptname = dept_value;</span><br><span class="line">		select dept_value 专业, deptheader_value 专业主任;</span><br><span class="line">	end</span><br><span class="line">	$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="10-流程控制语句"><a href="#10-流程控制语句" class="headerlink" title="10.流程控制语句"></a>10.流程控制语句</h2><h3 id="条件结构"><a href="#条件结构" class="headerlink" title="条件结构"></a>条件结构</h3><ul>
<li><p>if…else 用于指定SQL语句的执行条件</p>
<ul>
<li><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">IF search_condition THEN statement_list</span><br><span class="line">[ELSEIF search_condition THEN statement_list]…</span><br><span class="line">[ELSE statement_list]</span><br><span class="line">END IF;</span><br></pre></td></tr></table></figure>
</li>
<li><p>例子</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 查询‘2007010104’同学‘a01’ 课程的成绩，如果成绩大于90分，则显示“考的不错！”，否则显示“加油！”。</span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE proc_if() </span><br><span class="line">	begin</span><br><span class="line">	  DECLARE d_value int;</span><br><span class="line">	  select degree into d_value </span><br><span class="line">	  from sc </span><br><span class="line">	  where sno = &#x27;2007010104&#x27; and cno = &#x27;a01&#x27;;</span><br><span class="line">	  if d_value &gt;90 then </span><br><span class="line">	      select concat(&#x27;考了&#x27;,d_value,&#x27;,考的不错！&#x27;) as 成绩 ;</span><br><span class="line">	  else  </span><br><span class="line">	     select concat(&#x27;考了&#x27;,d_value,&#x27;,加油！&#x27;) as 成绩  ;</span><br><span class="line">	  end if;</span><br><span class="line">	end</span><br><span class="line">	$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">-- select 输出内容 as 字段名    可以在结果中新建一列并输出</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>case语句</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE proc_level(IN score DECIMAL(5, 2))</span><br><span class="line">BEGIN</span><br><span class="line">	CASE</span><br><span class="line">	    WHEN score &gt; 89 THEN SELECT &#x27;优秀&#x27; as 等级;</span><br><span class="line">	    WHEN score &gt; 79 THEN SELECT &#x27;良好&#x27; as 等级;</span><br><span class="line">	    WHEN score &gt; 69 THEN SELECT &#x27;中等&#x27; as 等级;</span><br><span class="line">	    WHEN score &gt; 59 THEN SELECT &#x27;及格&#x27; as 等级;</span><br><span class="line">             ELSE SELECT &#x27;不及格&#x27; as 等级;</span><br><span class="line">    	 END CASE;</span><br><span class="line">END</span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h3><ul>
<li><p>while…end循环</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 使用while语句求1 ～ 100的和</span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE proc_while() </span><br><span class="line">begin</span><br><span class="line">	DECLARE i,sum int DEFAULT 0;</span><br><span class="line">	WHILE i&lt;=100 DO</span><br><span class="line">	  SET sum=sum+i;</span><br><span class="line">     	  SET i=i+1;</span><br><span class="line">	END WHILE;</span><br><span class="line">	SELECT sum as 求和;</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>repeat…end循环</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 使用REPEAT语句求1 ～ 100的奇数和</span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE proc_repeat() </span><br><span class="line">begin</span><br><span class="line">  DECLARE i,sum int DEFAULT 0;</span><br><span class="line">  repeat</span><br><span class="line">      if i%2 != 0 then</span><br><span class="line">        set sum = sum+i;</span><br><span class="line">      end if;</span><br><span class="line">      SET i=i+1;</span><br><span class="line">  until i&gt;100</span><br><span class="line"> end repeat;</span><br><span class="line">  SELECT i,sum ;</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>loop…end循环</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 使用LOOP语句求1 ～ 100的和</span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE proc_loop() </span><br><span class="line">begin</span><br><span class="line">  DECLARE i,sum int DEFAULT 0;</span><br><span class="line">  add_sum:LOOP</span><br><span class="line"> 	if i&gt;100 then </span><br><span class="line">	  LEAVE add_sum;</span><br><span class="line">	else</span><br><span class="line">	  set sum = sum+i;</span><br><span class="line">	  set i = i+1;</span><br><span class="line">	end if;</span><br><span class="line">  end loop;</span><br><span class="line">  SELECT i,sum ;</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>例子</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 利用循环往表中插入大量数据</span><br><span class="line"></span><br><span class="line">CREATE TABLE `gradem`.`test_auto_insert`  </span><br><span class="line">(</span><br><span class="line">  `tid` int(11) NOT NULL,</span><br><span class="line">  `name` varchar(20) ,</span><br><span class="line">  `number` varchar(20) </span><br><span class="line">) ENGINE = InnoDB CHARACTER SET = utf8;</span><br><span class="line"></span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE proc_million() </span><br><span class="line">begin</span><br><span class="line">	DECLARE i bigint DEFAULT 1;</span><br><span class="line">	DECLARE num bigint DEFAULT 101;</span><br><span class="line">	WHILE i&lt;=1000001 DO</span><br><span class="line">	  insert into test_auto_insert(tid,name,number) values(i,concat(&#x27;测试&#x27;,i),num);</span><br><span class="line">    SET i=i+1;</span><br><span class="line">	END WHILE;</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="11-触发器"><a href="#11-触发器" class="headerlink" title="11.触发器"></a>11.触发器</h2><h3 id="0-格式"><a href="#0-格式" class="headerlink" title="0.格式"></a>0.格式</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">要素：触发器的要素：触发事件类型，触发时间，触发对象。</span><br><span class="line">		事件类型：增删改，三种类型，insert、delete和update；</span><br><span class="line">		触发时间：操作前还是操作后：before和after；</span><br><span class="line">		触发对象：表中的每一条记录（行）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">创建触发器</span><br><span class="line">	语法格式：CREATE TRIGGER 触发器名 触发时机 触发事件 </span><br><span class="line">				ON 表名 </span><br><span class="line">				FOR EACH ROW  触发顺序</span><br><span class="line">				BEGIN</span><br><span class="line">				  操作的内容</span><br><span class="line">				END</span><br></pre></td></tr></table></figure>

<h3 id="1-插入触发器"><a href="#1-插入触发器" class="headerlink" title="1.插入触发器"></a>1.插入触发器</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line">create  trigger trig_ssex_student before insert</span><br><span class="line">on student</span><br><span class="line">for each row </span><br><span class="line">begin</span><br><span class="line">	if(new.ssex!=&#x27;男&#x27; and new.ssex!=&#x27;女&#x27;)then</span><br><span class="line">		set new.ssex=&#x27;男&#x27;;</span><br><span class="line">	end if;</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#1.创建插入触发器trig_insert。当向销售订单表（Sell_Order）添加一条销售订单信息时，同时需要更新商品表（Product）中的“现有库存量（ProductStockNumber）”列和“已经销售的商品量（ProductSellNumber）”列。</span><br><span class="line">delimiter $$</span><br><span class="line">create  trigger trig_insert after insert</span><br><span class="line">on sellorder</span><br><span class="line">for each row </span><br><span class="line">begin</span><br><span class="line">	update product set ProductStockNumber=ProductStockNumber-new.SellOrderNumber where ProductID=new.ProductID;</span><br><span class="line">	update product set ProductSellNumber=ProductSellNumber+new.SellOrderNumber where ProductID=new.ProductID;</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<h3 id="2-删除触发器"><a href="#2-删除触发器" class="headerlink" title="2.删除触发器"></a>2.删除触发器</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line">create  trigger student_delete before delete</span><br><span class="line">on student</span><br><span class="line">for each row </span><br><span class="line">begin</span><br><span class="line">		SET @@foreign_key_checks=OFF;</span><br><span class="line">		delete from sc where old.sno=sno;</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#2.创建删除触发器trig_delete。当向销售订单表（Sell_Order）删除一条销售订单信息时，同时需要更新商品表（Product）中的“现有库存量（ProductStockNumber）”列和“已经销售的商品量（ProductSellNumber）”列。</span><br><span class="line">delimiter $$</span><br><span class="line">create  trigger trig_delete after delete</span><br><span class="line">on sellorder</span><br><span class="line">for each row </span><br><span class="line">begin</span><br><span class="line">	update product set ProductStockNumber=ProductStockNumber+old.SellOrderNumber where ProductID=old.ProductID;</span><br><span class="line">	update product set ProductSellNumber=ProductSellNumber-old.SellOrderNumber where ProductID=old.ProductID;</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<h3 id="3-更新触发器"><a href="#3-更新触发器" class="headerlink" title="3.更新触发器"></a>3.更新触发器</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line">create  trigger student_sno before update</span><br><span class="line">on student</span><br><span class="line">for each row </span><br><span class="line">begin</span><br><span class="line">		update sc set sno = new.sno where sno = old.sno;</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#3.创建更新触发器trig_update。当供应商表（Provider）中的“供应商编号（ProviderID）”变更时，同时更新表中相应的采购订单表（Purchase_order）的“供应商编号（ProviderID）”信息。</span><br><span class="line">delimiter $$</span><br><span class="line">create  trigger trig_update after update</span><br><span class="line">on provider</span><br><span class="line">for each row </span><br><span class="line">begin</span><br><span class="line">	update purchase_order set ProviderID=new.ProviderID	where ProviderID=old.ProviderID;</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<h3 id="4-查看触发器-show-triggers"><a href="#4-查看触发器-show-triggers" class="headerlink" title="4.查看触发器 show triggers"></a>4.查看触发器<code> show triggers</code></h3><h3 id="5-删除触发器DROP-TRIGGER-触发器名"><a href="#5-删除触发器DROP-TRIGGER-触发器名" class="headerlink" title="5.删除触发器DROP TRIGGER 触发器名"></a>5.删除触发器<code>DROP TRIGGER 触发器名</code></h3>]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title>回流与重绘</title>
    <url>/2023/04/20/%E5%9B%9E%E6%B5%81%E4%B8%8E%E9%87%8D%E7%BB%98/</url>
    <content><![CDATA[<h1 id="浏览器渲染过程"><a href="#浏览器渲染过程" class="headerlink" title="浏览器渲染过程"></a>浏览器渲染过程</h1><ol>
<li>解析获取到的HTML、生成DOM树；解析CSS，生成CSSOM树</li>
<li>结合DOM树和CSSOM树，生成渲染树(rander tree)</li>
<li>根据生成的渲染树，进行**回流(Layout)**，得到节点几何信息（位置大小)</li>
<li>**重绘(Painting)**：根据计算好的信息绘制整个页面</li>
<li>Display将像素发送给GPU，展示在页面上。</li>
</ol>
<p><img src="http://qny.bioart.icu/blog/20.png" alt="img"></p>
<h1 id="一、重绘"><a href="#一、重绘" class="headerlink" title="一、重绘"></a>一、重绘</h1><p>触发重绘的条件：不影响其他元素的元素样式改变（宽高、大小、位置等不变）。</p>
<ul>
<li>例如：outline、visibility、color、background-color等</li>
<li>只改变自身样式，不会影响到其他元素</li>
</ul>
<h1 id="二、回流"><a href="#二、回流" class="headerlink" title="二、回流"></a>二、回流</h1><p>回流的触发条件：元素的大小或位置发生改变（当页面布局和几何信息发生改变的时候）</p>
<ul>
<li>例如：增删DOM元素、元素位置发生变化、尺寸发生变化、内容发生变化（文本变化或图片替代）、页面一开始渲染、浏览器窗口尺寸变化</li>
</ul>
<p>回流一定触发重绘，重绘不一定触发回流</p>
<h1 id="三、减少回流"><a href="#三、减少回流" class="headerlink" title="三、减少回流"></a>三、减少回流</h1><ol>
<li><strong>DOM的增删行为</strong></li>
</ol>
<p>比如你要删除某个节点，给某个父元素增加子元素，这类操作都会引起回流。如果要加多个子元素，最好使用documentfragment。</p>
<ol>
<li><strong>几何属性的变化</strong></li>
</ol>
<p>比如元素宽高变了，border变了，字体大小变了，这种直接会引起页面布局变化的操作也会引起回流。如果你要改变多个属性，最好将这些属性定义在一个class中，直接修改class名，这样只用引起一次回流。</p>
<ol>
<li><strong>元素位置的变化</strong></li>
</ol>
<p>修改一个元素的左右margin，padding之类的操作，所以在做元素位移的动画，不要更改margin之类的属性，使用定位脱离文档流后改变位置会更好。</p>
<ol>
<li><strong>获取元素的偏移量属性</strong></li>
</ol>
<p>例如获取一个元素的scrollTop、scrollLeft、scrollWidth、offsetTop、offsetLeft、offsetWidth、offsetHeight之类的属性，浏览器为了保证值的正确也会回流取得最新的值，所以如果你要多次操作，最取完做个缓存。</p>
<ol>
<li><strong>浏览器窗口尺寸改变</strong></li>
</ol>
<p>resize事件发生也会引起回流，使用节流函数减少回流次数。</p>
<ol>
<li><strong>尽量避免使用表格布局</strong></li>
</ol>
<p>当我们不为表格td添加固定宽度时，一列的td的宽度会以最宽td的宽作为渲染标准，假设前几行td在渲染时都渲染好了，结果下面某行的一个td特别宽，table为了统一宽，前几行的td会回流重新计算宽度，这是个很耗时的事情。</p>
<h1 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h1><p>引起DOM树结构变化，页面布局变化的行为叫回流，且回流一定伴随重绘。</p>
<p>不会引起DOM树变化，页面布局变化的行为叫重绘，且重绘不一定会便随回流。</p>
<p>我们应该减少回流的次数以提高性能。</p>
<blockquote>
<p>参考：</p>
<p><a href="https://www.cnblogs.com/echolun/p/10105223.html%3E">https://www.cnblogs.com/echolun/p/10105223.html&gt;</a></p>
<p><a href="https://www.jianshu.com/p/8b01b5a0fb48">https://www.jianshu.com/p/8b01b5a0fb48</a></p>
<p><a href="https://blog.csdn.net/weixin_48491416/article/details/123452651">https://blog.csdn.net/weixin_48491416/article/details/123452651</a></p>
<p><a href="https://blog.csdn.net/io_123io_123/article/details/123710018">https://blog.csdn.net/io_123io_123/article/details/123710018</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Performance/How_browsers_work">https://developer.mozilla.org/zh-CN/docs/Web/Performance/How_browsers_work</a></p>
</blockquote>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>前端</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3快速上手</title>
    <url>/2023/03/10/vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/</url>
    <content><![CDATA[<h1 id="Vue3快速上手"><a href="#Vue3快速上手" class="headerlink" title="Vue3快速上手"></a>Vue3快速上手</h1><img src="https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png" style="width:200px" />



<h2 id="1-Vue3简介"><a href="#1-Vue3简介" class="headerlink" title="1.Vue3简介"></a>1.Vue3简介</h2><ul>
<li>2020年9月18日，Vue.js发布3.0版本，代号：One Piece（海贼王）</li>
<li>耗时2年多、<a href="https://github.com/vuejs/vue-next/graphs/commit-activity">2600+次提交</a>、<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">30+个RFC</a>、<a href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+次PR</a>、<a href="https://github.com/vuejs/vue-next/graphs/contributors">99位贡献者</a> </li>
<li>github上的tags地址：<a href="https://github.com/vuejs/vue-next/releases/tag/v3.0.0">https://github.com/vuejs/vue-next/releases/tag/v3.0.0</a></li>
</ul>
<h2 id="2-Vue3带来了什么"><a href="#2-Vue3带来了什么" class="headerlink" title="2.Vue3带来了什么"></a>2.Vue3带来了什么</h2><h3 id="1-性能的提升"><a href="#1-性能的提升" class="headerlink" title="1.性能的提升"></a>1.性能的提升</h3><ul>
<li><p>打包大小减少41%</p>
</li>
<li><p>初次渲染快55%, 更新渲染快133%</p>
</li>
<li><p>内存减少54%</p>
<p>……</p>
</li>
</ul>
<h3 id="2-源码的升级"><a href="#2-源码的升级" class="headerlink" title="2.源码的升级"></a>2.源码的升级</h3><ul>
<li><p>使用Proxy代替defineProperty实现响应式</p>
</li>
<li><p>重写虚拟DOM的实现和Tree-Shaking</p>
<p>……</p>
</li>
</ul>
<h3 id="3-拥抱TypeScript"><a href="#3-拥抱TypeScript" class="headerlink" title="3.拥抱TypeScript"></a>3.拥抱TypeScript</h3><ul>
<li>Vue3可以更好的支持TypeScript</li>
</ul>
<h3 id="4-新的特性"><a href="#4-新的特性" class="headerlink" title="4.新的特性"></a>4.新的特性</h3><ol>
<li>Composition API（组合API）<ul>
<li>setup配置</li>
<li>ref与reactive</li>
<li>watch与watchEffect</li>
<li>provide与inject</li>
<li>……</li>
</ul>
</li>
<li>新的内置组件<ul>
<li>Fragment </li>
<li>Teleport</li>
<li>Suspense</li>
</ul>
</li>
<li>其他改变<ul>
<li>新的生命周期钩子</li>
<li>data 选项应始终被声明为一个函数</li>
<li>移除keyCode支持作为 v-on 的修饰符</li>
<li>……</li>
</ul>
</li>
</ol>
<h1 id="一、创建Vue3-0工程"><a href="#一、创建Vue3-0工程" class="headerlink" title="一、创建Vue3.0工程"></a>一、创建Vue3.0工程</h1><h2 id="1-使用-vue-cli-创建"><a href="#1-使用-vue-cli-创建" class="headerlink" title="1.使用 vue-cli 创建"></a>1.使用 vue-cli 创建</h2><p>官方文档：<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span></span><br><span class="line">vue --version</span><br><span class="line"><span class="comment">## 安装或者升级你的@vue/cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment">## 创建</span></span><br><span class="line">vue create vue_test</span><br><span class="line"><span class="comment">## 启动</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure>

<h2 id="2-使用-vite-创建"><a href="#2-使用-vite-创建" class="headerlink" title="2.使用 vite 创建"></a>2.使用 vite 创建</h2><p>官方文档：<a href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p>
<p>vite官网：<a href="https://vitejs.cn/">https://vitejs.cn</a></p>
<ul>
<li>什么是vite？—— 新一代前端构建工具。</li>
<li>优势如下：<ul>
<li>开发环境中，无需打包操作，可快速的冷启动。</li>
<li>轻量快速的热重载（HMR）。</li>
<li>真正的按需编译，不再等待整个应用编译完成。</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 创建工程</span></span><br><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line"><span class="comment">## 进入工程目录</span></span><br><span class="line"><span class="built_in">cd</span> &lt;project-name&gt;</span><br><span class="line"><span class="comment">## 安装依赖</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment">## 运行</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h1 id="二、常用-Composition-API"><a href="#二、常用-Composition-API" class="headerlink" title="二、常用 Composition API"></a>二、常用 Composition API</h1><p>官方文档: <a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a></p>
<h2 id="1-拉开序幕的setup"><a href="#1-拉开序幕的setup" class="headerlink" title="1.拉开序幕的setup"></a>1.拉开序幕的setup</h2><ol>
<li>理解：Vue3.0中一个新的配置项，值为一个函数。</li>
<li>setup是所有<strong style="color:#DD5145">Composition API（组合API）</strong><i style="color:gray;font-weight:bold">“ 表演的舞台 ”</i>。</li>
<li>组件中所用到的：数据、方法等等，均要配置在setup中。</li>
<li>setup函数的两种返回值：<ol>
<li>若返回一个对象，则对象中的属性、方法, 在模板中均可以直接使用。（重点关注！）</li>
<li><span style="color:#aad">若返回一个渲染函数：则可以自定义渲染内容。（了解）</span></li>
</ol>
</li>
<li>注意点：<ol>
<li>尽量不要与Vue2.x配置混用<ul>
<li>Vue2.x配置（data、methos、computed…）中<strong style="color:#DD5145">可以访问到</strong>setup中的属性、方法。</li>
<li>但在setup中<strong style="color:#DD5145">不能访问到</strong>Vue2.x配置（data、methos、computed…）。</li>
<li>如果有重名, setup优先。</li>
</ul>
</li>
<li>setup不能是一个async函数，因为返回值不再是return的对象, 而是promise, 模板看不到return对象中的属性。（后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合）</li>
</ol>
</li>
</ol>
<h2 id="2-ref函数"><a href="#2-ref函数" class="headerlink" title="2.ref函数"></a>2.ref函数</h2><ul>
<li>作用: 定义一个响应式的数据</li>
<li>语法: <code>const xxx = ref(initValue)</code> <ul>
<li>创建一个包含响应式数据的<strong style="color:#DD5145">引用对象（reference对象，简称ref对象）</strong>。</li>
<li>JS中操作数据： <code>xxx.value</code></li>
<li>模板中读取数据: 不需要.value，直接：<code>&lt;div&gt;&#123;&#123;xxx&#125;&#125;&lt;/div&gt;</code></li>
</ul>
</li>
<li>备注：<ul>
<li>接收的数据可以是：基本类型、也可以是对象类型。</li>
<li>基本类型的数据：响应式依然是靠<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>完成的。</li>
<li>对象类型的数据：内部 <i style="color:gray;font-weight:bold">“ 求助 ”</i> 了Vue3.0中的一个新函数—— <code>reactive</code>函数。</li>
</ul>
</li>
</ul>
<h2 id="3-reactive函数"><a href="#3-reactive函数" class="headerlink" title="3.reactive函数"></a>3.reactive函数</h2><ul>
<li>作用: 定义一个<strong style="color:#DD5145">对象类型</strong>的响应式数据（基本类型不要用它，要用<code>ref</code>函数）</li>
<li>语法：<code>const 代理对象= reactive(源对象)</code>接收一个对象（或数组），返回一个<strong style="color:#DD5145">代理对象（Proxy的实例对象，简称proxy对象）</strong></li>
<li>reactive定义的响应式数据是“深层次的”。</li>
<li>内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据进行操作。</li>
</ul>
<h2 id="4-Vue3-0中的响应式原理"><a href="#4-Vue3-0中的响应式原理" class="headerlink" title="4.Vue3.0中的响应式原理"></a>4.Vue3.0中的响应式原理</h2><h3 id="vue2-x的响应式"><a href="#vue2-x的响应式" class="headerlink" title="vue2.x的响应式"></a>vue2.x的响应式</h3><ul>
<li><p>实现原理：</p>
<ul>
<li><p>对象类型：通过<code>Object.defineProperty()</code>对属性的读取、修改进行拦截（数据劫持）。</p>
</li>
<li><p>数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了包裹）。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, <span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">get</span> () &#123;&#125;, </span><br><span class="line">    <span class="title function_">set</span> () &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>存在问题：</p>
<ul>
<li>新增属性、删除属性, 界面不会更新。</li>
<li>直接通过下标修改数组, 界面不会自动更新。</li>
</ul>
</li>
</ul>
<h3 id="Vue3-0的响应式"><a href="#Vue3-0的响应式" class="headerlink" title="Vue3.0的响应式"></a>Vue3.0的响应式</h3><ul>
<li><p>实现原理: </p>
<ul>
<li><p>通过Proxy（代理）:  拦截对象中任意属性的变化, 包括：属性值的读写、属性的添加、属性的删除等。</p>
</li>
<li><p>通过Reflect（反射）:  对源对象的属性进行操作。</p>
</li>
<li><p>MDN文档中描述的Proxy与Reflect：</p>
<ul>
<li><p>Proxy：<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></p>
</li>
<li><p>Reflect：<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Proxy</span>(data, &#123;</span><br><span class="line">	<span class="comment">// 拦截读取属性值</span></span><br><span class="line">    <span class="title function_">get</span> (target, prop) &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, prop)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 拦截设置属性值或添加新属性</span></span><br><span class="line">    <span class="title function_">set</span> (target, prop, value) &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, prop, value)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 拦截删除属性</span></span><br><span class="line">    <span class="title function_">deleteProperty</span> (target, prop) &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, prop)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">proxy.<span class="property">name</span> = <span class="string">&#x27;tom&#x27;</span>   </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-reactive对比ref"><a href="#5-reactive对比ref" class="headerlink" title="5.reactive对比ref"></a>5.reactive对比ref</h2><ul>
<li>从定义数据角度对比：<ul>
<li>ref用来定义：<strong style="color:#DD5145">基本类型数据</strong>。</li>
<li>reactive用来定义：<strong style="color:#DD5145">对象（或数组）类型数据</strong>。</li>
<li>备注：ref也可以用来定义<strong style="color:#DD5145">对象（或数组）类型数据</strong>, 它内部会自动通过<code>reactive</code>转为<strong style="color:#DD5145">代理对象</strong>。</li>
</ul>
</li>
<li>从原理角度对比：<ul>
<li>ref通过<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>来实现响应式（数据劫持）。</li>
<li>reactive通过使用<strong style="color:#DD5145">Proxy</strong>来实现响应式（数据劫持）, 并通过<strong style="color:#DD5145">Reflect</strong>操作<strong style="color:orange">源对象</strong>内部的数据。</li>
</ul>
</li>
<li>从使用角度对比：<ul>
<li>ref定义的数据：操作数据<strong style="color:#DD5145">需要</strong><code>.value</code>，读取数据时模板中直接读取<strong style="color:#DD5145">不需要</strong><code>.value</code>。</li>
<li>reactive定义的数据：操作数据与读取数据：<strong style="color:#DD5145">均不需要</strong><code>.value</code>。</li>
</ul>
</li>
</ul>
<h2 id="6-setup的两个注意点"><a href="#6-setup的两个注意点" class="headerlink" title="6.setup的两个注意点"></a>6.setup的两个注意点</h2><ul>
<li>setup执行的时机<ul>
<li>在beforeCreate之前执行一次，this是undefined。</li>
</ul>
</li>
<li>setup的参数<ul>
<li>props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性。</li>
<li>context：上下文对象<ul>
<li>attrs: 值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性, 相当于 <code>this.$attrs</code>。</li>
<li>slots: 收到的插槽内容, 相当于 <code>this.$slots</code>。</li>
<li>emit: 分发自定义事件的函数, 相当于 <code>this.$emit</code>。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="7-计算属性与监视"><a href="#7-计算属性与监视" class="headerlink" title="7.计算属性与监视"></a>7.计算属性与监视</h2><h3 id="1-computed函数"><a href="#1-computed函数" class="headerlink" title="1.computed函数"></a>1.computed函数</h3><ul>
<li><p>与Vue2.x中computed配置功能一致</p>
</li>
<li><p>写法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    ...</span><br><span class="line">	<span class="comment">//计算属性——简写</span></span><br><span class="line">    <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//计算属性——完整</span></span><br><span class="line">    <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(&#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">            <span class="keyword">const</span> nameArr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">            person.<span class="property">firstName</span> = nameArr[<span class="number">0</span>]</span><br><span class="line">            person.<span class="property">lastName</span> = nameArr[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-watch函数"><a href="#2-watch函数" class="headerlink" title="2.watch函数"></a>2.watch函数</h3><ul>
<li><p>与Vue2.x中watch配置功能一致</p>
</li>
<li><p>两个小“坑”：</p>
<ul>
<li>监视reactive定义的响应式数据时：oldValue无法正确获取、强制开启了深度监视（deep配置失效）。</li>
<li>监视reactive定义的响应式数据中某个属性时：deep配置有效。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//情况一：监视ref定义的响应式数据</span></span><br><span class="line"><span class="title function_">watch</span>(sum,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//情况二：监视多个ref定义的响应式数据</span></span><br><span class="line"><span class="title function_">watch</span>([sum,msg],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum或msg变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">/* 情况三：监视reactive定义的响应式数据</span></span><br><span class="line"><span class="comment">			若watch监视的是reactive定义的响应式数据，则无法正确获得oldValue！！</span></span><br><span class="line"><span class="comment">			若watch监视的是reactive定义的响应式数据，则强制开启了深度监视 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">watch</span>(person,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">false</span>&#125;) <span class="comment">//此处的deep配置不再奏效</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//情况四：监视reactive定义的响应式数据中的某个属性</span></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">//情况五：监视reactive定义的响应式数据中的某些属性</span></span><br><span class="line"><span class="title function_">watch</span>([<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">()=&gt;</span>person.<span class="property">name</span>],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//特殊情况</span></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;) <span class="comment">//此处由于监视的是reactive素定义的对象中的某个属性，所以deep配置有效</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-watchEffect函数"><a href="#3-watchEffect函数" class="headerlink" title="3.watchEffect函数"></a>3.watchEffect函数</h3><ul>
<li><p>watch的套路是：既要指明监视的属性，也要指明监视的回调。</p>
</li>
<li><p>watchEffect的套路是：不用指明监视哪个属性，监视的回调中用到哪个属性，那就监视哪个属性。</p>
</li>
<li><p>watchEffect有点像computed：</p>
<ul>
<li>但computed注重的计算出来的值（回调函数的返回值），所以必须要写返回值。</li>
<li>而watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调。</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> x1 = sum.<span class="property">value</span></span><br><span class="line">    <span class="keyword">const</span> x2 = person.<span class="property">age</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;watchEffect配置的回调执行了&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="8-生命周期"><a href="#8-生命周期" class="headerlink" title="8.生命周期"></a>8.生命周期</h2><p>vue2.x的生命周期</p>
<img src="https://v2.cn.vuejs.org/images/lifecycle.png" alt="lifecycle_2" style="zoom:33%;width:1200px" />

<p>vue3.0的生命周期</p>
<img src="https://cn.vuejs.org/assets/lifecycle.16e4c08e.png" alt="lifecycle_2" style="zoom:33%;width:2500px" />

<ul>
<li>Vue3.0中可以继续使用Vue2.x中的生命周期钩子，但有有两个被更名：<ul>
<li><code>beforeDestroy</code>改名为 <code>beforeUnmount</code></li>
<li><code>destroyed</code>改名为 <code>unmounted</code></li>
</ul>
</li>
<li>Vue3.0也提供了 Composition API 形式的生命周期钩子，与Vue2.x中钩子对应关系如下：<ul>
<li><code>beforeCreate</code>&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li>
<li><code>created</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li>
<li><code>beforeMount</code> &#x3D;&#x3D;&#x3D;&gt;<code>onBeforeMount</code></li>
<li><code>mounted</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onMounted</code></li>
<li><code>beforeUpdate</code>&#x3D;&#x3D;&#x3D;&gt;<code>onBeforeUpdate</code></li>
<li><code>updated</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUpdated</code></li>
<li><code>beforeUnmount</code> &#x3D;&#x3D;&gt;<code>onBeforeUnmount</code></li>
<li><code>unmounted</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUnmounted</code></li>
</ul>
</li>
</ul>
<h2 id="9-自定义hook函数"><a href="#9-自定义hook函数" class="headerlink" title="9.自定义hook函数"></a>9.自定义hook函数</h2><ul>
<li>什么是hook？—— 本质是一个函数，把setup函数中使用的Composition API进行了封装。</li>
<li>类似于vue2.x中的mixin。</li>
<li>自定义hook的优势: 复用代码, 让setup中的逻辑更清楚易懂。</li>
</ul>
<h2 id="10-toRef"><a href="#10-toRef" class="headerlink" title="10.toRef"></a>10.toRef</h2><ul>
<li><p>作用：创建一个 ref 对象，其value值指向另一个对象中的某个属性。</p>
</li>
<li><p>语法：<code>const name = toRef(person,&#39;name&#39;)</code></p>
</li>
<li><p>应用:   要将响应式对象中的某个属性单独提供给外部使用时。</p>
</li>
<li><p>扩展：<code>toRefs</code> 与<code>toRef</code>功能一致，但可以批量创建多个 ref 对象，语法：<code>toRefs(person)</code></p>
</li>
</ul>
<h1 id="三、其它-Composition-API"><a href="#三、其它-Composition-API" class="headerlink" title="三、其它 Composition API"></a>三、其它 Composition API</h1><h2 id="1-shallowReactive-与-shallowRef"><a href="#1-shallowReactive-与-shallowRef" class="headerlink" title="1.shallowReactive 与 shallowRef"></a>1.shallowReactive 与 shallowRef</h2><ul>
<li>shallowReactive：只处理对象最外层属性的响应式（浅响应式）。</li>
<li>shallowRef：只处理基本数据类型的响应式, 不进行对象的响应式处理。</li>
<li>什么时候使用?<ul>
<li>如果有一个对象数据，结构比较深, 但变化时只是外层属性变化 &#x3D;&#x3D;&#x3D;&gt; shallowReactive。</li>
<li>如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换 &#x3D;&#x3D;&#x3D;&gt; shallowRef。</li>
</ul>
</li>
</ul>
<h2 id="2-readonly-与-shallowReadonly"><a href="#2-readonly-与-shallowReadonly" class="headerlink" title="2.readonly 与 shallowReadonly"></a>2.readonly 与 shallowReadonly</h2><ul>
<li>readonly: 让一个响应式数据变为只读的（深只读）。</li>
<li>shallowReadonly：让一个响应式数据变为只读的（浅只读）。</li>
<li>应用场景: 不希望数据被修改时。</li>
</ul>
<h2 id="3-toRaw-与-markRaw"><a href="#3-toRaw-与-markRaw" class="headerlink" title="3.toRaw 与 markRaw"></a>3.toRaw 与 markRaw</h2><ul>
<li>toRaw：<ul>
<li>作用：将一个由<code>reactive</code>生成的<strong style="color:orange">响应式对象</strong>转为<strong style="color:orange">普通对象</strong>。</li>
<li>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新。</li>
</ul>
</li>
<li>markRaw：<ul>
<li>作用：标记一个对象，使其永远不会再成为响应式对象。</li>
<li>应用场景:<ol>
<li>有些值不应被设置为响应式的，例如复杂的第三方类库等。</li>
<li>当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能。</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="4-customRef"><a href="#4-customRef" class="headerlink" title="4.customRef"></a>4.customRef</h2><ul>
<li><p>作用：创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制。</p>
</li>
<li><p>实现防抖效果：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;input type=&quot;text&quot; v-model=&quot;keyword&quot;&gt;</span><br><span class="line">	&lt;h3&gt;&#123;&#123;keyword&#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref,customRef&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name:&#x27;Demo&#x27;,</span><br><span class="line">  setup()&#123;</span><br><span class="line">  // let keyword = ref(&#x27;hello&#x27;) //使用Vue准备好的内置ref</span><br><span class="line">  //自定义一个myRef</span><br><span class="line">  function myRef(value,delay)&#123;</span><br><span class="line">  let timer</span><br><span class="line">  //通过customRef去实现自定义</span><br><span class="line">  return customRef((track,trigger)=&gt;&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">      get()&#123;</span><br><span class="line">        track() //告诉Vue这个value值是需要被“追踪”的</span><br><span class="line">        return value</span><br><span class="line">      &#125;,</span><br><span class="line">      set(newValue)&#123;</span><br><span class="line">        clearTimeout(timer)</span><br><span class="line">        timer = setTimeout(()=&gt;&#123;</span><br><span class="line">          value = newValue</span><br><span class="line">          trigger() //告诉Vue去更新界面</span><br><span class="line">        &#125;,delay)</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;)</span><br><span class="line">&#125;</span><br><span class="line">let keyword = myRef(&#x27;hello&#x27;,500) //使用程序员自定义的ref</span><br><span class="line">  return &#123;keyword&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-provide-与-inject"><a href="#5-provide-与-inject" class="headerlink" title="5.provide 与 inject"></a>5.provide 与 inject</h2><ul>
<li><p>作用：实现<strong style="color:#DD5145">祖与后代组件间</strong>通信</p>
</li>
<li><p>套路：父组件有一个 <code>provide</code> 选项来提供数据，后代组件有一个 <code>inject</code> 选项来开始使用这些数据</p>
</li>
<li><p>具体写法：</p>
<ol>
<li><p>祖组件中：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">	......</span><br><span class="line">    <span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;奔驰&#x27;</span>,<span class="attr">price</span>:<span class="string">&#x27;40万&#x27;</span>&#125;)</span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&#x27;car&#x27;</span>,car)</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>后代组件中：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params">props,context</span>)&#123;</span><br><span class="line">	......</span><br><span class="line">    <span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&#x27;car&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;car&#125;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h2 id="6-响应式数据的判断"><a href="#6-响应式数据的判断" class="headerlink" title="6.响应式数据的判断"></a>6.响应式数据的判断</h2><ul>
<li>isRef: 检查一个值是否为一个 ref 对象</li>
<li>isReactive: 检查一个对象是否是由 <code>reactive</code> 创建的响应式代理</li>
<li>isReadonly: 检查一个对象是否是由 <code>readonly</code> 创建的只读代理</li>
<li>isProxy: 检查一个对象是否是由 <code>reactive</code> 或者 <code>readonly</code> 方法创建的代理</li>
</ul>
<h1 id="四、Composition-API-的优势"><a href="#四、Composition-API-的优势" class="headerlink" title="四、Composition API 的优势"></a>四、Composition API 的优势</h1><h2 id="1-Options-API-存在的问题"><a href="#1-Options-API-存在的问题" class="headerlink" title="1.Options API 存在的问题"></a>1.Options API 存在的问题</h2><p>使用传统OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改 。</p>
<p>​    <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image" style="width:600px;float:left" /></p>
<p>​    <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image" style="zoom:50%;width:560px;left" /> </p>
<h2 id="2-Composition-API-的优势"><a href="#2-Composition-API-的优势" class="headerlink" title="2.Composition API 的优势"></a>2.Composition API 的优势</h2><p>我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起。</p>
<p>   &lt;img src&#x3D;”<a href="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image%22style=%22height:360px%22/%3E">https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image&quot;style=&quot;height:360px&quot;/&gt;</a><br>    &lt;img src&#x3D;”<a href="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image%22style=%22height:360px%22/%3E">https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image&quot;style=&quot;height:360px&quot;/&gt;</a></p>
<h1 id="五、新的组件"><a href="#五、新的组件" class="headerlink" title="五、新的组件"></a>五、新的组件</h1><h2 id="1-Fragment"><a href="#1-Fragment" class="headerlink" title="1.Fragment"></a>1.Fragment</h2><ul>
<li>在Vue2中: 组件必须有一个根标签</li>
<li>在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中</li>
<li>好处: 减少标签层级, 减小内存占用</li>
</ul>
<h2 id="2-Teleport"><a href="#2-Teleport" class="headerlink" title="2.Teleport"></a>2.Teleport</h2><ul>
<li><p>什么是Teleport？—— <code>Teleport</code> 是一种能够将我们的<strong style="color:#DD5145">组件html结构</strong>移动到指定位置的技术。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;teleport to=&quot;移动位置&quot;&gt;</span><br><span class="line">	&lt;div v-if=&quot;isShow&quot; class=&quot;mask&quot;&gt;</span><br><span class="line">		&lt;div class=&quot;dialog&quot;&gt;</span><br><span class="line">			&lt;h3&gt;我是一个弹窗&lt;/h3&gt;</span><br><span class="line">			&lt;button @click=&quot;isShow = false&quot;&gt;关闭弹窗&lt;/button&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/teleport&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-Suspense"><a href="#3-Suspense" class="headerlink" title="3.Suspense"></a>3.Suspense</h2><ul>
<li><p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p>
</li>
<li><p>使用步骤：</p>
<ul>
<li><p>异步引入组件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineAsyncComponent&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./components/Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;app&quot;&gt;</span><br><span class="line">		&lt;h3&gt;我是App组件&lt;/h3&gt;</span><br><span class="line">		&lt;Suspense&gt;</span><br><span class="line">			&lt;template v-slot:default&gt;</span><br><span class="line">				&lt;Child/&gt;</span><br><span class="line">			&lt;/template&gt;</span><br><span class="line">			&lt;template v-slot:fallback&gt;</span><br><span class="line">				&lt;h3&gt;加载中.....&lt;/h3&gt;</span><br><span class="line">			&lt;/template&gt;</span><br><span class="line">		&lt;/Suspense&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h1 id="六、其他"><a href="#六、其他" class="headerlink" title="六、其他"></a>六、其他</h1><h2 id="1-全局API的转移"><a href="#1-全局API的转移" class="headerlink" title="1.全局API的转移"></a>1.全局API的转移</h2><ul>
<li><p>Vue 2.x 有许多全局 API 和配置。</p>
<ul>
<li><p>例如：注册全局组件、注册全局指令等。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//注册全局组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;MyButton&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//注册全局指令</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">inserted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Vue3.0中对这些API做出了调整：</p>
<ul>
<li><p>将全局的API，即：<code>Vue.xxx</code>调整到应用实例（<code>app</code>）上</p>
<table>
<thead>
<tr>
<th>2.x 全局 API（<code>Vue</code>）</th>
<th>3.x 实例 API (<code>app</code>)</th>
</tr>
</thead>
<tbody><tr>
<td>Vue.config.xxxx</td>
<td>app.config.xxxx</td>
</tr>
<tr>
<td>Vue.config.productionTip</td>
<td><strong style="color:#DD5145">移除</strong></td>
</tr>
<tr>
<td>Vue.component</td>
<td>app.component</td>
</tr>
<tr>
<td>Vue.directive</td>
<td>app.directive</td>
</tr>
<tr>
<td>Vue.mixin</td>
<td>app.mixin</td>
</tr>
<tr>
<td>Vue.use</td>
<td>app.use</td>
</tr>
<tr>
<td>Vue.prototype</td>
<td>app.config.globalProperties</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<h2 id="2-其他改变"><a href="#2-其他改变" class="headerlink" title="2.其他改变"></a>2.其他改变</h2><ul>
<li><p>data选项应始终被声明为一个函数。</p>
</li>
<li><p>过度类名的更改：</p>
<ul>
<li><p>Vue2.x写法</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Vue3.x写法</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.v-enter-from</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong style="color:#DD5145">移除</strong>keyCode作为 v-on 的修饰符，同时也不再支持<code>config.keyCodes</code></p>
</li>
<li><p><strong style="color:#DD5145">移除</strong><code>v-on.native</code>修饰符</p>
<ul>
<li><p>父组件中绑定事件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;my-component</span><br><span class="line">  v-on:close=&quot;handleComponentEvent&quot;</span><br><span class="line">  v-on:click=&quot;handleNativeClickEvent&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>子组件中声明自定义事件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    emits: [&#x27;close&#x27;]</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong style="color:#DD5145">移除</strong>过滤器（filter）</p>
<blockquote>
<p>过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。</p>
</blockquote>
</li>
</ul>
]]></content>
      <categories>
        <category>前端</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>JS宏任务与微任务</title>
    <url>/2023/04/07/%E5%AE%8F%E4%BB%BB%E5%8A%A1%E3%80%81%E5%BE%AE%E4%BB%BB%E5%8A%A1/</url>
    <content><![CDATA[<p>JS把<strong>异步任务</strong>分为宏任务与微任务。</p>
<ul>
<li>在ES5之后，JavaScript引入了Promise，这样不需要浏览器，JavaScript引擎自身也能够发起异步任务了。</li>
</ul>
<h3 id="宏任务由宿主-浏览器、Node-发起"><a href="#宏任务由宿主-浏览器、Node-发起" class="headerlink" title="宏任务由宿主(浏览器、Node)发起"></a>宏任务由宿主(浏览器、Node)发起</h3><table>
<thead>
<tr>
<th>任务(代码)</th>
<th>宏任务</th>
<th>环境</th>
</tr>
</thead>
<tbody><tr>
<td>script</td>
<td>宏任务</td>
<td>浏览器</td>
</tr>
<tr>
<td>事件</td>
<td>宏任务</td>
<td>浏览器</td>
</tr>
<tr>
<td>网络请求(Ajax&#x2F;Fetch)</td>
<td>宏任务</td>
<td>浏览器</td>
</tr>
<tr>
<td>setTimeout()&#x2F;setInterval()</td>
<td>宏任务</td>
<td>浏览器</td>
</tr>
</tbody></table>
<h3 id="微任务JS引擎发起的任务"><a href="#微任务JS引擎发起的任务" class="headerlink" title="微任务JS引擎发起的任务"></a>微任务JS引擎发起的任务</h3><table>
<thead>
<tr>
<th>任务(代码)</th>
<th>微任务</th>
<th>环境</th>
</tr>
</thead>
<tbody><tr>
<td>Promise的then</td>
<td>微任务</td>
<td>JS引擎</td>
</tr>
<tr>
<td>nextTick</td>
<td>微任务</td>
<td>JS引擎</td>
</tr>
<tr>
<td>await右结合和下方的代码</td>
<td>微任务</td>
<td>JS引擎</td>
</tr>
</tbody></table>
<p><strong>Promise本身同步，then&#x2F;catch的回调函数是异步的</strong></p>
<h3 id="代码分类"><a href="#代码分类" class="headerlink" title="代码分类"></a>代码分类</h3><ol>
<li><p>同步代码(js执行栈&#x2F;回调栈)</p>
</li>
<li><p>微任务的异步代码(js引擎)</p>
</li>
<li><ol>
<li>process.nextTick (node)</li>
<li>Promise.then catch()</li>
<li>Async&#x2F;Await</li>
<li>Object.observe</li>
</ol>
</li>
<li><p>宏任务的异步代码(宿主环境)</p>
</li>
<li><ol>
<li>script</li>
<li>setTimeout&#x2F;setInterval</li>
<li>setImmediate</li>
<li>IO</li>
</ol>
</li>
</ol>
<h3 id="运行机制"><a href="#运行机制" class="headerlink" title="运行机制"></a>运行机制</h3><p>运行顺序：同步&gt;微任务&gt;宏任务</p>
<p>在事件循环中，每进行一次循环操作称为 tick，每一次 tick 的任务处理模型是比较复杂的，但关键步骤如下：</p>
<p>一旦执行栈中的所有同步任务执行完毕（此时JS引擎空闲），系统就会读取任务队列，将可运行的异步任务添加到可执行栈中，开始执行。</p>
<ul>
<li>同步代码先执行完</li>
<li>立即执行当前微任务队列中的所有微任务（依次执行）</li>
<li>执行一个宏任务（栈中没有就从事件队列中获取）</li>
<li>执行过程中如果遇到微任务，就将它添加到微任务的任务队列中</li>
<li>宏任务执行完毕后，立即执行当前微任务队列中的所有微任务（依次执行）</li>
<li>当前宏任务执行完毕，开始检查渲染，然后GUI线程接管渲染</li>
<li>渲染完毕后，JS线程继续接管，开始下一个宏任务（从事件队列中获取）</li>
</ul>
<p>面试题目讲解可以参考视频：<a href="https://www.bilibili.com/video/BV1G84y1B7hZ?vd_source=5053a6dbc1b42e83bb14303fbfead9a2">https://www.bilibili.com/video/BV1G84y1B7hZ?vd_source=5053a6dbc1b42e83bb14303fbfead9a2</a></p>
]]></content>
      <categories>
        <category>Js</category>
      </categories>
      <tags>
        <tag>Js</tag>
      </tags>
  </entry>
  <entry>
    <title>节流与防抖</title>
    <url>/2023/04/08/%E8%8A%82%E6%B5%81%E4%B8%8E%E9%98%B2%E6%8A%96/</url>
    <content><![CDATA[<h3 id="一、什么是防抖。"><a href="#一、什么是防抖。" class="headerlink" title="一、什么是防抖。"></a>一、什么是防抖。</h3><p>就是指 在设定的一段时间内中除了最后一次，前面的连续触发都不执行。</p>
<p>举例：设定1000毫秒执行，触发一次，1000毫秒后执行，但是如果你在剩500毫秒的时候又触发了，那就重新从1000毫秒计算。</p>
<p>形象举例：英雄联盟或者王者荣耀的回城</p>
<h4 id="防抖应用场景"><a href="#防抖应用场景" class="headerlink" title="防抖应用场景"></a>防抖应用场景</h4><ul>
<li>搜索框搜索输入、文本输入的验证</li>
<li>文本编辑器实时保存</li>
</ul>
<p>示例：非立即执行版</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;button class=&quot;ipt&quot; type=&quot;button&quot; onkeyup=&quot;SomeJavaScriptCode&quot;&gt;防抖&lt;/button&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let timerId = null</span><br><span class="line">  document.querySelector(&#x27;.ipt&#x27;).onclick = function () &#123;</span><br><span class="line">    console.log(&#x27;我被点了&#x27;);</span><br><span class="line">    if (timerId !== null) &#123;</span><br><span class="line">      clearTimeout(timerId)</span><br><span class="line">    &#125;</span><br><span class="line">    timerId = setTimeout(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;我是防抖&#x27;);</span><br><span class="line">    &#125;, 1000)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>立即执行版</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;button class=&quot;ipt&quot; type=&quot;button&quot; onkeyup=&quot;SomeJavaScriptCode&quot;&gt;防抖&lt;/button&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let timerId = null</span><br><span class="line">  let flag = true</span><br><span class="line">  document.querySelector(&#x27;.ipt&#x27;).onclick = function () &#123;</span><br><span class="line">    console.log(&#x27;被点了&#x27;);</span><br><span class="line">    clearTimeout(timerId)</span><br><span class="line">    if (flag) &#123;</span><br><span class="line">      console.log(&#x27;我是防抖&#x27;);</span><br><span class="line">      flag = false</span><br><span class="line">    &#125;</span><br><span class="line">    timerId = setTimeout(() =&gt; &#123;</span><br><span class="line">      flag = true</span><br><span class="line">    &#125;, 1000)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="二、什么是节流。"><a href="#二、什么是节流。" class="headerlink" title="二、什么是节流。"></a>二、什么是节流。</h3><p>就是指在设定的一段时间内连续触发事件也只执行一次。</p>
<p>举例：设定1000毫秒执行，在1000毫秒内触发多次，也是在1000毫秒后执行一次</p>
<p>形象举例：技能CD，等cd过后再点技能才能生效</p>
<h4 id="节流使用场景"><a href="#节流使用场景" class="headerlink" title="节流使用场景"></a>节流使用场景</h4><ul>
<li>高频事件：快速点击、鼠标滑动、resize事件、scroll事件</li>
<li>下拉加载</li>
<li>视频播放记录时间等</li>
</ul>
<p>示例：非立即执行版</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;button class=&quot;ipt&quot; type=&quot;button&quot; onkeyup=&quot;SomeJavaScriptCode&quot;&gt;节流&lt;/button&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let timerId = null</span><br><span class="line">  document.querySelector(&#x27;.ipt&#x27;).onclick= function () &#123;</span><br><span class="line">    console.log(&#x27;我被点了&#x27;);</span><br><span class="line">    if (timerId !== null) &#123;</span><br><span class="line">      return</span><br><span class="line">    &#125;</span><br><span class="line">    timerId = setTimeout(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;我是节流&#x27;);</span><br><span class="line">      timerId = null</span><br><span class="line">    &#125;, 1000)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;button class=&quot;ipt&quot; type=&quot;button&quot; onkeyup=&quot;SomeJavaScriptCode&quot;&gt;节流&lt;/button&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let timerId = null</span><br><span class="line">  let flag = true</span><br><span class="line">  document.querySelector(&#x27;.ipt2&#x27;).onclick = function () &#123;</span><br><span class="line">    if (flag) &#123;</span><br><span class="line">      console.log(&quot;我是节流&quot;);</span><br><span class="line">      flag=false</span><br><span class="line">      timerId = setTimeout(() =&gt; &#123;</span><br><span class="line">        flag = true</span><br><span class="line">      &#125;, 1000)</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(&#x27;我被点了&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>一般用lodash库，利用里面的debounce和throttle</p>
</blockquote>
]]></content>
      <categories>
        <category>Js</category>
      </categories>
      <tags>
        <tag>Js</tag>
      </tags>
  </entry>
  <entry>
    <title>跨域的解决办法</title>
    <url>/2023/04/11/%E8%B7%A8%E5%9F%9F/</url>
    <content><![CDATA[<h3 id="一、浏览器的同源策略"><a href="#一、浏览器的同源策略" class="headerlink" title="一、浏览器的同源策略"></a>一、浏览器的同源策略</h3><p>为了安全，不同源的请求会发送出去，但是不让你的JS拿到响应内容。不能跨过这个域去访问其他域的功能。</p>
<p>这里的域指的是协议、主机和端口号都要需要一致的URL</p>
<ul>
<li><p>协议：http:&#x2F;&#x2F;</p>
</li>
<li><p>主机：<a href="http://www.bilibili.com/">www.bilibili.com</a></p>
</li>
<li><p>端口号: 8080</p>
</li>
</ul>
<p>换句话说：俩个URL必须同源才允许交互</p>
<p>如果我们需要让member.bilibili.com和mail.bilibili.com进行资源交互，就需要用到跨域的技术来解决这个问题。</p>
<h3 id="二、JSONP处理跨域"><a href="#二、JSONP处理跨域" class="headerlink" title="二、JSONP处理跨域"></a>二、JSONP处理跨域</h3><p>既然不同源不能资源交互，那为什么我写<script>标签里的link和script引用可以在别的源请求脚本呢？</p>
<p>这是因为当时在设计script标签的时候，就允许在别的源请求脚本。</p>
<p>能够跨域的标签有：script link img </p>
<p>利用这些标签能够跨域的“漏洞”进行跨域的办法就叫JSONP</p>
<h3 id="1-JSONP操作"><a href="#1-JSONP操作" class="headerlink" title="1.JSONP操作"></a>1.JSONP操作</h3><p>HTML5里的script标签默认的type属性是text/javascript，定义了这个类型，请求的内容会被路利器执行。换句话说，script标签请求返回的代码就会被浏览器以JS代码的方式执行</p>
<p>那我们就可以这样操作</p>
<p>1.在客户端创建好函数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  function aa(data)&#123;</span><br><span class="line">    console.log(data)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>2.在服务端调用你创建好的函数<strong>并传参</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">	echo &quot;bb(&#x27;这是服务端的资源&#x27;)&quot;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>这样我们就可以获取到服务端的数据了，至于怎么同步函数名：我们可以利用URL传参把函数名传过去。</p>
<h4 id="2-总结一下JSONP跨域过程："><a href="#2-总结一下JSONP跨域过程：" class="headerlink" title="2. 总结一下JSONP跨域过程："></a>2. 总结一下JSONP跨域过程：</h4><ol>
<li>客户端准备一个函数 function(真实数据){}</li>
<li>然后在URL上提供给服务器额外参数</li>
<li>服务器收到这些额外的参数就会执行相应的代码</li>
<li>服务器把数据外包一个JS函数再以JSON数据的形式回传给客户端</li>
<li>客户端收到后调用提前设置好的函数执行服务器传过来的数据，执行函数并获取数据</li>
</ol>
<h4 id="3-JSONP名字的由来"><a href="#3-JSONP名字的由来" class="headerlink" title="3. JSONP名字的由来"></a>3. JSONP名字的由来</h4><p>因为是JSON包含JS数据，JSON with Padding，简称JSONP。</p>
<h4 id="4-JSONP的缺点"><a href="#4-JSONP的缺点" class="headerlink" title="4. JSONP的缺点"></a>4. JSONP的缺点</h4><ol>
<li>只支持GET不支持POST</li>
<li>失败时不会返回各种HTTP状态码</li>
<li>不安全，假如提供jsonp的服务存在页面注入漏洞，即它返回的javascript的内容被人控制的。那么结果是什么？所有调用这个 jsonp的网站都会存在漏洞。于是无法把危险控制在一个域名下…所以在使用jsonp的时候必须要保证使用的jsonp服务必须是安全可信的。</li>
</ol>
<p>因为JSONP有以上种种缺点，因此就诞生了CORS这种方法。</p>
<h3 id="三、CORS解决跨域问题"><a href="#三、CORS解决跨域问题" class="headerlink" title="三、CORS解决跨域问题"></a>三、CORS解决跨域问题</h3><p>当浏览器进行跨域请求的时候，会在请求头部添加origin:协议+主机+端口，表明自己的协议、主机和端口号，当服务器接收到请求并且看到这个origin头部时，如果需要允许能够访问，就得添加头部Access-Control-Allow-Origin:协议+主机+端口到响应里面，浏览器看到服务器传回来的这个头部就知道能不能进行跨域请求了</p>
<p>后端会设置一个Access-Control-Allow-Origin，也就是允许什么源过来拿资源。</p>
<p>没配置CORS：不同源的请求会发送出去，但是不让你的JS拿到响应内容。</p>
<p>配置了CORS：不同源的请求发送出去，服务端告诉浏览器可以拿到响应内容</p>
<h3 id="四、Nginx反向代理解决跨域问题"><a href="#四、Nginx反向代理解决跨域问题" class="headerlink" title="四、Nginx反向代理解决跨域问题"></a>四、Nginx反向代理解决跨域问题</h3><p>客户端先将请求发送给代理服务器，因为代理服务器与服务端服务器都属于服务器之间的沟通，没有同源限制问题所以可以拿到资源</p>
<h4 id="Vue开启代理服务器"><a href="#Vue开启代理服务器" class="headerlink" title="Vue开启代理服务器"></a>Vue开启代理服务器</h4><ol>
<li><p>代理服务器</p>
</li>
<li><ol>
<li>nginx</li>
<li>vue-cli</li>
</ol>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports=&#123;</span><br><span class="line">    // 关闭语法检查</span><br><span class="line">    lintOnSave:false,</span><br><span class="line">    // 开启代理服务器</span><br><span class="line">    devServer:&#123;</span><br><span class="line">        proxy: &#x27;http://localhost:5000&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>请求的资源8080没有就会转发给5000</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">devServer:&#123;</span><br><span class="line">        proxy: &#123;</span><br><span class="line">            // 请求前缀是api才走代理</span><br><span class="line">            &#x27;/students&#x27; : &#123;</span><br><span class="line">                target: &#x27;http://localhost:5000&#x27;,</span><br><span class="line">                pathRewrite:&#123;&#x27;^/ai&#x27;:&#x27;&#x27;&#125;，</span><br><span class="line">                ws:true,//用于支持websock</span><br><span class="line">                changeOrigin:false//是否告知服务器源地址 host值 默认true</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>配置繁琐，请求资源必须加前缀</p>
]]></content>
      <categories>
        <category>Js</category>
      </categories>
      <tags>
        <tag>Js</tag>
      </tags>
  </entry>
  <entry>
    <title>win11耳机在电脑上测试有声音，但是网页和视频没有声音</title>
    <url>/2023/08/20/win11%E8%80%B3%E6%9C%BA%E5%9C%A8%E7%94%B5%E8%84%91%E4%B8%8A%E6%B5%8B%E8%AF%95%E6%9C%89%E5%A3%B0%E9%9F%B3%EF%BC%8C%E4%BD%86%E6%98%AF%E7%BD%91%E9%A1%B5%E5%92%8C%E8%A7%86%E9%A2%91%E6%B2%A1%E6%9C%89%E5%A3%B0%E9%9F%B3/</url>
    <content><![CDATA[<p><img src="http://qny.bioart.icu/483c592874d97a55a5e268a30ccc1538.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">打开声音设置-更多声音设置</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/25f975f5d2075c7aa60cd45acf345816.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>选中你的播放设备 我这里是前面板耳机 点击 【设为默认值】</p>
<p>然后我发现问题：耳机和音响同时输出声音！怎么解决？</p>
<p>1.打开音频管理器</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f7b0b05366701462d41d5e4316f20f0f.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>选中图中播放设备中第二项，就可以分开播放了。</p>
<p>然后又有问题：麦克风没声音了！</p>
<p>参考下面2个视频解决了：</p>
<p><strong>【【设备调试】你的声卡没坏，你的麦克风也没坏，你的电脑更没坏，坏就坏在手贱更新了WINDOWS10！！！- 处理麦克风能被识别但是无声的问题！】 <a href="https://www.bilibili.com/video/BV1as411E7rA/?share_source=copy_web&vd_source=5053a6dbc1b42e83bb14303fbfead9a2">https://www.bilibili.com/video/BV1as411E7rA/?share_source=copy_web&amp;vd_source=5053a6dbc1b42e83bb14303fbfead9a2</a></strong></p>
<p><strong>【解决台式机箱耳麦无法使用麦克风问题，主要问题在于耳机3.5mm连接线】 <a href="https://www.bilibili.com/video/BV1CV4y1y7ex/?share_source=copy_web&vd_source=5053a6dbc1b42e83bb14303fbfead9a2">https://www.bilibili.com/video/BV1CV4y1y7ex/?share_source=copy_web&amp;vd_source=5053a6dbc1b42e83bb14303fbfead9a2</a></strong></p>
]]></content>
      <categories>
        <category>windows</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>音频</tag>
        <tag>问题</tag>
      </tags>
  </entry>
  <entry>
    <title>windows选项影响scrollIntoView的smooth动画效果，scrollIntoView的smooth无效/失效</title>
    <url>/2024/08/18/windows%E9%80%89%E9%A1%B9%E5%BD%B1%E5%93%8DscrollIntoView%E7%9A%84smooth%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C%EF%BC%8CscrollIntoView%E7%9A%84smooth%E6%97%A0%E6%95%88-%E5%A4%B1%E6%95%88/</url>
    <content><![CDATA[<p>问题：项目中scrollIntoView设置了smooth平滑过渡失效。</p>
<p>解决：是因为调整的windows性能选项导致的。</p>
<p><img src="http://qny.bioart.icu/blog/202408181601875.png" alt="2d8cc6a6b15140ce665a7669fae81881"></p>
<p>如图所示：打开【控制面板】- 搜索【性能】 - 调整 Windows 的外观和性能选项 - 开启【窗口内的动画控件和元素】。</p>
<p>设置完后点击应用或者确定，恢复平滑过渡效果。</p>
]]></content>
      <categories>
        <category>Js</category>
      </categories>
      <tags>
        <tag>Js</tag>
        <tag>windows</tag>
        <tag>问题</tag>
      </tags>
  </entry>
  <entry>
    <title>区块链基础知识</title>
    <url>/2024/08/29/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<h3 id="什么是区块链"><a href="#什么是区块链" class="headerlink" title="什么是区块链"></a>什么是区块链</h3><p>比特币 Bitcoin (BTC)：以密码学算法为基础，能够让人们以去中心化的方式，发生非许可的金融行为。</p>
<p>以太坊 Ethereum (ETH)：除了去中心化的交易，还可以签署去中心化的合同，构建去中心化的组织，以及在不需要中心化中介的情况下，以去中心化的方式进行协作。</p>
<p>实际上以太坊的想法是使用比特币中的技术，再加上去中心化的合同，或者叫智能合约(Smart Contract)，区块链或者说是以太坊实现了智能合约的概念。</p>
<blockquote>
<p>关于智能合约：</p>
<p>智能合约是通过去中心化的方式来执行一些列的指令，在这些指令执行中，并不需要中心化或者第三方的中介。</p>
<p>Smart Contracts are a set of instructions executed in a decentralized way without the need for a centralized or third parth intermediary.</p>
</blockquote>
<p>可以把智能合约当成是传统的契约或者合同，不同的是，传统的合同通过笔写在纸上，或者通过word把内容输入进去，而智能合约是代码写的，并且嵌入到一个去中心化的区块链平台。</p>
<p>智能合约就在这个去中心化区块链平台中被执行，没有第二方第三方去执行，所以智能合约解决了中心化所带来的问题。</p>
<blockquote>
<p>中心化存在的问题：</p>
<ul>
<li><strong>信任问题</strong>：在中心化系统中，用户必须信任中央机构（如银行、政府或公司）来执行交易或管理数据。智能合约通过区块链技术，去除了对第三方中介的信任依赖。合同的执行由区块链上的代码自动处理，透明且不可篡改。</li>
<li><strong>透明度</strong>：中心化系统中的操作和决策通常是不可见的，而智能合约则是公开的，所有参与者都可以查看合约的执行情况。这种透明性提高了系统的可信度。</li>
<li><strong>效率问题</strong>：在传统的中心化系统中，交易或协议的执行通常需要经过多个中介或流程，可能会导致延迟和额外的成本。智能合约通过自动执行预先定义的条件，大大提高了效率，减少了人为干预和错误。</li>
<li><strong>安全性</strong>：中心化系统通常是单点故障的目标，一旦中央机构遭受攻击，整个系统就会受到影响。智能合约通过去中心化的方式，减少了单点故障的风险，增加了系统的安全性。</li>
<li><strong>成本问题</strong>：中心化系统中的中介服务通常需要收取费用，增加了交易成本。智能合约可以减少或消除这些中介费用，降低交易成本。</li>
</ul>
</blockquote>
<p>以太坊和比特币最大的不同点就是智能合约，技术上讲，比特币有智能合约，但比特币不是图灵完备的，也就是比特币不能执行一个编程语言的所有的指令。</p>
<p>比特币的开发者想把比特币作为价值存储，而以太坊开发者在这基础上，还把它当成一个运行去中心化合约的平台。</p>
<h3 id="以太坊带来的问题-预言机问题-The-Oracle-Problem"><a href="#以太坊带来的问题-预言机问题-The-Oracle-Problem" class="headerlink" title="以太坊带来的问题( 预言机问题 The Oracle Problem )"></a>以太坊带来的问题( 预言机问题 The Oracle Problem )</h3><p>如果我想用这些智能合约代替日常使用的合同，就需要真实世界的数据输入，区块链自己没有办法获取真实世界的信息，这就是预言机问题</p>
<p>智能合约能够获得发生在区块链上的所有信息，但是作为日常合同使用的话，他们需要外部的数据，和外部的计算，而这些就是预言机的作用</p>
<p>预言机是任何可以向区块链输入数据或者进行链下计算的设备。</p>
<p>预言机不止一个，所以我们需要组织所有预言机，这就需要一个去中心化的预言机网络，正如去中心化区块链网络一样，你在链上的逻辑是去中心化的，在链上的数据和计算也需要是去中心化的。</p>
<h3 id="混合型智能合约-Hybrid-Smart-Contracts"><a href="#混合型智能合约-Hybrid-Smart-Contracts" class="headerlink" title="混合型智能合约( Hybrid Smart Contracts )"></a>混合型智能合约( Hybrid Smart Contracts )</h3><p>将链上去中心化逻辑和链下去中心化数据和计算相结合，这个东西叫做混合型智能合约，大多数我们现在使用的最流行的协议，都是某种类型的混合型智能合约，或者在某种程度上，与混合型智能在一般语境中提到混合智能合约的时候，特指哪些有链下组件的智能合约。</p>
<h3 id="预言机网络-Chainlink"><a href="#预言机网络-Chainlink" class="headerlink" title="预言机网络( Chainlink )"></a>预言机网络( Chainlink )</h3><p>Chainlink 是一个组件化，去中心化的预言机网络。Chainlink 不仅可以给智能合约提供外部数据，还可以提供链下计算。</p>
<p>Chainlink 可以让混合型智能合约，在链上和链下部分都是去中心化的，提供丰富的功能，让智能合约可以像日常合同一样使用。</p>
<h3 id="去中心化应用"><a href="#去中心化应用" class="headerlink" title="去中心化应用"></a>去中心化应用</h3><p>Dapp &#x3D; Decentralized Application &#x3D;去中心化协议 &#x3D; 智能合约应用 &#x3D; 去中心化应用</p>
<p>去中心化应用通常由多个智能合约组成</p>
<h3 id="Web3-是一种观点"><a href="#Web3-是一种观点" class="headerlink" title="Web3 是一种观点"></a>Web3 是一种观点</h3><p>Web1 指的是一个有着固定内容的非许可的开源网络。（固定内容，无审核）</p>
<blockquote>
<p>The permissionless open sourced web with static content.</p>
</blockquote>
<p>web2 指的是一个有着动态内容的许可网络，你所有的逻辑和协议运行在中心化的服务器上，这些中心化服务器控制着你的信息。（动态内容，有审核）</p>
<blockquote>
<p>The permissioned web, with dynamic content. Where companies run your agreements on their servers.</p>
</blockquote>
<p>web3 相比于中心化服务器，去中心化网络运行着你的逻辑，智能合约可以允许你创建无需审核的合同和逻辑，在Web3中，通常伴随着一个概念，即用户拥有他们所使用的协议，也叫拥有者经济。（动态内容，无审核）</p>
<blockquote>
<p> The permissionless web, with dynamic content. Where decentralized censorship resistant networks run your agreement and code. It generally is accompanied by the idea of user owned ecosystems, where the protocols you interact with you also own a portion of, instead of relying on centralized entities for control and governance.  </p>
</blockquote>
<p>最简单总结智能合约做了什么：智能合约创建了信任最小化协议（Trust Minimized Agreements）。</p>
<p>也可以说，智能合约创建不可违背的承诺（Unbreakable Promises）。</p>
<p>那么他们具体能干什么？智能合约到底意味着什么？最小化信任机制和不可违背的承诺是什么事意思？智能合约真正的价值是什么？</p>
]]></content>
      <categories>
        <category>Web3</category>
      </categories>
      <tags>
        <tag>Web3</tag>
      </tags>
  </entry>
  <entry>
    <title>智能合约的作用</title>
    <url>/2024/08/30/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%BD%9C%E7%94%A8/</url>
    <content><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>再讲智能合约前，我们先看看一个传统合约，或者说传统的合同的例子。</p>
<p>银行收取你的钱，他承诺你你的钱非常安全，什么时候都能取出来不会被他吞掉。</p>
<p>在这个例子中，其实本质是一个信任问题，你作为客体要相信银行这个主体信守承诺，真的不会吞掉你的钱，但是历史告诉我们，本该被信任的主题却常常不信守承诺，卷款跑路，导致付出信任的客体遭受大量损失。</p>
<p>你可能会说这些信任系统会有很多保障，比如法院，财务受损后可以去法院申诉等，但这需要非常多的精力和时间然后才能有一个解决方案（并且大部分时候并不是让人满意的）。</p>
<p>所以有没有一项技术能够从根本上解决当今合同不履行问题，这个技术就是智能合约，智能合约就是区块链被开发出来的目的。</p>
<h3 id="什么是智能合约"><a href="#什么是智能合约" class="headerlink" title="什么是智能合约"></a>什么是智能合约</h3><p>智能合约是部署在去中心化区块链上的一个合约或者一组指令</p>
<blockquote>
<p>An agreement, contract, or set of instructions that is deployed on a decentralized blockchain</p>
</blockquote>
<p>智能合约有以下特点：</p>
<ul>
<li>一被部署就无法修改 （ Cannot be altered(immutable) ）</li>
<li>部署后自动执行（ Automatically executes ）</li>
<li>透明，每个人都能看到合约中的条款（ Everyone sees the terms of the agreement ）</li>
</ul>
<p>更深层次的理解是：这些代码会被去中心化地执行</p>
<p>在去中心化交易所，投资者可以节省数以千万计的美元，不用担心欺诈和市场操作行为（我想应该不是完全不用担心，做个比喻应该是比起传统的80%担心降低到5%担心，我猜）</p>
<p>最小化信任机制意思是，这些智能合约最小化了我们需要给到合约执行人的信任</p>
<p>区块链，智能合约和加密货币实际能做的事情，不仅限于信任最小化合约，他们</p>
<ul>
<li>更安全</li>
<li>更容易监控</li>
<li>执行速度更快</li>
</ul>
<h2 id="区块链的其他优势"><a href="#区块链的其他优势" class="headerlink" title="区块链的其他优势"></a>区块链的其他优势</h2><h3 id="前言-1"><a href="#前言-1" class="headerlink" title="前言"></a>前言</h3><p>总结一下这2篇文章讲的内容：比特币是第一个把区块链技术引入大众视野的协议，也把加密货币带到了主流世界，比特币的数量是有限的，所以是一种电子黄金或者说一种价值存储，用户之间可以去中心化的方式发送交易。智能合约平台推动区块链技术更进一步，他们使人们可以开发智能合约，和去中心化的信任最小化合约，这些智能合约和去中心化应用，可以通过一个工具和真实世界交互，这个工具被称为去中心化预言机网络，Chainlink是一个去中心化预言机网络，它允许我们去开发混合型智能合约，混合型智能合约将我们链上逻辑和链下去中心化的数据和计算结合起来，使得我们的逻辑是完全去中心化的，数据和外部计算也是完全去中心化的，让我们能够像使用传统合同一样，使用智能合约</p>
<h3 id="区块链的其他优势-1"><a href="#区块链的其他优势-1" class="headerlink" title="区块链的其他优势"></a>区块链的其他优势</h3><ol>
<li>去中心化 Decentralized<ol>
<li>没有中心化的中介，一个区块链上由不同的参与者运行，这些参与者被称为节点运营者（node operators）。成千上万的节点运营者运行同一个软件，运行智能合约等，才使得网络是去中心化的</li>
</ol>
</li>
<li>透明性和灵活性 Transparency &amp; Flexibility<ol>
<li>因为所有节点运营者都运行这个软件，每个人都可以看到链上发生的任何事情，意味着没有内幕交易，但这不意味着没有隐私，区块链是匿名的，不需要绑定实际身份</li>
</ol>
</li>
<li>速度和效率 Speed &amp; Efficiency<ol>
<li>相比银行海外转账的2-3个星期，在区块链上，所有这些交易会立即发生，并且容错率随着运营节点的增多，只要有一个节点还有这个链的数据，你就是安全的，攻击区块链比供给一个中心化的服务器要困难的多</li>
</ol>
</li>
<li>消除交易对手风险 Counterparty Risk Removal<ol>
<li>移除了中心化中介，移除了Web2中需要信任的准入机制，当我们与他人合作时我们的利益通常不是他们最关心的，而智能合约一旦创建出来他们不能再去修改它。</li>
</ol>
</li>
<li>信任最小化合约 Trust minimized agrrements<ol>
<li>从以品牌为基础的协议，转变到了以数学为基础的协议，在这里我们可以看到密码学证明，可以查看代码然后了解到底会发生什么，指令会怎样执行，而不是依赖一个人去做符合规则的事情。任何基于智能合约和去中心化混合智能合约的操作都是基于规则的</li>
</ol>
</li>
</ol>
<p>个人而言，我认为这是一种美好的愿景，仍感觉需要一定的时间才能达成，目前而言，web3.0的这些项目，币圈的这些项目爆雷的还是有的</p>
<h3 id="基于区块链的应用"><a href="#基于区块链的应用" class="headerlink" title="基于区块链的应用"></a>基于区块链的应用</h3><ol>
<li>DeFi 去中心化金融 （Decentralized Finance）<ol>
<li>它让用户可以参与到金融市场，而不需要经过中心化中介，比如 Robinhood</li>
</ol>
</li>
<li>DAOs 去中心化自治组织 （Decentralized Autonomous Organization）<ol>
<li>完全被去中心化管理的组织，他们被区块链上的一组指令或者一个智能合约管理，容易参与，规则黑白分明</li>
</ol>
</li>
<li>NFTs 非同质化代币 （Non-Fungible Token）<ol>
<li>电子艺术品、一个不可以被复制，且绝对唯一的数字认证书</li>
<li>举个例子，假设 A 画了一幅画，然后 A 把它拍成照片做成 NFT 发给了 B 同学。然后呢，B 同学右键复制了一份，又发给了 C 同学。这个时候 C 同学说不对呀，你这个不是原版呀。你这个是复制的。我要的是 A 发给你的那个照片。<br>NFT 就赋予这张照片能够让 C 同学检查出来它是复制的能力。</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Web3</category>
      </categories>
      <tags>
        <tag>Web3</tag>
      </tags>
  </entry>
  <entry>
    <title>发起区块链第一笔交易</title>
    <url>/2024/08/30/%E5%8F%91%E8%B5%B7%E5%8C%BA%E5%9D%97%E9%93%BE%E7%AC%AC%E4%B8%80%E7%AC%94%E4%BA%A4%E6%98%93/</url>
    <content><![CDATA[<h3 id="创建钱包"><a href="#创建钱包" class="headerlink" title="创建钱包"></a>创建钱包</h3><ol>
<li><p>下载MetaMask：<a href="https://metamask.io/download/">Download MetaMask</a></p>
</li>
<li><p>安装MetaMask浏览器插件</p>
</li>
<li><p>然后根据提示创建一个新的钱包</p>
</li>
<li><p>可以复制账户地址到区块浏览器查看账户细节：<a href="https://etherscan.io/">https://etherscan.io/</a></p>
<ol>
<li>同一个助记词下可以有多个账户</li>
<li>账号地址是我们公开的身份</li>
<li>每个账号地址有私钥，不能分享和暴露私钥，私钥可以进入私钥对应的账户</li>
</ol>
</li>
<li><p>使用测试网络进行操作</p>
<p><img src="http://qny.bioart.icu/blog/202408301554955.png" alt="image-20240830155442895"></p>
</li>
</ol>
<h3 id="获取测试币"><a href="#获取测试币" class="headerlink" title="获取测试币"></a>获取测试币</h3><ol>
<li>通过测试网水龙头获取测试币：<a href="https://faucets.chain.link/">Testnet Faucets</a></li>
</ol>
<p><img src="http://qny.bioart.icu/blog/202408301601337.png" alt="image-20240830160158307"></p>
<ol start="2">
<li><p>设置跟钱包一样的测试网络然后点击Connect wallet链接钱包</p>
</li>
<li><p>然后选择你的测试钱包并确定</p>
</li>
<li><p>然后在下方选择一个测试网络Ethereum Sepolia描述drips 0.1 ETH的水龙头，通过验证后获取tokens</p>
</li>
<li><p>然后就可以在MetaMask查看到你有0.1 SepoliaETH</p>
</li>
</ol>
<h3 id="查看具体的交易详情"><a href="#查看具体的交易详情" class="headerlink" title="查看具体的交易详情"></a>查看具体的交易详情</h3><ol>
<li><p>在MetaMask点击这次交易</p>
<p><img src="http://qny.bioart.icu/blog/202408301624775.png" alt="image-20240830162413717"></p>
</li>
<li><p>点击【收款】</p>
</li>
<li><p>点击状态的【在区块浏览器上查看】</p>
</li>
<li><p>可以看到这次交易的详情</p>
<p><img src="http://qny.bioart.icu/blog/202408301625623.png" alt="image-20240830162550503"></p>
<h4 id="关于Gas-Price和Transaction-Fee的概念"><a href="#关于Gas-Price和Transaction-Fee的概念" class="headerlink" title="关于Gas Price和Transaction Fee的概念"></a>关于Gas Price和Transaction Fee的概念</h4><p>不同的节点运行区块链，是因为他们可以通过区块链上的交易获得收入，当你创建一个交易，就会有一个节点，或者说叫矿工和验证者，他们会被支付一小部分以太坊或者去他区块链的原生代币，显然这些收入会激励人们运行节点。</p>
<p>他们的收入是由gas使用量来决定的，gas是一个计算量的单位，要使用更多的计算资源，就需要支付更多的gas</p>
<p>在详细交易中可以看到 Gas Limit &amp; Usage by Txn，也就是gas上限和使用量，上限为60,000 实际上使用了21,000。对于发送以太币这样简单的交易，gas比较便宜，对于像是铸造NFT，向某个Defi存取这种复杂交易就会用到更多计算，花更多gas</p>
</li>
</ol>
<p>​		交易手续费 Transaction Fee &#x3D; Usage by Txn * Gas Price</p>
<p>​		</p>
<p>​		所以在这个交易中，发送方除了0.1的SepoliaETH 还额外花费了 0.005427222491544 SepoliaETH</p>
]]></content>
      <categories>
        <category>Web3</category>
      </categories>
      <tags>
        <tag>Web3</tag>
      </tags>
  </entry>
  <entry>
    <title>区块链的运作机制</title>
    <url>/2024/08/31/%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E8%BF%90%E4%BD%9C%E6%9C%BA%E5%88%B6/</url>
    <content><![CDATA[<h3 id="哈希算法的概念"><a href="#哈希算法的概念" class="headerlink" title="哈希算法的概念"></a>哈希算法的概念</h3><p>了解运作机制之前要先了解哈希算法</p>
<p>哈希算法它是一种单向密码体制，即它是一个从明文到密文的不可逆的映射，只有加密过程，没有解密过程。一般把哈希算法得出来的结果称为哈希Hash</p>
<p>哈希Hash是一个独一无二的固定长度字符串，用来代表一段数据，它通过将一个数据传入”哈希函数”来生成。生成哈希的函数有很多种，比如常见的SHA256，以太坊使用的是Keccak256算法</p>
<h3 id="区块的矿工的作用"><a href="#区块的矿工的作用" class="headerlink" title="区块的矿工的作用"></a>区块的矿工的作用</h3><p>区块的示例网站：<a href="https://andersbrownworth.com/blockchain/block">Blockchain Demo (andersbrownworth.com)</a></p>
<p><img src="http://qny.bioart.icu/blog/202408311542165.png" alt="image-20240831154232099"></p>
<p>在区块中我们把数据分块</p>
<ul>
<li>Block 区块</li>
<li>Nonce 随机数</li>
<li>Data 数据：在实际BTC系统里，Data域就是body，里面有交易树结构</li>
</ul>
<p>我们会把这3部分都进行哈希运算，得到哈希值。</p>
<p>而“矿工”的工作其实是解题，一道填空题，挖矿的时候，矿工会收到一道题目，图中的区块和数据是固定的而哈希是目标，随机数是答案。因为哈希是单向的，你只能通过穷举去穷举随机数Nonce的值，穷举到了这个随机数，也就是72608后，发现哈希值与目标哈希一致，那么这道题就解出来了，答案是72608。</p>
<p>这就是矿工的作用，不断计算找到Nonce，而这个Nonce可以解决对于的 “难题”，在这里是Hash。而解题其实是靠“碰运气的”。</p>
<blockquote>
<p>Hash开头的0越多，找到解的概率越小，挖矿难度越大。</p>
<p>这是因为哈希函数的输出是均匀分布的，也就是说在所有可能的哈希值中，任何特定的输出值（如以0开头）出现的概率是极低的。</p>
</blockquote>
<h3 id="区块链"><a href="#区块链" class="headerlink" title="区块链"></a>区块链</h3><p>在上面的例子我们能理解单独区块，如果有很多个区块呢？</p>
<p>区块链的示例网站：<a href="https://andersbrownworth.com/blockchain/blockchain">Blockchain Demo (andersbrownworth.com)</a></p>
<p><img src="http://qny.bioart.icu/blog/202408311556780.png" alt="image-20240831155610678"></p>
<p>在区块链中多了属性 前指针 Prev:</p>
<ul>
<li>Prev 前指针：指向上一个区块的哈希值</li>
</ul>
<p>观察图中的Prev可以发现，区块3的前指针指向区块2的哈希，区块2的前指针指向区块1的哈希，而第一个区块1的前指针则全为0，像一个链表一样，这就是区块链。</p>
<p>第一个区块也被称为创世区块（Genesis Block），也就是区块链中的第一个区块，它的Prev指向一个不存在的区块。</p>
<p>而在区块链中Hash计算时要的输入要包含前指针Prev，也就是说，要是你改变了区块2的Data，那么区块2后面的所有区块都会变红，意味着他们都无效了</p>
<p>这就是区块链实现“无法篡改”的方式。只要你改了一个区块上的内容，会让后面的区块都无效。</p>
<p>当然你可以重新从修改的区块开始计算，然后把后面的都挖或者说计算出来，但是挖这些区块需要很大的计算量，因为需要重新挖整个区块链的区块，你修改的区块越靠前，重新哈希运算的难度就越大。所以说区块链的历史数据很难被篡改。但还是会有被重新挖的可能，不是吗？那这里就是去中心化或者说分布式的特性发挥作用的时候了。</p>
<h3 id="分布式"><a href="#分布式" class="headerlink" title="分布式"></a>分布式</h3><p>分布式的示例网站：<a href="https://andersbrownworth.com/blockchain/distributed">Blockchain Demo (andersbrownworth.com)</a></p>
<p><img src="http://qny.bioart.icu/blog/202408311609197.png" alt="image-20240831160928118"></p>
<p>可以看到我们现在有很多个节点（Peer），很多人提到的P2P就是这里的Peer的概念，不同的节点（Peer）都在运行这个区块链，他们的权重相同，区块链中的每一个Peer，节点或者说运营主体都有这相同的权力，决定那条链才是正确的链的方法非常简单</p>
<p>那就是比较最后一个哈希值，因为哈希运算是“单向的”，最后一个区块的哈希值依赖上一个区块，所以最后一个区块的哈希值，包含了前面所有区块的信息。</p>
<p>现在如果你想对区块链历史动手脚重新挖矿，计算到最后一个哈希的数据，比如修改Peer A的数据，最后一个区块的数据与Peer B和Peer C必定不一样，那Peer A实际上分叉出了一条区块链，记录它自己的历史数据。</p>
<p>在分布式中每个人都是监督者，而这里又能牵扯到最长链有效原则，其他节点不需要重头开始挖矿，接着合法链继续往后挖即可。</p>
<p>这就绝对安全了吗？也不是，在这个3节点的网络中，只要Peer A 说服另外2个中的一个Peer，跟他一起修改历史数据并重新挖矿（这就是代价），那么最后会发生什么，少数服从多数，这种情况下Peer A的阴谋诡计就成功了，真的修改了历史的数据。也就是大家说的区块链的51%攻击，只要大于50%的链历史被修改，那假的也会变成真的（人多力量大（雾）），但是假如你都有51%的节点权力了，那你为什么要捣乱。</p>
<p>在真实链中Data部分存储的是交易信息，捣乱就是为了搞钱嘛，都能动用51%的节点了，还会缺钱（Ps：也说不准吼）？毕竟重新算51%成本也是非常高的。</p>
<blockquote>
<p> Data替换为交易信息的示例： <a href="https://andersbrownworth.com/blockchain/tokens">Blockchain Demo (andersbrownworth.com)</a></p>
</blockquote>
<p>当然这只是一个示例，区块链其实是通过Solidity代码运行的，而非将随机值放在Data区域，Solidity代码定义了链上不同区块和协议交互方式，实际挖矿的时候难度也要大得多, Hash前面至少10几个零</p>
<h4 id="关于哈希碰撞"><a href="#关于哈希碰撞" class="headerlink" title="关于哈希碰撞"></a>关于哈希碰撞</h4><p>我们知道哈希是单向计算的，固定的字符压缩经过算法得到固定的哈希，有没有可能出现像<code>md5彩虹表</code>的情况呢，就是说我输入的数据不一样，但是哈希函数返回的哈希值是一样的，这种想要人为的进行哈希碰撞的想法，以现在的技术，几乎不可能实现。</p>
<blockquote>
<p><strong>碰撞代表特殊性</strong>：哈希碰撞代表着多个输入映射到同一个输出，这是在极高熵的系统中形成的一种有序状态。然而，这种有序状态非常罕见，因为理想的哈希函数旨在最大化熵，使得输出尽可能随机。</p>
<p><strong>概率极低</strong>：由于哈希函数的输出空间非常大（例如，SHA-256的输出空间有 2的256次方 种可能性），在这个巨大的空间中，随便选取两个输入而产生相同哈希值的概率极低。要想通过人为的方法刻意找到两个不同的输入导致相同的哈希值，所需的计算量和尝试次数是天文数字。</p>
<p>哈希碰撞作为一种熵减行为，意味着系统从高熵、高随机性状态转向一个极其低概率的有序状态。由于现代哈希函数的设计旨在最大化熵和抗碰撞性，试图通过人为干预来制造碰撞所需的计算资源和时间代价巨大，几乎不可能实现。因此，在实际应用中，哈希碰撞极难人为制造。</p>
</blockquote>
<p>你可能会问个问题，怎么确定交易确实是由某个人发出的，这里我们就需要了解公钥和私钥等关于签名交易（Signing Transactions）的内容</p>
]]></content>
      <categories>
        <category>Web3</category>
      </categories>
      <tags>
        <tag>Web3</tag>
      </tags>
  </entry>
  <entry>
    <title>微信小程序scroll-view的scroll-into-view定位在安卓和模拟器中正常在ios中定位错误乱跳</title>
    <url>/2024/08/31/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8Fscroll-view%E7%9A%84scroll-into-view%E5%AE%9A%E4%BD%8D%E5%9C%A8%E5%AE%89%E5%8D%93%E5%92%8C%E6%A8%A1%E6%8B%9F%E5%99%A8%E4%B8%AD%E6%AD%A3%E5%B8%B8%E5%9C%A8ios%E4%B8%AD%E5%AE%9A%E4%BD%8D%E9%94%99%E8%AF%AF%E4%B9%B1%E8%B7%B3/</url>
    <content><![CDATA[<p>需求是一进入页面就要执行scroll让页面滚动到对应位置。</p>
<p>原因是元素未渲染完成获取不到id导致定位错误</p>
<p>解决办法是：设置延迟时间等待元素加载完就可以了</p>
<p><img src="http://qny.bioart.icu/blog/202408311154158.png" alt="img"></p>
]]></content>
      <categories>
        <category>前端</category>
        <category>微信小程序</category>
      </categories>
      <tags>
        <tag>问题</tag>
        <tag>微信小程序</tag>
      </tags>
  </entry>
  <entry>
    <title>ETH交易详情解析</title>
    <url>/2024/09/02/%E5%8C%BA%E5%9D%97%E5%A5%96%E5%8A%B1-EIP1559/</url>
    <content><![CDATA[<p><img src="http://qny.bioart.icu/blog/202409020928650.png" alt="image-20240902092823522"></p>
<ul>
<li><p>Transaction Hash: 一个独一无二的交易哈希，代表该区块链上的该笔交易</p>
</li>
<li><p>Status: 交易的状态 Success 或者 Fail</p>
</li>
<li><p>Block: 被确认的区块高度（区块链的一种“长度”或“深度”）</p>
<ul>
<li>16896 Block Confirmations: 意味着在交易所在的那个区块之后，已经有16个新的区块被添加到区块链中。确认次数越多，交易被篡改或回滚的可能性就越低。</li>
</ul>
</li>
<li><p>Timestamp: 交易发生的时间</p>
</li>
<li><p>From: 发送方</p>
</li>
<li><p>To: 接收方 </p>
</li>
<li><p>Value: 发送了多少ETH</p>
</li>
<li><p>Transaction Fee: 本次交易所花费的手续费 （Base fee per gas + Max Priority fee per gas）* gas</p>
</li>
<li><p>Gas Price: Gas的费用</p>
</li>
<li><p>Gas Limit &amp; Usage by Txn: 限制使用多少Gas（愿意为这次交易付出的最大Gas） 和 实际使用了的Gas</p>
</li>
<li><p>Gas Fees</p>
<ul>
<li>Base：网络为每个区块动态调整的最低费用，用于确保交易在区块链上的处理。它由网络自动设定，随着网络拥堵程度的变化而变化。Base Fee 会被销毁（Burnt），而不是支付给矿工。这是 EIP-1559 的一个关键特性，旨在减少以太坊的供应量。</li>
<li>Max：用户愿意为交易支付的每单位 Gas 的最高费用上限。它包括 Base Fee 和矿工小费（Priority Fee）。用户设置的 Max Fee 确保即使网络拥堵导致 Base Fee 上升，交易仍然可以被处理。</li>
<li>Max Priority：用户额外愿意支付给矿工的小费，以激励矿工优先处理他们的交易。这部分费用会直接支付给矿工，而不是销毁。在这个例子中，Max Priority Fee 与 Max Fee 相同，都是 258.439166264 Gwei，这意味着用户愿意为快速处理交易付出较高的费用。</li>
</ul>
</li>
<li><p>Burnt &amp; Txn Savings Fees</p>
<ul>
<li>Burnt：被烧掉的ETH</li>
<li>Txn Savings Fees：用户设定的最大费用（Max Fee）与实际支付的费用之间的差额。这个差额代表了用户节省下来的部分费用</li>
</ul>
</li>
<li><p>Other Attributes</p>
<ul>
<li>Txn Type: <strong>Txn Type</strong> 表示交易的类型。<code>2</code> 代表的是 EIP-1559 交易。在以太坊网络中，EIP-1559 引入了新的交易类型（Type 2），这种交易类型包括 Base Fee 和 Max Fee 的机制，与之前的非 EIP-1559 交易（Type 0）不同。Type 2 交易可以动态调整费用，避免用户过度支付交易费用。</li>
<li>Nonce: <strong>Nonce</strong> 是一个唯一的编号，用于标识一个账户在以太坊网络中发送的每一笔交易。每当一个账户发起一笔新的交易时，Nonce 值会增加 1。这个值对于防止“双重支付”至关重要，因为它确保每个交易在区块链中都是唯一的，不会被重复处理。在这个例子中，Nonce 值为 <code>1230500</code>，这意味着这是该账户发起的第 1,230,501 笔交易。</li>
<li>Position In Block: <strong>Position In Block</strong> 表示该交易在区块中的位置，通常是指该交易在被打包进区块时的排序位置。值为 <code>0</code> 表示这笔交易是该区块中被处理的第一笔交易。在一个区块中，交易的位置可能会影响到它的执行顺序，进而可能影响交易的结果，尤其是在多个交易试图修改同一状态时。</li>
</ul>
</li>
<li><p>Input Data: 因为这个交易是发送以太币，所以输入数据是空的。当我们使用智能合约时就不是空的了</p>
</li>
</ul>
<blockquote>
<p>“Txn” 是 “Transaction” 的缩写。</p>
</blockquote>
]]></content>
      <categories>
        <category>Web3</category>
      </categories>
      <tags>
        <tag>Web3</tag>
      </tags>
  </entry>
  <entry>
    <title>签名交易 Signature transaction</title>
    <url>/2024/08/31/%E7%AD%BE%E5%90%8D%E4%BA%A4%E6%98%93%20Signature%20transaction/</url>
    <content><![CDATA[<p>本文讨论一下签名交易，私钥和其他密码学知识。</p>
<p><a href="https://andersbrownworth.com/blockchain/tokens">Blockchain Demo (andersbrownworth.com)</a></p>
<p><img src="http://qny.bioart.icu/blog/202408311648782.png" alt="image-20240831164854709"></p>
<p>什么如何确定图中区块1的交易信息中第一条，Darcy真的给Bingley发了25元呢？也就是怎么知道这个交易真的发生了呢？</p>
<p>我们需要了解私钥和公钥 &amp; 他们是怎么验证的</p>
<p>示例网站</p>
<p><a href="https://andersbrownworth.com/blockchain/public-private-keys/keys">Blockchain Demo: Public &#x2F; Private Keys &amp; Signing (andersbrownworth.com)</a></p>
<p><img src="http://qny.bioart.icu/blog/202409020846712.png" alt="image-20240902084656678"></p>
<p>上图中，私钥会通过ECDSA算法，比特币和以太坊都使用这个算法，它是DSA（电子签名算法）的一种，它可以根据私钥创建出公钥，想了解DSA算法可以b站看技术蛋老师的ecc算法。</p>
<p>在交易中，我会像密码一样使用私钥，对交易进行电子签名，然后别人可以通过公钥来验证这个签名的交易。</p>
<p>让我们演示一下，接下来到<a href="https://andersbrownworth.com/blockchain/public-private-keys/signatures">Blockchain Demo: Public &#x2F; Private Keys &amp; Signing (andersbrownworth.com)</a>页面，进行签名和验证的操作。</p>
<p><img src="http://qny.bioart.icu/blog/202409020851288.png" alt="image-20240902085151248"></p>
<p>message是你想要对其签名的数据，输入数据后点击签名Sign按钮，跟哈希生成的逻辑类似，我们使用这个签名算法把message和Private Key组合并使用ECDSA算法生成Message Signature，这个签名算法的强大之处在于你可以使用私钥创建信息签名，但是别人不能从信息签名中得到你的私钥。</p>
<p>我们为什么要这样做，这在Verify页面可以得到答案。</p>
<p><img src="http://qny.bioart.icu/blog/202409020856178.png" alt="image-20240902085644134"></p>
<p>当Message 被签名数据 和 Public Key 公钥 和 根据私钥和数据生成的Message Signature 一致的时候，验证会通过，当验证通过的时候，别人就知道这个东西是你发布的而不是其他什么人发布的</p>
<p>流程是 你用私钥(不能给别人看的) 加密数据 生成加密签名，别人通过加密签名、你公布的公钥和数据来验证这个内容是否是你发布的。所以这是一个身份认证机制，让别人知道这个交易是你发起的。这是密码学非对称加密的内容，想了解更多可以去b站搜视频。</p>
<p>一样的逻辑 我们把数据部分换成交易信息，<a href="https://andersbrownworth.com/blockchain/public-private-keys/transaction">Blockchain Demo: Public &#x2F; Private Keys &amp; Signing (andersbrownworth.com)</a></p>
<p><img src="http://qny.bioart.icu/blog/202409020903504.png" alt="image-20240902090349469"></p>
<p>我们就能知道，这个交易是由谁发起的</p>
<p>在这个过程中私钥是非常私密的，一旦有人获得了你的私钥，他们就可以代替你对交易进行签名，发送交易</p>
<blockquote>
<p>以太坊的地址是公钥衍生出来的</p>
</blockquote>
<p>这个单向算法本身就是大家知道的，只不过私钥能签名公钥，但是公钥无法反推私钥，只能验证</p>
]]></content>
      <categories>
        <category>Web3</category>
      </categories>
      <tags>
        <tag>Web3</tag>
      </tags>
  </entry>
  <entry>
    <title>ETH交易详情解析</title>
    <url>/2024/09/02/ETH%E4%BA%A4%E6%98%93%E8%AF%A6%E6%83%85%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<p><img src="http://qny.bioart.icu/blog/202409020928650.png" alt="image-20240902092823522"></p>
<ul>
<li><p>Transaction Hash: 一个独一无二的交易哈希，代表该区块链上的该笔交易</p>
</li>
<li><p>Status: 交易的状态 Success 或者 Fail</p>
</li>
<li><p>Block: 被确认的区块高度（区块链的一种“长度”或“深度”）</p>
<ul>
<li>16896 Block Confirmations: 意味着在交易所在的那个区块之后，已经有16个新的区块被添加到区块链中。确认次数越多，交易被篡改或回滚的可能性就越低。</li>
</ul>
</li>
<li><p>Timestamp: 交易发生的时间</p>
</li>
<li><p>From: 发送方</p>
</li>
<li><p>To: 接收方 </p>
</li>
<li><p>Value: 发送了多少ETH</p>
</li>
<li><p>Transaction Fee: 本次交易所花费的手续费 （Base fee per gas + Max Priority fee per gas）* gas</p>
</li>
<li><p>Gas Price: Gas的费用</p>
</li>
<li><p>Gas Limit &amp; Usage by Txn: 限制使用多少Gas（愿意为这次交易付出的最大Gas） 和 实际使用了的Gas</p>
</li>
<li><p>Gas Fees</p>
<ul>
<li>Base：网络为每个区块动态调整的最低费用，用于确保交易在区块链上的处理。它由网络自动设定，随着网络拥堵程度的变化而变化。Base Fee 会被销毁（Burnt），而不是支付给矿工。这是 EIP-1559 的一个关键特性，旨在减少以太坊的供应量。</li>
<li>Max：用户愿意为交易支付的每单位 Gas 的最高费用上限。它包括 Base Fee 和矿工小费（Priority Fee）。用户设置的 Max Fee 确保即使网络拥堵导致 Base Fee 上升，交易仍然可以被处理。</li>
<li>Max Priority：用户额外愿意支付给矿工的小费，以激励矿工优先处理他们的交易。这部分费用会直接支付给矿工，而不是销毁。在这个例子中，Max Priority Fee 与 Max Fee 相同，都是 258.439166264 Gwei，这意味着用户愿意为快速处理交易付出较高的费用。</li>
</ul>
</li>
<li><p>Burnt &amp; Txn Savings Fees</p>
<ul>
<li>Burnt：被烧掉的ETH</li>
<li>Txn Savings Fees：用户设定的最大费用（Max Fee）与实际支付的费用之间的差额。这个差额代表了用户节省下来的部分费用</li>
</ul>
</li>
<li><p>Other Attributes</p>
<ul>
<li>Txn Type: <strong>Txn Type</strong> 表示交易的类型。<code>2</code> 代表的是 EIP-1559 交易。在以太坊网络中，EIP-1559 引入了新的交易类型（Type 2），这种交易类型包括 Base Fee 和 Max Fee 的机制，与之前的非 EIP-1559 交易（Type 0）不同。Type 2 交易可以动态调整费用，避免用户过度支付交易费用。</li>
<li>Nonce: <strong>Nonce</strong> 是一个唯一的编号，用于标识一个账户在以太坊网络中发送的每一笔交易。每当一个账户发起一笔新的交易时，Nonce 值会增加 1。这个值对于防止“双重支付”至关重要，因为它确保每个交易在区块链中都是唯一的，不会被重复处理。在这个例子中，Nonce 值为 <code>1230500</code>，这意味着这是该账户发起的第 1,230,501 笔交易。</li>
<li>Position In Block: <strong>Position In Block</strong> 表示该交易在区块中的位置，通常是指该交易在被打包进区块时的排序位置。值为 <code>0</code> 表示这笔交易是该区块中被处理的第一笔交易。在一个区块中，交易的位置可能会影响到它的执行顺序，进而可能影响交易的结果，尤其是在多个交易试图修改同一状态时。</li>
</ul>
</li>
<li><p>Input Data: 因为这个交易是发送以太币，所以输入数据是空的。当我们使用智能合约时就不是空的了</p>
</li>
</ul>
<blockquote>
<p>“Txn” 是 “Transaction” 的缩写。</p>
</blockquote>
]]></content>
      <categories>
        <category>Web3</category>
      </categories>
      <tags>
        <tag>Web3</tag>
      </tags>
  </entry>
  <entry>
    <title>前端在区块链中扮演的角色</title>
    <url>/2024/09/19/%E5%89%8D%E7%AB%AF%E5%9C%A8%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B8%AD%E6%89%AE%E6%BC%94%E7%9A%84%E8%A7%92%E8%89%B2/</url>
    <content><![CDATA[<p>本文讨论一下前端在区块链中起什么作用，我觉得前端主要还是扮演的交互角色，在web端、在移动端，调用库和接口对区块链上的数据进行操作，那么具体是调用哪些库呢？</p>
<p>Wagmi、Viem 和 Web3Modal 是在 Web3 开发中常用的工具库，主要用于构建与区块链交互的前端应用。它们分别解决了区块链交互、RPC 通信、和钱包连接的不同问题，但可以组合起来构建更强大、用户体验更好的 DApp。</p>
<h3 id="1-Wagmi"><a href="#1-Wagmi" class="headerlink" title="1. Wagmi"></a>1. <strong>Wagmi</strong></h3><p>Wagmi 是一个用于 React 应用的前端库，简化了与以太坊和其他 EVM 兼容区块链的交互。它提供了一套 React hooks，使得钱包连接、账户信息获取、区块链读写操作等功能变得非常方便。Wagmi 的核心设计理念是“易用”和“高可定制性”，并且支持与多种钱包和 RPC 库的无缝集成。</p>
<p><strong>主要特点：</strong></p>
<ul>
<li>React hooks 简化区块链交互</li>
<li>内置状态管理和错误处理</li>
<li>与多种钱包无缝集成</li>
<li>支持合约读写、监听事件等</li>
</ul>
<h3 id="2-Viem"><a href="#2-Viem" class="headerlink" title="2. Viem"></a>2. <strong>Viem</strong></h3><p>Viem 是一个现代化的以太坊 JavaScript 库，用于与区块链节点（如 RPC 节点）进行通信。它可以被视为 ethers.js 的替代品，提供了类似功能，如处理交易、合约调用、账户和区块信息等。Viem 设计现代、类型安全且高度模块化，尤其适合 TypeScript 项目，并且与 Wagmi 兼容良好。</p>
<p><strong>主要特点：</strong></p>
<ul>
<li>高性能的 RPC 调用</li>
<li>类型安全，适合 TypeScript</li>
<li>支持与多链交互</li>
<li>兼容 Wagmi 以及其他前端框架</li>
</ul>
<h3 id="3-Web3Modal"><a href="#3-Web3Modal" class="headerlink" title="3. Web3Modal"></a>3. <strong>Web3Modal</strong></h3><p>Web3Modal 是一个钱包连接库，允许 DApp 简单地集成各种加密钱包。它提供了一个统一的接口，用户可以通过一个弹出窗口选择他们想要连接的加密钱包，比如 MetaMask、WalletConnect、Coinbase Wallet 等。Web3Modal 可以与 Wagmi 结合使用，管理用户的账户连接和身份认证。</p>
<p><strong>主要特点：</strong></p>
<ul>
<li>支持多个钱包（如 MetaMask、WalletConnect、Coinbase Wallet）</li>
<li>用户体验良好的钱包连接界面</li>
<li>易于集成并与 React 和其他前端框架兼容</li>
</ul>
<h3 id="关系与组合使用"><a href="#关系与组合使用" class="headerlink" title="关系与组合使用"></a>关系与组合使用</h3><p>Wagmi、Viem 和 Web3Modal 可以无缝协作，共同构建一个完整的区块链前端交互系统。</p>
<ol>
<li><strong>钱包连接：</strong>通过 Web3Modal 用户可以选择并连接钱包。</li>
<li><strong>账户管理：</strong>钱包连接后，Wagmi 负责管理账户、交易等状态，并提供 React hooks。</li>
<li><strong>区块链交互：</strong>Viem 通过与区块链节点的 RPC 通信，执行合约调用、读取链上数据等操作。Wagmi 的 hooks 也可以依赖 Viem 来进行更深度的区块链交互。</li>
</ol>
<p><strong>典型使用场景</strong>：</p>
<ul>
<li>使用 Web3Modal 提供钱包选择 UI，用户连接钱包。</li>
<li>Wagmi 处理账户连接状态，并使用 React hooks 来获取用户的地址、余额等信息。</li>
<li>Viem 用于处理具体的区块链读写操作，如发送交易或调用智能合约。</li>
</ul>
]]></content>
      <categories>
        <category>Web3</category>
      </categories>
      <tags>
        <tag>Web3</tag>
      </tags>
  </entry>
</search>
